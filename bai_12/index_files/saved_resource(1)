/**
 * vcTrackingPlugin - v1.0.0 - 17:57:31 09-02-2023
 * Author: TuanLDT
 */

!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).OpenVV=e()}}(function(){return function e(t,n,i){function r(a,s){if(!n[a]){if(!t[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[a]={exports:{}};t[a][0].call(c.exports,function(e){var n=t[a][1][e];return r(n||e)},c,c.exports,e,t,n,i)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<i.length;a++)r(i[a]);return r}({1:[function(e,t,n){"use strict";t.exports=function(e,t,n){if("function"==typeof Array.prototype.find)return e.find(t,n);n=n||this;var i,r=e.length;if("function"!=typeof t)throw new TypeError(t+" is not a function");for(i=0;i<r;i++)if(t.call(n,e[i],i,e))return e[i]}},{}],2:[function(e,t,n){!function(e,t){"use strict";function n(e){this.time=e.time,this.target=e.target,this.rootBounds=e.rootBounds,this.boundingClientRect=e.boundingClientRect,this.intersectionRect=e.intersectionRect||{top:0,bottom:0,left:0,right:0,width:0,height:0},this.isIntersecting=!!e.intersectionRect;var t=this.boundingClientRect,n=t.width*t.height,i=this.intersectionRect,r=i.width*i.height;this.intersectionRatio=n?r/n:this.isIntersecting?1:0}function i(e,t){var n=t||{};if("function"!=typeof e)throw new Error("callback must be a function");if(n.root&&1!=n.root.nodeType)throw new Error("root must be an Element");this._checkForIntersections=o(this._checkForIntersections.bind(this),this.THROTTLE_TIMEOUT),this._callback=e,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(n.rootMargin),this.thresholds=this._initThresholds(n.threshold),this.root=n.root||null,this.rootMargin=this._rootMarginValues.map(function(e){return e.value+e.unit}).join(" ")}function r(){return e.performance&&performance.now&&performance.now()}function o(e,t){var n=null;return function(){n||(n=setTimeout(function(){e(),n=null},t))}}function a(e,t,n,i){"function"==typeof e.addEventListener?e.addEventListener(t,n,i||!1):"function"==typeof e.attachEvent&&e.attachEvent("on"+t,n)}function s(e,t,n,i){"function"==typeof e.removeEventListener?e.removeEventListener(t,n,i||!1):"function"==typeof e.detatchEvent&&e.detatchEvent("on"+t,n)}function u(e,t){var n=Math.max(e.top,t.top),i=Math.min(e.bottom,t.bottom),r=Math.max(e.left,t.left),o=Math.min(e.right,t.right),a=o-r,s=i-n;return a>=0&&s>=0&&{top:n,bottom:i,left:r,right:o,width:a,height:s}}function l(e){var t;try{t=e.getBoundingClientRect()}catch(e){}return t?(t.width&&t.height||(t={top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.right-t.left,height:t.bottom-t.top}),t):{top:0,bottom:0,left:0,right:0,width:0,height:0}}function c(e,t){for(var n=t;n;){if(n==e)return!0;n=h(n)}return!1}function h(e){var t=e.parentNode;return t&&11==t.nodeType&&t.host?t.host:t}if(!("IntersectionObserver"in e&&"IntersectionObserverEntry"in e&&"intersectionRatio"in e.IntersectionObserverEntry.prototype)){var d=[];i.prototype.THROTTLE_TIMEOUT=100,i.prototype.POLL_INTERVAL=null,i.prototype.observe=function(e){if(!this._observationTargets.some(function(t){return t.element==e})){if(!e||1!=e.nodeType)throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:e,entry:null}),this._monitorIntersections()}},i.prototype.unobserve=function(e){this._observationTargets=this._observationTargets.filter(function(t){return t.element!=e}),this._observationTargets.length||(this._unmonitorIntersections(),this._unregisterInstance())},i.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorIntersections(),this._unregisterInstance()},i.prototype.takeRecords=function(){var e=this._queuedEntries.slice();return this._queuedEntries=[],e},i.prototype._initThresholds=function(e){var t=e||[0];return Array.isArray(t)||(t=[t]),t.sort().filter(function(e,t,n){if("number"!=typeof e||isNaN(e)||e<0||e>1)throw new Error("threshold must be a number between 0 and 1 inclusively");return e!==n[t-1]})},i.prototype._parseRootMargin=function(e){var t=(e||"0px").split(/\s+/).map(function(e){var t=/^(-?\d*\.?\d+)(px|%)$/.exec(e);if(!t)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(t[1]),unit:t[2]}});return t[1]=t[1]||t[0],t[2]=t[2]||t[0],t[3]=t[3]||t[1],t},i.prototype._monitorIntersections=function(){this._monitoringIntersections||(this._monitoringIntersections=!0,this._checkForIntersections(),this.POLL_INTERVAL?this._monitoringInterval=setInterval(this._checkForIntersections,this.POLL_INTERVAL):(a(e,"resize",this._checkForIntersections,!0),a(t,"scroll",this._checkForIntersections,!0),"MutationObserver"in e&&(this._domObserver=new MutationObserver(this._checkForIntersections),this._domObserver.observe(t,{attributes:!0,childList:!0,characterData:!0,subtree:!0}))))},i.prototype._unmonitorIntersections=function(){this._monitoringIntersections&&(this._monitoringIntersections=!1,clearInterval(this._monitoringInterval),this._monitoringInterval=null,s(e,"resize",this._checkForIntersections,!0),s(t,"scroll",this._checkForIntersections,!0),this._domObserver&&(this._domObserver.disconnect(),this._domObserver=null))},i.prototype._checkForIntersections=function(){var e=this._rootIsInDom(),t=e?this._getRootRect():{top:0,bottom:0,left:0,right:0,width:0,height:0};this._observationTargets.forEach(function(i){var o=i.element,a=l(o),s=this._rootContainsTarget(o),u=i.entry,c=e&&s&&this._computeTargetAndRootIntersection(o,t),h=i.entry=new n({time:r(),target:o,boundingClientRect:a,rootBounds:t,intersectionRect:c});u?e&&s?this._hasCrossedThreshold(u,h)&&this._queuedEntries.push(h):u&&u.isIntersecting&&this._queuedEntries.push(h):this._queuedEntries.push(h)},this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)},i.prototype._computeTargetAndRootIntersection=function(n,i){if("none"!=e.getComputedStyle(n).display){for(var r=l(n),o=h(n),a=!1;!a;){var s=null,c=1==o.nodeType?e.getComputedStyle(o):{};if("none"==c.display)return;if(o==this.root||o==t?(a=!0,s=i):o!=t.body&&o!=t.documentElement&&"visible"!=c.overflow&&(s=l(o)),s&&!(r=u(s,r)))break;o=h(o)}return r}},i.prototype._getRootRect=function(){var e;if(this.root)e=l(this.root);else{var n=t.documentElement,i=t.body;e={top:0,left:0,right:n.clientWidth||i.clientWidth,width:n.clientWidth||i.clientWidth,bottom:n.clientHeight||i.clientHeight,height:n.clientHeight||i.clientHeight}}return this._expandRectByRootMargin(e)},i.prototype._expandRectByRootMargin=function(e){var t=this._rootMarginValues.map(function(t,n){return"px"==t.unit?t.value:t.value*(n%2?e.width:e.height)/100}),n={top:e.top-t[0],right:e.right+t[1],bottom:e.bottom+t[2],left:e.left-t[3]};return n.width=n.right-n.left,n.height=n.bottom-n.top,n},i.prototype._hasCrossedThreshold=function(e,t){var n=e&&e.isIntersecting?e.intersectionRatio||0:-1,i=t.isIntersecting?t.intersectionRatio||0:-1;if(n!==i)for(var r=0;r<this.thresholds.length;r++){var o=this.thresholds[r];if(o==n||o==i||o<n!=o<i)return!0}},i.prototype._rootIsInDom=function(){return!this.root||c(t,this.root)},i.prototype._rootContainsTarget=function(e){return c(this.root||t,e)},i.prototype._registerInstance=function(){d.indexOf(this)<0&&d.push(this)},i.prototype._unregisterInstance=function(){var e=d.indexOf(this);-1!=e&&d.splice(e,1)},e.IntersectionObserver=i,e.IntersectionObserverEntry=n}}(window,document)},{}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.getDetails=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{viewportWidth:Math.max(document.body.clientWidth,window.innerWidth)||-1,viewportHeight:Math.max(document.body.clientHeight,window.innerHeight)||-1,elementWidth:e.clientWidth||-1,elementHeight:e.clientHeight||-1,iframeContext:r(),focus:i()}};var i=n.isInFocus=function(){return("undefined"===document.hidden||!0!==document.hidden)&&(r()===o.CROSS_DOMAIN_IFRAME||(!window.document.hasFocus||window.top.document.hasFocus()))},r=n.iFrameContext=function(){try{if(window.top===window)return o.ON_PAGE;for(var e=window;e.parent!==e;){if(e.parent.document.domain!==e.document.domain)return o.CROSS_DOMAIN_IFRAME;e=e.parent}o.SAME_DOMAIN_IFRAME}catch(e){return o.CROSS_DOMAIN_IFRAME}},o=n.iFrameServingScenarios={ON_PAGE:"on page",SAME_DOMAIN_IFRAME:"same domain iframe",CROSS_DOMAIN_IFRAME:"cross domain iframe"}},{}],4:[function(e,t,n){"use strict";e("array-find")},{"array-find":1}],5:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.validateStrategy=n.validateCriteria=n.validElement=n.validTechnique=void 0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(e){return e&&e.__esModule?e:{default:e}}(e("../Measurement/MeasurementTechniques/BaseTechnique")),o=(n.validTechnique=function(e){return"function"==typeof e&&Object.getOwnPropertyNames(r.default).reduce(function(t,n){return n&&i(e[t])===i(r.default[t])},!0)},n.validElement=function(e){return e&&e.toString().indexOf("Element")>-1},n.validateCriteria=function(e){var t=e.inViewThreshold,n=e.timeInView,i=!1,r=[];return("number"!=typeof t||t>1)&&(i=!0,r.push("inViewThreshold must be a number equal to or less than 1")),("number"!=typeof n||n<0)&&(i=!0,r.push("timeInView must be a number greater to or equal 0")),{invalid:i,reasons:r.join(" | ")}});n.validateStrategy=function(e){var t=e.autostart,n=e.techniques,i=e.criteria,r=!1,a=[];"boolean"!=typeof t&&(r=!0,a.push("autostart must be boolean")),Array.isArray(n)&&0!==n.length||(r=!0,a.push("techniques must be an array containing atleast on measurement techniques"));var s=o(i);return s.invalid&&(r=!0,a.push(s.reasons)),{invalid:r,reasons:a.join(" | ")}}},{"../Measurement/MeasurementTechniques/BaseTechnique":8}],6:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.START="start",n.STOP="stop",n.CHANGE="change",n.COMPLETE="complete",n.UNMEASUREABLE="unmeasureable",n.INVIEW="inview",n.OUTVIEW="outview"},{}],7:[function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function(e){return e&&e.__esModule?e:{default:e}}(e("../Timing/InViewTimer")),u=e("./Strategies/"),l=e("../Helpers/Validators"),c=i(e("../Environment/Environment")),h=i(e("./Events")),d=function(){function e(t){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,e),this._listeners={start:[],stop:[],change:[],complete:[],unmeasureable:[]},this._element=t,this._strategy=o({},u.DEFAULT_STRATEGY,i),this._criteriaMet=!1;var a=(0,l.validateStrategy)(this._strategy);if(a.invalid)throw a.reasons;this._technique=this._selectTechnique(this._strategy.techniques),this._technique&&this._addSubscriptions(this._technique),this.unmeasureable?setTimeout(function(){return n._publish(h.UNMEASUREABLE,c.getDetails(n._element))},0):this._strategy.autostart&&this._technique.start()}return a(e,[{key:"start",value:function(){this._technique.start()}},{key:"dispose",value:function(){this._technique&&this._technique.dispose(),this.timer&&this.timer.dispose()}},{key:"onViewableStart",value:function(e){return this._addCallback(e,h.START)}},{key:"onViewableStop",value:function(e){return this._addCallback(e,h.STOP)}},{key:"onViewableChange",value:function(e){return this._addCallback(e,h.CHANGE)}},{key:"onViewableComplete",value:function(e){return this._addCallback(e,h.COMPLETE),this.criteriaMet&&this._techniqueChange(h.COMPLETE,this._technique),this}},{key:"onUnmeasureable",value:function(e){return this._addCallback(e,h.UNMEASUREABLE),this.unmeasureable&&this._techniqueChange(h.UNMEASUREABLE),this}},{key:"_selectTechnique",value:function(e){return e.filter(l.validTechnique).map(this._instantiateTechnique.bind(this)).find(function(e){return!e.unmeasureable})}},{key:"_instantiateTechnique",value:function(e){return new e(this._element,this._strategy.criteria)}},{key:"_addSubscriptions",value:function(e){e&&(e.onInView(this._techniqueChange.bind(this,h.INVIEW,e)),e.onChangeView(this._techniqueChange.bind(this,h.CHANGE,e)),e.onOutView(this._techniqueChange.bind(this,h.OUTVIEW,e)))}},{key:"_techniqueChange",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=void 0,i=this._appendEnvironment(t);switch(e){case h.INVIEW:this._criteriaMet||(this.timer=new s.default(this._strategy.criteria.timeInView),this.timer.elapsed(this._timerElapsed.bind(this,t)),this.timer.start(),n=h.START);break;case h.CHANGE:n=e;break;case h.COMPLETE:this._criteriaMet||(this._criteriaMet=!0,n=e);break;case h.OUTVIEW:this._criteriaMet||(this.timer&&(this.timer.stop(),delete this.timer),n=h.STOP);break;case h.UNMEASUREABLE:n=h.UNMEASUREABLE}n&&this._publish(n,i)}},{key:"_publish",value:function(e,t){Array.isArray(this._listeners[e])&&this._listeners[e].forEach(function(e){return e(t)})}},{key:"_timerElapsed",value:function(e){this._techniqueChange(h.COMPLETE,e)}},{key:"_addCallback",value:function(e,t){if(this._listeners[t]&&"function"==typeof e)this._listeners[t].push(e);else if("function"!=typeof e)throw"Callback must be a function";return this}},{key:"_appendEnvironment",value:function(e){return o({},{percentViewable:void 0===e.percentViewable?-1:e.percentViewable,technique:e.techniqueName||-1,viewable:void 0===e.viewable?-1:e.viewable},c.getDetails(this._element))}},{key:"unmeasureable",get:function(){return!this._technique||this._technique.unmeasureable}}]),e}();n.default=d,t.exports=n.default},{"../Environment/Environment":3,"../Helpers/Validators":5,"../Timing/InViewTimer":15,"./Events":6,"./Strategies/":12}],8:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){function e(){i(this,e),this.listeners={inView:[],outView:[],changeView:[]},this.percentViewable=0}return r(e,[{key:"onInView",value:function(e){return this.addCallback(e,"inView")}},{key:"onChangeView",value:function(e){return this.addCallback(e,"changeView")}},{key:"onOutView",value:function(e){return this.addCallback(e,"outView")}},{key:"addCallback",value:function(e,t){if("function"==typeof e&&this.listeners[t])this.listeners[t].push(e);else if("function"!=typeof e)throw"callback must be function";return this}},{key:"start",value:function(){}},{key:"dispose",value:function(){}},{key:"unmeasureable",get:function(){return!1}},{key:"viewable",get:function(){return!1}},{key:"techniqueName",get:function(){return"BaseTechnique"}}]),e}();n.default=o,t.exports=n.default},{}],9:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function(e){return e&&e.__esModule?e:{default:e}}(e("./BaseTechnique")),u=e("../../Helpers/Validators"),l=e("../Strategies/"),c=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.DEFAULT_STRATEGY.criteria;i(this,t);var o=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));if(void 0!==n&&e)o.element=e,o.criteria=n,o.inView=!1,o.started=!1,o.notificationLevels=[0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1],-1===o.notificationLevels.indexOf(o.criteria.inViewThreshold)&&o.notificationLevels.push(o.criteria.inViewThreshold);else if(!e)throw"element not provided";return o}return o(t,s.default),a(t,[{key:"start",value:function(){this.observer=new window.IntersectionObserver(this.viewableChange.bind(this),{threshold:this.notificationLevels}),this.observer.observe(this.element)}},{key:"dispose",value:function(){this.observer&&(this.observer.unobserve(element),this.observer.disconnect(element))}},{key:"viewableChange",value:function(e){e&&e.length&&void 0!==e[0].intersectionRatio&&(this.percentViewable=e[0].intersectionRatio,e[0].intersectionRatio<this.criteria.inViewThreshold&&this.started&&this.inView&&(this.inView=!1,this.listeners.outView.forEach(function(e){return e()})),e[0].intersectionRatio>=this.criteria.inViewThreshold&&!this.inView&&(this.started=!0,this.inView=!0,this.listeners.inView.forEach(function(e){return e()})),this.listeners.changeView.forEach(function(e){return e()}))}},{key:"unmeasureable",get:function(){return!window.IntersectionObserver||this.usesPolyfill||!(0,u.validElement)(this.element)}},{key:"viewable",get:function(){return this.inView}},{key:"techniqueName",get:function(){return"IntersectionObserver"}},{key:"usesPolyfill",get:function(){return"number"==typeof window.IntersectionObserver.prototype.THROTTLE_TIMEOUT}}]),t}();n.default=c,t.exports=n.default},{"../../Helpers/Validators":5,"../Strategies/":12,"./BaseTechnique":8}],10:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=i(e("./IntersectionObserver")),l=(i(e("intersection-observer")),function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../../Environment/Environment"))),c=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,u.default),s(t,[{key:"unmeasureable",get:function(){return l.iFrameContext()===l.iFrameServingScenarios.CROSS_DOMAIN_IFRAME}},{key:"techniqueName",get:function(){return"IntersectionObserverPolyFill"}}]),t}();n.default=c,t.exports=n.default},{"../../Environment/Environment":3,"./IntersectionObserver":9,"intersection-observer":2}],11:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=e("./IntersectionObserver");Object.defineProperty(n,"IntersectionObserver",{enumerable:!0,get:function(){return i(r).default}});var o=e("./IntersectionObserverPolyfill");Object.defineProperty(n,"IntersectionObserverPolyfill",{enumerable:!0,get:function(){return i(o).default}});var a=e("./BaseTechnique");Object.defineProperty(n,"BaseTechnique",{enumerable:!0,get:function(){return i(a).default}})},{"./BaseTechnique":8,"./IntersectionObserver":9,"./IntersectionObserverPolyfill":10}],12:[function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(n,"__esModule",{value:!0}),n.StrategyFactory=n.DEFAULT_STRATEGY=void 0;var r=i(e("../../Helpers/Validators")),o=i(e("../MeasurementTechniques/")),a=i(e("../../Options/ViewabilityCriteria")),s=n.DEFAULT_STRATEGY={autostart:!0,techniques:[o.IntersectionObserver,o.IntersectionObserverPolyfill],criteria:a.MRC_VIDEO};n.StrategyFactory=function(){var e={autostart:arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.autostart,techniques:arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.techniques,criteria:arguments.length>2&&void 0!==arguments[2]?arguments[2]:s.criteria},t=r.validateStrategy(e);if(t.invalid)throw t.reasons;return e}},{"../../Helpers/Validators":5,"../../Options/ViewabilityCriteria":14,"../MeasurementTechniques/":11}],13:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();e("./Helpers/Polyfills.js");var s=r(e("./Measurement/Events")),u=i(e("./Timing/InViewTimer")),l=r(e("./Measurement/Strategies/")),c=(r(e("./Environment/Environment")),i(e("./Measurement/MeasurementExecutor"))),h=r(e("./Options/ViewabilityCriteria")),d=r(e("./Measurement/MeasurementTechniques/")),f=function(){function e(){o(this,e),this.executors=[]}return a(e,[{key:"measureElement",value:function(e,t){var n=new c.default(e,t);return this.executors.push(n),n}},{key:"dispose",value:function(){this.executors.forEach(function(e){return e.dispose()})}}]),e}();n.default=f,f.ViewabilityCriteria=h,f.MeasurementExecutor=c.default,f.MeasurementTechniques=d,f.InViewTimer=u.default,f.Strategies=l,f.Events=s,t.exports=n.default},{"./Environment/Environment":3,"./Helpers/Polyfills.js":4,"./Measurement/Events":6,"./Measurement/MeasurementExecutor":7,"./Measurement/MeasurementTechniques/":11,"./Measurement/Strategies/":12,"./Options/ViewabilityCriteria":14,"./Timing/InViewTimer":15}],14:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.MRC_VIDEO={inViewThreshold:.5,timeInView:2e3},n.MRC_DISPLAY={inViewThreshold:.5,timeInView:1e3},n.customCriteria=function(){return{inViewThreshold:arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,timeInView:arguments.length>1&&void 0!==arguments[1]?arguments[1]:2e3}}},{}],15:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){function e(t){i(this,e),this.duration=t,this.listeners=[],this.completed=!1}return r(e,[{key:"timerComplete",value:function(){this.completed=!0,this.listeners.forEach(function(e){return e()})}},{key:"elapsed",value:function(e){"function"==typeof e&&this.listeners.push(e)}},{key:"start",value:function(){this.endTimer(),this.timer=setTimeout(this.timerComplete.bind(this),this.duration)}},{key:"stop",value:function(){this.endTimer()}},{key:"endTimer",value:function(){this.timer&&(clearTimeout(this.timer),this.listeners.length=0)}},{key:"dispose",value:function(){this.endTimer()}}]),e}();n.default=o,t.exports=n.default},{}]},{},[13])(13)}),function(){var e=void 0;this.vcReact=this.vcReact?this.vcReact:this.React,function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(require("playercore"),require("OpenVV")):"function"==typeof e&&e.amd?e(["playercore","OpenVV"],n):n(t.audioSwitchVoicePlayerCore,t.OpenVV)}(this,function(e,t){"use strict";function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;e=e<0?0:e;var n=Math.floor(e%60),i=Math.floor(e/60%60),r=Math.floor(e/3600),o=Math.floor(t/60%60);return(isNaN(e)||e===1/0)&&(r=i=n="-"),r=(r<10?"0"+r:r)+":",i=((r||o>=10)&&i<10?"0"+i:i)+":",n=n<10?"0"+n:n,r+i+n}function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location.href;e=e.replace(/[[\]]/g,"\\$&");var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function w(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var E="default"in e?e.default:e;t=t&&t.hasOwnProperty("default")?t.default:t;var T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k=function e(t,n){var i,r=[];for(i in t)if(t.hasOwnProperty(i)){var o=n?n+"["+i+"]":i,a=t[i];r.push(null!==a&&"object"===(void 0===a?"undefined":T(a))?e(a,o):encodeURIComponent(o)+"="+encodeURIComponent(a))}return r.join("&")},A=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})},P=function(e){var t=-1;return e.options().scriptinfo&&(t=e.options().scriptinfo.playerId),t},O={"afamily.vn":1,"autopro.com.vn":2,"cafef.vn":3,"dantri.com.vn":4,"gamek.vn":5,"genk.vn":6,"kenh14.vn":7,"soha.vn":8,"giadinh.net.vn":9,"nld.com.vn":10,"lazada.vn":11,"bds.rongbay.com":12,"muachung.vn":13,"6giosang.com":14,"m.dantri.com.vn":16,"cafebiz.vn":17,"m.kenh14.vn":18,"vccloud.vn":19,"m.soha.vn":20,"m.gamek.vn":21,"m.genk.vn":22,"m.autopro.com.vn":23,"m.afamily.vn":24,"m.cafebiz.vn":25,"m.cafef.vn":26,"m.giadinh.net.vn":27,"vneconomy.vn":28,"m.vneconomy.vn":29,"analytics.admicro.vn":30,"m.nld.com.vn":31,"nguyenkim.com":32,"publisher-website":35,vc:36,"suckhoedoisong.vn":38,"muare.vn":39,"tratu.soha.vn":40,"socnhi.com":41,"enbac.com":42,"ttvnol.com":43,"linkhay.com":44,"f319.com":45,"vtv.vn":46,"rongbay.com":47,"rongbay.vn":48,"m.vtv.vn":49,"m.linkhay.com":50,"m.enbac.com":51,"plaza.muachung.vn":52,"all.enbac.com":53,"oto.enbac.com":54,"waf.afamily.vn":55,"vntm.kenh14.vn":56,"herewego.kenh14.vn":59,"laodong.com.vn":60,"m.laodong.com.vn":61,"thanhnien.vn":62,"tuoitre.vn":63,"nemo.vn":64,"marketingit.admicro.vn":65,"nextgen.kenh14.vn":66,"quizz.kenh14.vn":67,"phimchat.net":69,"sannhac.com":70,"wechoice.vn":71,"card.sacombank.com.vn":73,"admicro1-3.thanhnien.vn":77,"thanhnien-other.thanhnien.vn":78,"eva.vn":79,"m.eva.vn":80,"m.thanhnien.vn":81,"thethao.thanhnien.vn":82},S={load:1,play:2,replay:3,pause:4,resume:5,fullscreen:6,normalscreen:7,firstQuartile:8,midpoint:9,thirdQuartile:10,endedcontent:11,complete:11,changeQuality:12,poll:14,close:15,user_change_quality:16,auto_change_quality:17,current_resolution_change:18,error:20,waiting:21,adstart:22,"bit-receive":23,timetostart:24,adpoll:25,pausedAd:26,adviewable:30},R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},I=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),V=E.getComponent("Player"),M=e.playerconfig.DEFAULT,C={preroll:1,midroll:2,postroll:3,interactive:4},D=0,N=function(t){function i(e){r(this,i);var t=o(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e));t.isTabActive=!0;var n=t.props.player,a=t;t.trackStats=t.trackStats.bind(t),t.getStats=t.getStats.bind(t),t._handePollAdStart=t._handePollAdStart.bind(t),t._handePollAdPlay=t._handePollAdPlay.bind(t),t._handlePollAdEnded=t._handlePollAdEnded.bind(t),t._handePauseAd=t._handePauseAd.bind(t),t.isActive=t.isActive.bind(t),t._handleTrackQuartile=t._handleTrackQuartile.bind(t),V.prototype.AdsPlayerPlugin?n.on(M.EVENT.AD_START,t._handePollAdStart):(n.on(M.EVENT.VPAID_AD_START,t._handePollAdStart),n.on(M.EVENT.VAST_AD_START,t._handePollAdStart)),n.one(M.EVENT.AD_PAUSE_AD,t._handePauseAd),n.on(M.EVENT.AD_RESUME_AD,function(){n.one(M.EVENT.AD_PAUSE_AD,a._handePauseAd)}),n.on("EventTrackingAds",t._handleTrackQuartile),n.on(M.EVENT.AD_PLAY,t._handePollAdPlay),n.on(M.EVENT.AD_END,t._handlePollAdEnded),window.addEventListener?window.addEventListener("message",function(e){a.handleMessage(e)},!1):window.attachEvent&&window.attachEvent("onmessage",function(e){a.handleMessage(e)});try{window.parent.addEventListener("focus",t.isActive)}catch(e){a.isTabActive=!1}try{window.parent.addEventListener("blur",t.isActive)}catch(e){a.isTabActive=!1}return n.on("disposeAds",t._handlePollAdEnded),t}return a(i,e.Plugin),I(i,[{key:"_handleTrackQuartile",value:function(e,t){var n=this.props.track,i=this.props.player,r=Math.ceil(100*i.volume()),o=this.state,a=o.adDuration,s=o.remainingTime,u=o.bid,l=o.atype,c=o.avdu,h=o.aview,d=o.apaused,f=o.cam;if(i.muted()&&(r=0),a&&!d){var p="-1";s&&a>=s&&(p=(p=a-s).toFixed(1)),n({advolume:r,avdu:c||"-1",bid:u,cam:f,atype:l,actime:p,aview:h,aidx:D,evt:S[t]})}}},{key:"isActive",value:function(e){"focus"===e.type?this.isTabActive=!0:"blur"===e.type&&(this.isTabActive=!1)}},{key:"handleMessage",value:function(e){var t=e[e.message?"message":"data"];"object"===(void 0===t?"undefined":R(t))&&t.aview&&this._setAview(t.aview/100)}},{key:"_handePollAdStart",value:function(){++D;var e=this.props.player;this.pausedAd_=!1,this.trackStatsInterval_=e.setInterval(this.trackStats,this.props.trackInterval),this.getStatsInterval_=e.setInterval(this.getStats,this.props.statsInterval)}},{key:"_handePollAdPlay",value:function(e,t){var n=this.props.player;if(t&&t.ads&&0!==t.ads.length){var i=n.vastAd.adPosition(),r=t.ads[0].id,o="-1";t.campains.length>0&&(o=t.campains[0]?t.campains[0]:"-1");var a="-1";i&&(a=C[i]),this.setState({bid:r,atype:a,cam:o})}}},{key:"_handePauseAd",value:function(){var e=this.props.track,t=this.state,n=t.adDuration,i=t.remainingTime,r=t.bid,o=t.atype,a=t.avdu,s=t.aview,u="-1";i&&n>=i&&(u=(u=n-i).toFixed(1)),e({avdu:a||"-1",bid:r,atype:o,actime:u,aview:s,aidx:D,evt:S.pausedAd})}},{key:"_handlePollAdEnded",value:function(){var e=this.props.player;e.clearInterval(this.trackStatsInterval_),e.clearInterval(this.getStatsInterval_),this.state={}}},{key:"getStats",value:function(){var t=this,i=this.props.player,r=this.state.adDuration,o=i.vastAd.adUnit(),a=!1;try{a=i.vastAd.paused(),this.setState({apaused:a?1:0})}catch(e){}r||o.getAdDuration().then(function(e){t.setState({adDuration:e,avdu:n(e)})}),o.getAdRemainingTime().then(function(e){t.setState({remainingTime:e})});try{var s=i.el_.getBoundingClientRect(),u=1,l=!1;try{window.top!==window.self&&(l=!0)}catch(e){l=!0}try{if(l&&window.admid)u=window.top.getViewablePercentOfEle(window.admid)/100;else if(l&&window.frameElement.id){var c=window.top.document.getElementById(window.frameElement.id).getBoundingClientRect();c.top<0?u=c.height+c.top>0?(c.height+c.top)/c.height:0:c.top+c.height>window.screen.height&&(u=c.top<window.screen.height?(window.screen.height-c.top)/c.height:0)}else s.top<0?u=s.height+s.top>0?(s.height+s.top)/s.height:0:s.top+s.height>window.screen.height&&(u=s.top<window.screen.height?(window.screen.height-s.top)/s.height:0)}catch(e){var h=new URLSearchParams(window.location.search).get("admid");window.top.postMessage("aview_"+h,"*"),window.parent.removeEventListener("focus",this.isActive),window.parent.removeEventListener("blur",this.isActive)}this.isTabActive||e.agent.isMobile||(u=-1),this._setAview(u)}catch(e){}}},{key:"_setAview",value:function(e){e=e.toFixed(2),this.setState({aview:e})}},{key:"trackStats",value:function(){var e=this.props.track,t=this.props.player,n=Math.ceil(100*t.volume()),i=this.state,r=i.adDuration,o=i.remainingTime,a=i.bid,s=i.atype,u=i.avdu,l=i.aview,c=i.apaused,h=i.cam;if(t.muted()&&(n=0),r&&!c){var d="-1";o&&r>=o&&(d=(d=r-o).toFixed(1)),e({advolume:n,avdu:u||"-1",bid:a,cam:h,atype:s,actime:d,aview:l,aidx:D,evt:S.adpoll})}}}]),i}();N.defaultProps={trackInterval:1e3,statsInterval:200};var x=function(e,t){new N({player:e,track:t})},j=function(e,t){var n=e.options().scriptinfo,i="-1",r="-1";if(n){var o=n.plugins;if(i=n.core.version,o&&0!==o.length){var a=[];o.forEach(function(e){var t=e.name,n=e.version;a.push(t+":"+n)}),r=a.join(";")}}t({pvs:i,pplvs:r,evt:S.load})},L=function(e,t){e.one("play",function(){t({evt:S.play})})},U=e.playerconfig.DEFAULT,F=function(e,t){function n(){e.vastAd||i()}function i(){e.off("play",n),t({evt:S.replay})}e.on(U.EVENT.PLAYER_ENDED_CONTEND,function(){e.off("play",n),e.on("play",n)})},q=e.playerconfig.DEFAULT,B=function(e,t){e.on(q.EVENT.USER_PAUSE,function(){t({evt:S.pause})})},H=e.playerconfig.DEFAULT,W=function(e,t){e.on(H.EVENT.USER_RESUME,function(){t({evt:S.resume})})},Y=function(e,t){window.onbeforeunload=function(){var n=e.currentTime();t({evt:S.close,lvt:n})}},Q=function(e,t){e.on("fullscreenchange",function(){var n="fullscreen";e.isFullscreen()||(n="normalscreen"),t({evt:S[n]})})},G=function(e,t){function n(e,t){var n=e.time;return t>=n&&t<=n+5e3}function i(e,i){var r=o[e];r.tracked||n(r,i)&&(r.tracked=!0,t({evt:S[e]}))}function r(){if(o){var t=1e3*e.currentTime(),n=o,r=n.firstQuartile,a=n.midpoint,s=n.thirdQuartile;r.tracked||i("firstQuartile",t),a.tracked||i("midpoint",t),s.tracked||i("thirdQuartile",t)}}e.one("loadedmetadata",function(){var t=e.duration();o={firstQuartile:{tracked:!1,time:Math.round(25*t*1e3)/100},midpoint:{tracked:!1,time:Math.round(50*t*1e3)/100},thirdQuartile:{tracked:!1,time:Math.round(75*t*1e3)/100}}}),e.one("play",function(){e.on("timeupdate",r)});var o=void 0},z=e.playerconfig.DEFAULT,$=function(e,t){e.one(z.EVENT.PLAYER_ENDED_CONTEND,function(){t({evt:S.endedcontent})})},K=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),X=e.playerconfig.DEFAULT,J={preroll:1,midroll:2,postroll:3,interactive:4},Z=function(n){function i(e){s(this,i);var t=u(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e)),n=t.props.player;return t._handleAdStart=t._handleAdStart.bind(t),t._handleAdPlay=t._handleAdPlay.bind(t),n.on(X.EVENT.VAST_AD_START,t._handleAdStart),n.on(X.EVENT.VPAID_AD_IMPRESSION,t._handleAdStart),n.on(X.EVENT.AD_PLAY,t._handleAdPlay),t}return l(i,e.Plugin),K(i,[{key:"_handleAdPlay",value:function(e,t){var n=this.props.player;if(t&&t.ads&&0!==t.ads.length){var i=n.vastAd.adPosition(),r=t.ads[0].id,o="-1";t.campains.length>0&&(o=t.campains[0]?t.campains[0]:"-1");var a="-1";i&&(a=J[i]),this.setState({bid:r,atype:a,cam:o})}}},{key:"_handleAdStart",value:function(){var e=this.props,n=e.player,i=e.track,r=this,o=document.getElementById(""+n.id_),a=new t,s=[t.MeasurementTechniques.IntersectionObserver],u={inViewThreshold:.5,timeInView:5e3},l=t.Strategies.StrategyFactory(!0,s,u);a.measureElement(o,l).onViewableStart(function(){}).onViewableComplete(function(){var e=r.state,t=e.bid,o=e.atype,a=e.cam,s=Math.ceil(100*n.volume());n.muted()&&(s=0),i({advolume:s,bid:t,cam:a,atype:o,evt:S.adviewable})})}}]),i}();Z.defaultProps={trackInterval:1e3,statsInterval:200};var ee=function(e,t){new Z({player:e,track:t})},te=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),ne=e.playerconfig.DEFAULT,ie={0:0,144:1,240:2,360:3,480:4,720:5,1080:6},re=0,oe=function(t){function n(e){c(this,n);var t=h(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e)),i=t.props.player;t._handePollAdStart=t._handePollAdStart.bind(t),t._handlePollAdEnded=t._handlePollAdEnded.bind(t),t._handleTimeUpdate=t._handleTimeUpdate.bind(t),t.startPoll=t.startPoll.bind(t),t.stopPoll=t.stopPoll.bind(t),t._updatePoll=t._updatePoll.bind(t),i.on("play",t.startPoll),i.on("pause",t.stopPoll),i.on("ended",t.stopPoll),i.on("timeupdate",t._handleTimeUpdate),i.on(ne.EVENT.AD_START,t._handePollAdStart),i.on(ne.EVENT.AD_END,t._handlePollAdEnded);var r=t;return i.on("hlsTechInit",function(e,t){var n=void 0,o=0;t.on("hlsLevelLoaded",function(e,t){t.networkDetails.response.endsWith("EXT-X-ENDLIST")&&r.pollInterval&&r.stopPoll(),o&&n!=i.currentTime()&&(r.startPoll(),o=0)}),t.on("hlsError",function(e,t){"bufferStalledError"==t.details&&(n=i.currentTime(),o=1,r.stopPoll())})}),t}return d(n,e.Plugin),te(n,[{key:"_handePollAdStart",value:function(){var e=this.props.player;e.off("play",this.startPoll),e.off("timeupdate",this._handleTimeUpdate),this.stopPoll()}},{key:"_handlePollAdEnded",value:function(){var e=this.props.player;e.on("timeupdate",this._handleTimeUpdate),e.on("play",this.startPoll)}},{key:"_handleTimeUpdate",value:function(){var e=this.props.player,t=void 0;try{t=e.tech_.el_.videoHeight}catch(e){return}this.state.last_video_height!==t&&this.setState({last_video_height:t})}},{key:"startPoll",value:function(){this.pollInterval&&this.stopPoll(),this.pollInterval=setInterval(this._updatePoll,this.props.pollInterval)}},{key:"stopPoll",value:function(){this.pollInterval&&(clearInterval(this.pollInterval),this.pollInterval=null)}},{key:"dispose",value:function(){var e=this.props.player;this.stopPoll(),e.off("play",this.startPoll),e.off("pause",this.stopPoll),e.off("ended",this.stopPoll),e.off("timeupdate",this._handleTimeUpdate),e.off(ne.EVENT.AD_START,this._handePollAdStart),e.off(ne.EVENT.AD_END,this._handlePollAdEnded)}},{key:"_updatePoll",value:function(){var e=this.props,t=e.track,n=e.player,i=this.currentQuality(),r=ie[i],o=0,a=0;try{var s=n.buffered(),u=n.currentTime();o=(o=s.end(s.length-1)-u)>=0?Math.floor(o):0}catch(e){}try{a=n.tech_.el_.webkitDroppedFrameCount?n.tech_.el_.webkitDroppedFrameCount:n.tech_.el_.getVideoPlaybackQuality().droppedVideoFrames}catch(e){}re>=parseInt(n.duration()/3)?this.dispose():(re++,t({evt:S.poll,cqua:r,bft:o,drf:a}))}},{key:"currentQuality",value:function(){var e=this.state.last_video_height;return e>=1080?1080:e>=720?720:e>=480?480:e>=360?360:e>=240?240:144}}]),n}();oe.defaultProps={pollInterval:6e3};var ae=function(e,t){new oe({player:e,track:t})},se=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),ue=e.playerconfig.DEFAULT,le=E.getComponent("Player"),ce={preroll:1,midroll:2,postroll:3,interactive:4},he=function(t){function n(e){f(this,n);var t=p(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e)),i=t.props.player;return t.aidx=0,t.trackStartAd=t.trackStartAd.bind(t),t._handleReplay=t._handleReplay.bind(t),le.prototype.AdsPlayerPlugin?i.on(ue.EVENT.AD_START,t.trackStartAd):(i.on(ue.EVENT.VPAID_AD_START,t.trackStartAd),i.on(ue.EVENT.VAST_AD_START,t.trackStartAd)),i.on(ue.EVENT.PLAYER_REPLAY_CONTEND,t._handleReplay),i.on(ue.EVENT.USER_REPLAY_CONTENT,t._handleReplay),t}return v(n,e.Plugin),se(n,[{key:"trackStartAd",value:function(){++this.aidx;var e=this.props,t=e.player,n=e.track,r=t.vastAd.vastResponse(),o=t.vastAd.adPosition(),a=r.ads[0].id,s=void 0,u=void 0,l="-1";r.campains.length>0&&(l=r.campains[0]?r.campains[0]:"-1");var c="-1";o&&(c=ce[o]);var h=t.vastAd.props,d=h.adTagUrl;if(h.adsITVC&&i("u",d)){var f=i("u",d).match(/(http[s]?:\/\/)?([^/\s]+)(\/.*)/);return s=f[2],u=f[3],void n({evt:S.adstart,bid:a,cam:l,atype:c,aidx:this.aidx,dmn:s,path:u})}n({evt:S.adstart,bid:a,cam:l,atype:c,aidx:this.aidx})}},{key:"_handleReplay",value:function(){this.aidx=0}}]),n}(),de=function(e,t){new he({player:e,track:t})},fe=e.playerconfig.DEFAULT,pe=function(e,t){function n(){if(a.length){for(var n=0,i=0,o=0,s=0,u=0,l=a.length;a.length;){var c=a.shift();n+=c.bitreceive,i+=c.roundTrip,o+=c.apb,s=c.tbf,u=c.trq}var h=n;i>1e3&&(h=1e3*h/i);var d=0,f=0;try{var p=e.buffered(),v=e.currentTime();d=(d=p.end(p.length-1)-v)>=0?Math.floor(d):0}catch(e){}try{f=e.tech_.el_.webkitDroppedFrameCount?e.tech_.el_.webkitDroppedFrameCount:e.tech_.el_.getVideoPlaybackQuality().droppedVideoFrames}catch(e){}var y=f-r;r=f,t({bft:d,nbf:l,size:Math.ceil(n/8),tbf:s,trq:u,drf:y,apb:Math.round(o),evt:S["bit-receive"],bw:Math.round(h)})}}function i(e,t){var i=t.data,r=i.stats,o=i.frag,s=8*r.total,u=r.tbuffered-r.trequest;a.push({bitreceive:s,roundTrip:u,tbf:Math.ceil(r.tbuffered),trq:Math.ceil(r.trequest),apb:o.duration}),n()}var r=0;e.on("loadedmetadata",function(){o&&o.off(fe.EVENT.HLS_FRAG_BUFFERED,i),(o=e.tech_).on(fe.EVENT.HLS_FRAG_BUFFERED,i)});var o=void 0,a=[]},ve=function(e,t){var n=void 0,i=void 0;e.one("play",function(){n=Date.now()}),e.one("playing",function(){i=Date.now();var e=0;n&&i&&(e=(e=i-n)>=0?e:0),t({tts:e,evt:S.timetostart})})},ye=e.playerconfig.DEFAULT,me=function(e,t){e.on(ye.EVENT.PLAYER_ERROR,function(e,n){var i="-1";switch(n.code){case ye.ERROR.ERROR_100.code:i=1;break;default:i=n.code}t({evt:S.error,err:i})}),e.one("play",function(){e.setTimeout(function(){var n=e.currentTime();e.paused()||0!==n||t({evt:S.error,err:2})},1e4)})},_e=function(e,t){e.on("waiting",function(){var n=e.currentTime().toFixed(1);t({ctime:n,evt:S.waiting})})},be=e.playerconfig.DEFAULT,ge=function(e,t){function n(e,t){t({vlm:e})}var i,r;e.on("ready",function(){i=Math.ceil(100*e.volume()),e.muted()&&(i=0)}),e.on(be.EVENT.USER_CHANGE_MUTE,function(o,a){i=Math.ceil(100*e.volume()),a?(r=i+":0",i=0):r="0:"+i,n(r,t)}),e.on(be.EVENT.TRACKING_VOLUME,function(e,o){i!==o?(r=i+":"+o,i=o,n(r,t)):i=o})},we=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),Ee=e.playerconfig.DEFAULT,Te=function(t){function n(e){y(this,n);var t=m(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));t.state={last_currentTime:0};var i=t.props.player;return t.pdu=0,t._handeAdStart=t._handeAdStart.bind(t),t._handleRestorePlayback=t._handleRestorePlayback.bind(t),t.handleCalculatePdu=t.handleCalculatePdu.bind(t),t.handleUpdateFlagPdu=t.handleUpdateFlagPdu.bind(t),t._handleReplay=t._handleReplay.bind(t),i.on("timeupdate",t.handleCalculatePdu),i.on("seeking",t.handleUpdateFlagPdu),i.on(Ee.EVENT.AD_START,t._handeAdStart),i.on(Ee.EVENT.AD_RESTORED_PLAYBACK,t._handleRestorePlayback),i.on(Ee.EVENT.PLAYER_REPLAY_CONTEND,t._handleReplay),i.on(Ee.EVENT.USER_REPLAY_CONTENT,t._handleReplay),t}return _(n,e.Plugin),we(n,[{key:"_handleReplay",value:function(){this.pdu=0,this.setState({last_currentTime:0})}},{key:"_handeAdStart",value:function(){var e=this.props.player;e.off("timeupdate",this.handleCalculatePdu),e.off("seeking",this.handleUpdateFlagPdu)}},{key:"_handleRestorePlayback",value:function(){var e=this.props.player;e.on("timeupdate",this.handleCalculatePdu),e.on("seeking",this.handleUpdateFlagPdu)}},{key:"handleCalculatePdu",value:function(){var e=this.props.player,t=this.state.last_currentTime,n=e.currentTime();if(this.setState({last_currentTime:n}),n<=t)this.setState({last_currentTime:n});else{var i=n-t;i>2||(this.pdu+=i,this.updatePDU())}}},{key:"handleUpdateFlagPdu",value:function(){var e=this,t=this.props.player;t.off("timeupdate",this.handleCalculatePdu),t.one("seeked",function(){var n=t.currentTime();e.setState({last_currentTime:n}),t.on("timeupdate",e.handleCalculatePdu)})}},{key:"updatePDU",value:function(){this.props.updatePDU(Math.round(this.pdu))}}]),n}(),ke=function(e,t){new Te({player:e,updatePDU:t})},Ae=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Pe=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),Oe=e.playerconfig.DEFAULT,Se=function(t){function r(e){b(this,r);var t=g(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));t.waitTrack=[];var n=t,o=t.props,a=o.player,s=o.defaultParams,u=o.ref,l=o.onlyAds,c=void 0!==l&&l,h=a.options().params,d=h.pid||A(),f=u?decodeURIComponent(u):document.referrer?document.referrer:location.href,p=document.location.href;/adminplayer\.sohatv\.vn/.test(p)&&(p=f),window.top!=window.self&&(p=f);var v=p.match(/(http[s]?:\/\/)?([^\/\s]+)(\/.*)/),y="-1",m="-1",_="-1";v&&v.length&&(y=v[3],m=v[2],_=O[m]||"-1");var w=c?0:a.options().params.live?2:1;a.options().audio&&(w=a.options().params.live?5:3);var E=h.vtype||"-1",T=h.key||P(a)||"-1";return a.options().params.live&&(f+="&vid="+a.options().params.v),m=m.replace("www.",""),t.state={params:Ae({key:T,dmn:m,dmnid:_,path:y,vtype:E,vtarget:w,ref:f,vid:h.vid||h.v||h.file||h.mp4||h.m3u8||"-1",bw:"-1",pid:d,vdu:"-1",ctime:"-1",guid:"-1",ptype:1,pdu:0},s)},t.track_poll=0,t.updatePDU=t.updatePDU.bind(t),t.track=t.track.bind(t),t._handleLoadedmetadata=t._handleLoadedmetadata.bind(t),t._handleTimeUpdate=t._handleTimeUpdate.bind(t),t._handleLastBitrate=t._handleLastBitrate.bind(t),t._handleReplay=t._handleReplay.bind(t),a.on("loadedmetadata",t._handleLoadedmetadata),a.one("play",function(){a.on("timeupdate",n._handleTimeUpdate)}),a.on(Oe.EVENT.PLAYER_ENDED_CONTEND,function(){a.off("play",n._handleReplay),a.on("play",n._handleReplay)}),a.on(Oe.EVENT.AD_START,function(){if(a.vastAd.props.adsITVC){var e=a.vastAd.props.adTagUrl,t=n.state.params,r=i("u",e).match(/(http[s]?:\/\/)?([^\/\s]+)(\/.*)/);t.dmn=r[2],t.path=r[3]}}),x(a,t.track),ee(a,t.track),j(a,t.track),L(a,t.track),F(a,t.track),B(a,t.track),W(a,t.track),Y(a,t.track),Q(a,t.track),G(a,t.track),$(a,t.track),ae(a,t.track),de(a,t.track),pe(a,t.track),ve(a,t.track),me(a,t.track),_e(a,t.track),ge(a,t.track),ke(a,t.updatePDU),t}return w(r,e.Plugin),Pe(r,[{key:"getDefaultProps",value:function(){var e="lg1.logging.admicro.vn";return window.ADMStorageFileCDN&&window.ADMStorageFileCDN.logging&&(e=window.ADMStorageFileCDN.logging),{track_url:"https://"+e+"/video_track?",defaultParams:{}}}}]),Pe(r,[{key:"_handleReplay",value:function(){if(!this.props.player.vastAd){var e=this.state.params;e.pid=A(),e.pdu=0,e.ptype=2}}},{key:"updatePDU",value:function(e){this.state.params.pdu=e}},{key:"_trackWaitEvent",value:function(){for(var e=this.waitTrack;e.length;){var t=e.shift();this.track(t)}}},{key:"track",value:function(e){var t=this.props.player,n=e.evt;if(!(14===n&&++this.track_poll>=parseInt(t.duration()/3))){if(!this.isFirstPlay&&20!==e.evt)switch(n){case S.play:this.isFirstPlay=!0,setTimeout(this._trackWaitEvent.bind(this),100);break;case S.load:break;default:return void this.waitTrack.push(e)}var i=this.state.params,r=this.props.track_url,o=Ae({},i,e),a=k(o);(new Image).src=r+a}}},{key:"_handleLoadedmetadata",value:function(){var e=this.props.player,t=this.state.params,i=e.duration();"-1"===t.vdu&&i>0&&i!==1/0&&(t.vdu=n(i)),this.tech_&&this.tech_.off(Oe.EVENT.HLS_FRAG_BUFFERED,this._handleLastBitrate),this.tech_=e.tech_,this.tech_.on(Oe.EVENT.HLS_FRAG_BUFFERED,this._handleLastBitrate)}},{key:"_handleTimeUpdate",value:function(){var e=this.props.player;if(!e.vastAd){var t=this.state.params,n=e.currentTime();t.ctime=n.toFixed(1)}}},{key:"_handleLastBitrate",value:function(e,t){var n=t.data,i=this.state.params,r=Math.round(8*n.stats.total*1e3/(n.stats.tbuffered-n.stats.trequest));i.bw=r}}]),r}(),Re=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};E.registerPlugin("vcTrackingPlugin",function(e){new Se(Re({},e,{player:this}))})})}();/**
 * adsVastPlugin - v1.2.11 - 11:22:49 22-06-2023
 * Author: tungtm
 */

!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).OpenVV=t()}}(function(){return function t(e,n,o){function i(s,a){if(!n[s]){if(!e[s]){var c="function"==typeof require&&require;if(!a&&c)return c(s,!0);if(r)return r(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[s]={exports:{}};e[s][0].call(l.exports,function(t){var n=e[s][1][t];return i(n||t)},l,l.exports,t,e,n,o)}return n[s].exports}for(var r="function"==typeof require&&require,s=0;s<o.length;s++)i(o[s]);return i}({1:[function(t,e,n){"use strict";e.exports=function(t,e,n){if("function"==typeof Array.prototype.find)return t.find(e,n);n=n||this;var o,i=t.length;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(o=0;o<i;o++)if(e.call(n,t[o],o,t))return t[o]}},{}],2:[function(t,e,n){!function(t,e){"use strict";function n(t){this.time=t.time,this.target=t.target,this.rootBounds=t.rootBounds,this.boundingClientRect=t.boundingClientRect,this.intersectionRect=t.intersectionRect||{top:0,bottom:0,left:0,right:0,width:0,height:0},this.isIntersecting=!!t.intersectionRect;var e=this.boundingClientRect,n=e.width*e.height,o=this.intersectionRect,i=o.width*o.height;this.intersectionRatio=n?i/n:this.isIntersecting?1:0}function o(t,e){var n=e||{};if("function"!=typeof t)throw new Error("callback must be a function");if(n.root&&1!=n.root.nodeType)throw new Error("root must be an Element");this._checkForIntersections=r(this._checkForIntersections.bind(this),this.THROTTLE_TIMEOUT),this._callback=t,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(n.rootMargin),this.thresholds=this._initThresholds(n.threshold),this.root=n.root||null,this.rootMargin=this._rootMarginValues.map(function(t){return t.value+t.unit}).join(" ")}function i(){return t.performance&&performance.now&&performance.now()}function r(t,e){var n=null;return function(){n||(n=setTimeout(function(){t(),n=null},e))}}function s(t,e,n,o){"function"==typeof t.addEventListener?t.addEventListener(e,n,o||!1):"function"==typeof t.attachEvent&&t.attachEvent("on"+e,n)}function a(t,e,n,o){"function"==typeof t.removeEventListener?t.removeEventListener(e,n,o||!1):"function"==typeof t.detatchEvent&&t.detatchEvent("on"+e,n)}function c(t,e){var n=Math.max(t.top,e.top),o=Math.min(t.bottom,e.bottom),i=Math.max(t.left,e.left),r=Math.min(t.right,e.right),s=r-i,a=o-n;return s>=0&&a>=0&&{top:n,bottom:o,left:i,right:r,width:s,height:a}}function u(t){var e;try{e=t.getBoundingClientRect()}catch(t){}return e?(e.width&&e.height||(e={top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.right-e.left,height:e.bottom-e.top}),e):{top:0,bottom:0,left:0,right:0,width:0,height:0}}function l(t,e){for(var n=e;n;){if(n==t)return!0;n=h(n)}return!1}function h(t){var e=t.parentNode;return e&&11==e.nodeType&&e.host?e.host:e}if(!("IntersectionObserver"in t&&"IntersectionObserverEntry"in t&&"intersectionRatio"in t.IntersectionObserverEntry.prototype)){var d=[];o.prototype.THROTTLE_TIMEOUT=100,o.prototype.POLL_INTERVAL=null,o.prototype.observe=function(t){if(!this._observationTargets.some(function(e){return e.element==t})){if(!t||1!=t.nodeType)throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:t,entry:null}),this._monitorIntersections()}},o.prototype.unobserve=function(t){this._observationTargets=this._observationTargets.filter(function(e){return e.element!=t}),this._observationTargets.length||(this._unmonitorIntersections(),this._unregisterInstance())},o.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorIntersections(),this._unregisterInstance()},o.prototype.takeRecords=function(){var t=this._queuedEntries.slice();return this._queuedEntries=[],t},o.prototype._initThresholds=function(t){var e=t||[0];return Array.isArray(e)||(e=[e]),e.sort().filter(function(t,e,n){if("number"!=typeof t||isNaN(t)||t<0||t>1)throw new Error("threshold must be a number between 0 and 1 inclusively");return t!==n[e-1]})},o.prototype._parseRootMargin=function(t){var e=(t||"0px").split(/\s+/).map(function(t){var e=/^(-?\d*\.?\d+)(px|%)$/.exec(t);if(!e)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(e[1]),unit:e[2]}});return e[1]=e[1]||e[0],e[2]=e[2]||e[0],e[3]=e[3]||e[1],e},o.prototype._monitorIntersections=function(){this._monitoringIntersections||(this._monitoringIntersections=!0,this._checkForIntersections(),this.POLL_INTERVAL?this._monitoringInterval=setInterval(this._checkForIntersections,this.POLL_INTERVAL):(s(t,"resize",this._checkForIntersections,!0),s(e,"scroll",this._checkForIntersections,!0),"MutationObserver"in t&&(this._domObserver=new MutationObserver(this._checkForIntersections),this._domObserver.observe(e,{attributes:!0,childList:!0,characterData:!0,subtree:!0}))))},o.prototype._unmonitorIntersections=function(){this._monitoringIntersections&&(this._monitoringIntersections=!1,clearInterval(this._monitoringInterval),this._monitoringInterval=null,a(t,"resize",this._checkForIntersections,!0),a(e,"scroll",this._checkForIntersections,!0),this._domObserver&&(this._domObserver.disconnect(),this._domObserver=null))},o.prototype._checkForIntersections=function(){var t=this._rootIsInDom(),e=t?this._getRootRect():{top:0,bottom:0,left:0,right:0,width:0,height:0};this._observationTargets.forEach(function(o){var r=o.element,s=u(r),a=this._rootContainsTarget(r),c=o.entry,l=t&&a&&this._computeTargetAndRootIntersection(r,e),h=o.entry=new n({time:i(),target:r,boundingClientRect:s,rootBounds:e,intersectionRect:l});c?t&&a?this._hasCrossedThreshold(c,h)&&this._queuedEntries.push(h):c&&c.isIntersecting&&this._queuedEntries.push(h):this._queuedEntries.push(h)},this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)},o.prototype._computeTargetAndRootIntersection=function(n,o){if("none"!=t.getComputedStyle(n).display){for(var i=u(n),r=h(n),s=!1;!s;){var a=null,l=1==r.nodeType?t.getComputedStyle(r):{};if("none"==l.display)return;if(r==this.root||r==e?(s=!0,a=o):r!=e.body&&r!=e.documentElement&&"visible"!=l.overflow&&(a=u(r)),a&&!(i=c(a,i)))break;r=h(r)}return i}},o.prototype._getRootRect=function(){var t;if(this.root)t=u(this.root);else{var n=e.documentElement,o=e.body;t={top:0,left:0,right:n.clientWidth||o.clientWidth,width:n.clientWidth||o.clientWidth,bottom:n.clientHeight||o.clientHeight,height:n.clientHeight||o.clientHeight}}return this._expandRectByRootMargin(t)},o.prototype._expandRectByRootMargin=function(t){var e=this._rootMarginValues.map(function(e,n){return"px"==e.unit?e.value:e.value*(n%2?t.width:t.height)/100}),n={top:t.top-e[0],right:t.right+e[1],bottom:t.bottom+e[2],left:t.left-e[3]};return n.width=n.right-n.left,n.height=n.bottom-n.top,n},o.prototype._hasCrossedThreshold=function(t,e){var n=t&&t.isIntersecting?t.intersectionRatio||0:-1,o=e.isIntersecting?e.intersectionRatio||0:-1;if(n!==o)for(var i=0;i<this.thresholds.length;i++){var r=this.thresholds[i];if(r==n||r==o||r<n!=r<o)return!0}},o.prototype._rootIsInDom=function(){return!this.root||l(e,this.root)},o.prototype._rootContainsTarget=function(t){return l(this.root||e,t)},o.prototype._registerInstance=function(){d.indexOf(this)<0&&d.push(this)},o.prototype._unregisterInstance=function(){var t=d.indexOf(this);-1!=t&&d.splice(t,1)},t.IntersectionObserver=o,t.IntersectionObserverEntry=n}}(window,document)},{}],3:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.getDetails=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{viewportWidth:Math.max(document.body.clientWidth,window.innerWidth)||-1,viewportHeight:Math.max(document.body.clientHeight,window.innerHeight)||-1,elementWidth:t.clientWidth||-1,elementHeight:t.clientHeight||-1,iframeContext:i(),focus:o()}};var o=n.isInFocus=function(){return("undefined"===document.hidden||!0!==document.hidden)&&(i()===r.CROSS_DOMAIN_IFRAME||(!window.document.hasFocus||window.top.document.hasFocus()))},i=n.iFrameContext=function(){try{if(window.top===window)return r.ON_PAGE;for(var t=window;t.parent!==t;){if(t.parent.document.domain!==t.document.domain)return r.CROSS_DOMAIN_IFRAME;t=t.parent}r.SAME_DOMAIN_IFRAME}catch(t){return r.CROSS_DOMAIN_IFRAME}},r=n.iFrameServingScenarios={ON_PAGE:"on page",SAME_DOMAIN_IFRAME:"same domain iframe",CROSS_DOMAIN_IFRAME:"cross domain iframe"}},{}],4:[function(t,e,n){"use strict";t("array-find")},{"array-find":1}],5:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.validateStrategy=n.validateCriteria=n.validElement=n.validTechnique=void 0;var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=function(t){return t&&t.__esModule?t:{default:t}}(t("../Measurement/MeasurementTechniques/BaseTechnique")),r=(n.validTechnique=function(t){return"function"==typeof t&&Object.getOwnPropertyNames(i.default).reduce(function(e,n){return n&&o(t[e])===o(i.default[e])},!0)},n.validElement=function(t){return t&&t.toString().indexOf("Element")>-1},n.validateCriteria=function(t){var e=t.inViewThreshold,n=t.timeInView,o=!1,i=[];return("number"!=typeof e||e>1)&&(o=!0,i.push("inViewThreshold must be a number equal to or less than 1")),("number"!=typeof n||n<0)&&(o=!0,i.push("timeInView must be a number greater to or equal 0")),{invalid:o,reasons:i.join(" | ")}});n.validateStrategy=function(t){var e=t.autostart,n=t.techniques,o=t.criteria,i=!1,s=[];"boolean"!=typeof e&&(i=!0,s.push("autostart must be boolean")),Array.isArray(n)&&0!==n.length||(i=!0,s.push("techniques must be an array containing atleast on measurement techniques"));var a=r(o);return a.invalid&&(i=!0,s.push(a.reasons)),{invalid:i,reasons:s.join(" | ")}}},{"../Measurement/MeasurementTechniques/BaseTechnique":8}],6:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.START="start",n.STOP="stop",n.CHANGE="change",n.COMPLETE="complete",n.UNMEASUREABLE="unmeasureable",n.INVIEW="inview",n.OUTVIEW="outview"},{}],7:[function(t,e,n){"use strict";function o(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},s=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(t("../Timing/InViewTimer")),c=t("./Strategies/"),u=t("../Helpers/Validators"),l=o(t("../Environment/Environment")),h=o(t("./Events")),d=function(){function t(e){var n=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,t),this._listeners={start:[],stop:[],change:[],complete:[],unmeasureable:[]},this._element=e,this._strategy=r({},c.DEFAULT_STRATEGY,o),this._criteriaMet=!1;var s=(0,u.validateStrategy)(this._strategy);if(s.invalid)throw s.reasons;this._technique=this._selectTechnique(this._strategy.techniques),this._technique&&this._addSubscriptions(this._technique),this.unmeasureable?setTimeout(function(){return n._publish(h.UNMEASUREABLE,l.getDetails(n._element))},0):this._strategy.autostart&&this._technique.start()}return s(t,[{key:"start",value:function(){this._technique.start()}},{key:"dispose",value:function(){this._technique&&this._technique.dispose(),this.timer&&this.timer.dispose()}},{key:"onViewableStart",value:function(t){return this._addCallback(t,h.START)}},{key:"onViewableStop",value:function(t){return this._addCallback(t,h.STOP)}},{key:"onViewableChange",value:function(t){return this._addCallback(t,h.CHANGE)}},{key:"onViewableComplete",value:function(t){return this._addCallback(t,h.COMPLETE),this.criteriaMet&&this._techniqueChange(h.COMPLETE,this._technique),this}},{key:"onUnmeasureable",value:function(t){return this._addCallback(t,h.UNMEASUREABLE),this.unmeasureable&&this._techniqueChange(h.UNMEASUREABLE),this}},{key:"_selectTechnique",value:function(t){return t.filter(u.validTechnique).map(this._instantiateTechnique.bind(this)).find(function(t){return!t.unmeasureable})}},{key:"_instantiateTechnique",value:function(t){return new t(this._element,this._strategy.criteria)}},{key:"_addSubscriptions",value:function(t){t&&(t.onInView(this._techniqueChange.bind(this,h.INVIEW,t)),t.onChangeView(this._techniqueChange.bind(this,h.CHANGE,t)),t.onOutView(this._techniqueChange.bind(this,h.OUTVIEW,t)))}},{key:"_techniqueChange",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=void 0,o=this._appendEnvironment(e);switch(t){case h.INVIEW:this._criteriaMet||(this.timer=new a.default(this._strategy.criteria.timeInView),this.timer.elapsed(this._timerElapsed.bind(this,e)),this.timer.start(),n=h.START);break;case h.CHANGE:n=t;break;case h.COMPLETE:this._criteriaMet||(this._criteriaMet=!0,n=t);break;case h.OUTVIEW:this._criteriaMet||(this.timer&&(this.timer.stop(),delete this.timer),n=h.STOP);break;case h.UNMEASUREABLE:n=h.UNMEASUREABLE}n&&this._publish(n,o)}},{key:"_publish",value:function(t,e){Array.isArray(this._listeners[t])&&this._listeners[t].forEach(function(t){return t(e)})}},{key:"_timerElapsed",value:function(t){this._techniqueChange(h.COMPLETE,t)}},{key:"_addCallback",value:function(t,e){if(this._listeners[e]&&"function"==typeof t)this._listeners[e].push(t);else if("function"!=typeof t)throw"Callback must be a function";return this}},{key:"_appendEnvironment",value:function(t){return r({},{percentViewable:void 0===t.percentViewable?-1:t.percentViewable,technique:t.techniqueName||-1,viewable:void 0===t.viewable?-1:t.viewable},l.getDetails(this._element))}},{key:"unmeasureable",get:function(){return!this._technique||this._technique.unmeasureable}}]),t}();n.default=d,e.exports=n.default},{"../Environment/Environment":3,"../Helpers/Validators":5,"../Timing/InViewTimer":15,"./Events":6,"./Strategies/":12}],8:[function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),r=function(){function t(){o(this,t),this.listeners={inView:[],outView:[],changeView:[]},this.percentViewable=0}return i(t,[{key:"onInView",value:function(t){return this.addCallback(t,"inView")}},{key:"onChangeView",value:function(t){return this.addCallback(t,"changeView")}},{key:"onOutView",value:function(t){return this.addCallback(t,"outView")}},{key:"addCallback",value:function(t,e){if("function"==typeof t&&this.listeners[e])this.listeners[e].push(t);else if("function"!=typeof t)throw"callback must be function";return this}},{key:"start",value:function(){}},{key:"dispose",value:function(){}},{key:"unmeasureable",get:function(){return!1}},{key:"viewable",get:function(){return!1}},{key:"techniqueName",get:function(){return"BaseTechnique"}}]),t}();n.default=r,e.exports=n.default},{}],9:[function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(t("./BaseTechnique")),c=t("../../Helpers/Validators"),u=t("../Strategies/"),l=function(t){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.DEFAULT_STRATEGY.criteria;o(this,e);var r=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));if(void 0!==n&&t)r.element=t,r.criteria=n,r.inView=!1,r.started=!1,r.notificationLevels=[0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1],-1===r.notificationLevels.indexOf(r.criteria.inViewThreshold)&&r.notificationLevels.push(r.criteria.inViewThreshold);else if(!t)throw"element not provided";return r}return r(e,a.default),s(e,[{key:"start",value:function(){this.observer=new window.IntersectionObserver(this.viewableChange.bind(this),{threshold:this.notificationLevels}),this.observer.observe(this.element)}},{key:"dispose",value:function(){this.observer&&(this.observer.unobserve(element),this.observer.disconnect(element))}},{key:"viewableChange",value:function(t){t&&t.length&&void 0!==t[0].intersectionRatio&&(this.percentViewable=t[0].intersectionRatio,t[0].intersectionRatio<this.criteria.inViewThreshold&&this.started&&this.inView&&(this.inView=!1,this.listeners.outView.forEach(function(t){return t()})),t[0].intersectionRatio>=this.criteria.inViewThreshold&&!this.inView&&(this.started=!0,this.inView=!0,this.listeners.inView.forEach(function(t){return t()})),this.listeners.changeView.forEach(function(t){return t()}))}},{key:"unmeasureable",get:function(){return!window.IntersectionObserver||this.usesPolyfill||!(0,c.validElement)(this.element)}},{key:"viewable",get:function(){return this.inView}},{key:"techniqueName",get:function(){return"IntersectionObserver"}},{key:"usesPolyfill",get:function(){return"number"==typeof window.IntersectionObserver.prototype.THROTTLE_TIMEOUT}}]),e}();n.default=l,e.exports=n.default},{"../../Helpers/Validators":5,"../Strategies/":12,"./BaseTechnique":8}],10:[function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),c=o(t("./IntersectionObserver")),u=(o(t("intersection-observer")),function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(t("../../Environment/Environment"))),l=function(t){function e(){return i(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,c.default),a(e,[{key:"unmeasureable",get:function(){return u.iFrameContext()===u.iFrameServingScenarios.CROSS_DOMAIN_IFRAME}},{key:"techniqueName",get:function(){return"IntersectionObserverPolyFill"}}]),e}();n.default=l,e.exports=n.default},{"../../Environment/Environment":3,"./IntersectionObserver":9,"intersection-observer":2}],11:[function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var i=t("./IntersectionObserver");Object.defineProperty(n,"IntersectionObserver",{enumerable:!0,get:function(){return o(i).default}});var r=t("./IntersectionObserverPolyfill");Object.defineProperty(n,"IntersectionObserverPolyfill",{enumerable:!0,get:function(){return o(r).default}});var s=t("./BaseTechnique");Object.defineProperty(n,"BaseTechnique",{enumerable:!0,get:function(){return o(s).default}})},{"./BaseTechnique":8,"./IntersectionObserver":9,"./IntersectionObserverPolyfill":10}],12:[function(t,e,n){"use strict";function o(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}Object.defineProperty(n,"__esModule",{value:!0}),n.StrategyFactory=n.DEFAULT_STRATEGY=void 0;var i=o(t("../../Helpers/Validators")),r=o(t("../MeasurementTechniques/")),s=o(t("../../Options/ViewabilityCriteria")),a=n.DEFAULT_STRATEGY={autostart:!0,techniques:[r.IntersectionObserver,r.IntersectionObserverPolyfill],criteria:s.MRC_VIDEO};n.StrategyFactory=function(){var t={autostart:arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.autostart,techniques:arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.techniques,criteria:arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.criteria},e=i.validateStrategy(t);if(e.invalid)throw e.reasons;return t}},{"../../Helpers/Validators":5,"../../Options/ViewabilityCriteria":14,"../MeasurementTechniques/":11}],13:[function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}();t("./Helpers/Polyfills.js");var a=i(t("./Measurement/Events")),c=o(t("./Timing/InViewTimer")),u=i(t("./Measurement/Strategies/")),l=(i(t("./Environment/Environment")),o(t("./Measurement/MeasurementExecutor"))),h=i(t("./Options/ViewabilityCriteria")),d=i(t("./Measurement/MeasurementTechniques/")),p=function(){function t(){r(this,t),this.executors=[]}return s(t,[{key:"measureElement",value:function(t,e){var n=new l.default(t,e);return this.executors.push(n),n}},{key:"dispose",value:function(){this.executors.forEach(function(t){return t.dispose()})}}]),t}();n.default=p,p.ViewabilityCriteria=h,p.MeasurementExecutor=l.default,p.MeasurementTechniques=d,p.InViewTimer=c.default,p.Strategies=u,p.Events=a,e.exports=n.default},{"./Environment/Environment":3,"./Helpers/Polyfills.js":4,"./Measurement/Events":6,"./Measurement/MeasurementExecutor":7,"./Measurement/MeasurementTechniques/":11,"./Measurement/Strategies/":12,"./Options/ViewabilityCriteria":14,"./Timing/InViewTimer":15}],14:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.MRC_VIDEO={inViewThreshold:.5,timeInView:2e3},n.MRC_DISPLAY={inViewThreshold:.5,timeInView:1e3},n.customCriteria=function(){return{inViewThreshold:arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,timeInView:arguments.length>1&&void 0!==arguments[1]?arguments[1]:2e3}}},{}],15:[function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),r=function(){function t(e){o(this,t),this.duration=e,this.listeners=[],this.completed=!1}return i(t,[{key:"timerComplete",value:function(){this.completed=!0,this.listeners.forEach(function(t){return t()})}},{key:"elapsed",value:function(t){"function"==typeof t&&this.listeners.push(t)}},{key:"start",value:function(){this.endTimer(),this.timer=setTimeout(this.timerComplete.bind(this),this.duration)}},{key:"stop",value:function(){this.endTimer()}},{key:"endTimer",value:function(){this.timer&&(clearTimeout(this.timer),this.listeners.length=0)}},{key:"dispose",value:function(){this.endTimer()}}]),t}();n.default=r,e.exports=n.default},{}]},{},[13])(13)}),function(){var t=void 0;this.vcReact=this.vcReact?this.vcReact:this.React,function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(require("playercore"),require("react"),require("OpenVV")):"function"==typeof t&&t.amd?t(["playercore","react","OpenVV"],n):n(e.audioSwitchVoicePlayerCore,e.vcReact,e.OpenVV)}(this,function(t,e,n){"use strict";function o(t){var e=t.duration,n=t.durationValue,o=t.durationLogical;if(!n||!o)return!0;var i=n.match(/\d+/g).map(Number);if(i.length>2)return!0;switch(i.sort(function(t,e){return t-e}),o){case">=":if(e>=i[0])return!0;break;case">":if(e>i[0])return!0;break;case"<=":if(e<=i[0])return!0;break;case"<":if(e<i[0])return!0;break;case"range":if(e>=i[0]&&e<i[1])return!0}return!1}function i(t,e,n,o,i){var r={};return Object.keys(o).forEach(function(t){r[t]=o[t]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(t,e,n)||n},r),i&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(i):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(t,e,r),r=null),r}function r(t,e){var n,o;return t.indexOf(":")>-1?o=60*+(n=t.split(":"))[0]*60+60*+n[1]+ +n[2]:t.indexOf("%")>-1?o=+(n=t.split("%"))[0]/100*e:+t<1?o=+t*e:+t>1&&(o=+t),o}function s(t,e,n,o,i,r,s,a,c,u,l,h){function d(){p(),v()}function p(){if(j===M.IDLE&&t.currentTime()+6>=A){if(r)return;if(o.currentTime>A&&o.adStart)return void g();r=!0,t.trigger("prepareMidrollVast",1),t.one("prepareMidrollVastSuccess",function(){_=!0}),j=M.PREPAIRING,m()}}function m(){function o(o){s?e.initAd({player:t,skipoffset:u,adTagUrl:n,vastResponse:o,type:"midroll",preLoaded:s}):t.one(D.EVENT.AD_ORDER_START_MIDROLL,function(){e.initAd({player:t,skipoffset:u,adTagUrl:n,vastResponse:o,type:"midroll",preLoaded:s})})}return l?(f(l),void o(l)):Promise.resolve().then(function(){return e.getVastRespone({adTagUrl:n,isPackageAds:h.isAddLinkSSP,player:t})}).then(function(t){f(t),o(t)}).catch(function(){g()})}function f(t){j===M.PREPAIRING&&(l=t)}function v(){if(j===M.PREPAIRING&&l&&(!s||_)){var e=t.currentTime(),n=Math.round(A-e);e>A&&(E=e,k(),t.trigger(D.EVENT.AD_ORDER_START_MIDROLL,l)),0===n&&(j=M.RUNNING,E=e,k(),t.trigger(D.EVENT.AD_ORDER_START_MIDROLL,l))}}function y(){j===M.IDLE?b():g()}function b(){k(),t.one("timeupdate",function(){t.on("timeupdate",d)})}function k(){t.off("timeupdate",d)}function g(){t.off("timeupdate",d),t.off("ignoreEventAds",y),t.off(D.EVENT.AD_END,y),t.off(D.EVENT.AD_START,k),t.off(D.EVENT.AD_ORDER_START_MIDROLL,k),E&&(r=!1,o={adStart:!1,currentTime:E})}var j=M.IDLE,_=!1,E=void 0,A=c/i*i;t.on("timeupdate",d),t.on("ignoreEventAds",y),t.on(D.EVENT.AD_END,y),t.on(D.EVENT.AD_START,k),t.on(D.EVENT.AD_ORDER_START_MIDROLL,k)}function a(t,e,n,o,i){var r={};return Object.keys(o).forEach(function(t){r[t]=o[t]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(t,e,n)||n},r),i&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(i):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(t,e,r),r=null),r}function c(t){t=u(t.toLowerCase());for(var e="",n=0;n<t.length;n++)"abcdefghijklmnopqrstxyzuvxw0123456789 ".indexOf(t.charAt(n))>-1&&(" "!=t.charAt(n)?e+=t.charAt(n):n>0&&" "!=t.charAt(n-1)&&"-"!=t.charAt(n-1)&&(e+="-"));return e}function u(t){for(var e="",n=0,o=0;o<t.length;o++)e+=(n="".indexOf(t.charAt(o)))>=0?"aaaaaaaaaaaaaaaaaeeeeeeeeeeediiiiiooooooooooooooooouuuuuuuuuuuyyyyyAAAAAAAAAAAAAAAAAEEEEEEEEEEEDIIIOOOOOOOOOOOOOOOOOOOUUUUUUUUUUUYYYYYAADOOU".charAt(n):t.charAt(o);return e}var l="default"in t?t.default:t,h="default"in e?e.default:e;n=n&&n.hasOwnProperty("default")?n.default:n;var d,p,m,f,v,y,b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},k=(function(){function t(t){this.value=t}function e(e){function n(i,r){try{var s=e[i](r),a=s.value;a instanceof t?Promise.resolve(a.value).then(function(t){n("next",t)},function(t){n("throw",t)}):o(s.done?"return":"normal",s.value)}catch(t){o("throw",t)}}function o(t,e){switch(t){case"return":i.resolve({value:e,done:!0});break;case"throw":i.reject(e);break;default:i.resolve({value:e,done:!1})}(i=i.next)?n(i.key,i.arg):r=null}var i,r;this._invoke=function(t,e){return new Promise(function(o,s){var a={key:t,arg:e,resolve:o,reject:s,next:null};r?r=r.next=a:(i=r=a,n(t,e))})},"function"!=typeof e.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(e.prototype[Symbol.asyncIterator]=function(){return this}),e.prototype.next=function(t){return this._invoke("next",t)},e.prototype.throw=function(t){return this._invoke("throw",t)},e.prototype.return=function(t){return this._invoke("return",t)}}(),function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}),g=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),j=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},_=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},E=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},A=function(t){return new Promise(function(e,n){l.xhr(j({timeout:5e3},t),function(t,o,i){200===o.statusCode?e(i):n(t)})})},w=function(e,n,o,i){var r=e.options_.params,s=n.skipoffset,a=n.tag,c=n.isAddLinkSSP,u=r.ima,l=a;e.one("timeupdate",function(){i.getVastRespone({adTagUrl:l,isPackageAds:c,player:e}).then(function(n){var o=void 0,a=void 0,c=!0;if((r.noAdsLoad||t.agent.isIOS)&&(c=!1),"string"==typeof n)o=n;else{if("object"!==(void 0===n?"undefined":b(n)))return;a=n}i.initAd({player:e,adTagUrl:o,vastResponse:a,ima:u,skipoffset:s,type:"preroll",preLoaded:c})}).catch(function(t){})})},T={IDLE:"IDLE",PREPARE:"PREPARE",RUNNING:"RUNNING",SUCCESS:"SUCCESS"},I=t.playerconfig.DEFAULT,O=function(t){function e(t){k(this,e);var n=E(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));n.defaultProps={number:-1},n.state={count:0,postrollstate:T.IDLE,prepareSuccess:!0,contentEnded:!1};var o=n.props,i=o.player,r=o.preLoaded;return n.isPreparePost=!1,n.handleContentEnded=n.handleContentEnded.bind(n),n.checkDurationIsGreat=n.checkDurationIsGreat.bind(n),n.checkToStartPostroll=n.checkToStartPostroll.bind(n),n._handlePreparePostrollSucess=n._handlePreparePostrollSucess.bind(n),i.on(I.EVENT.PLAYER_ENDED_CONTEND,n.handleContentEnded),i.on("durationchange",n.checkDurationIsGreat),i.on("play",n.checkDurationIsGreat),i.on("loadedmetadata",n.checkDurationIsGreat),i.on("preparePostrollSuccess",n._handlePreparePostrollSucess),r&&(i.on("timeupdate",n.checkToStartPostroll),n.setState({prepareSuccess:!1})),n}return _(e,t),g(e,[{key:"componentWillUnmount",value:function(){var t=this.props.player;t.off("durationchange",this.checkDurationIsGreat),t.off("play",this.checkDurationIsGreat),t.off("loadedmetadata",this.checkDurationIsGreat),t.off("timeupdate",this.checkToStartPostroll),t.off(I.EVENT.PLAYER_ENDED_CONTEND,this.handleContentEnded),t.off("preparePostrollSuccess",this._handlePreparePostrollSucess)}},{key:"dispose",value:function(){var t=this.props.player;t.off("durationchange",this.checkDurationIsGreat),t.off("play",this.checkDurationIsGreat),t.off("loadedmetadata",this.checkDurationIsGreat),t.off("timeupdate",this.checkToStartPostroll),t.off(I.EVENT.PLAYER_ENDED_CONTEND,this.handleContentEnded),t.off("preparePostrollSuccess",this._handlePreparePostrollSucess)}},{key:"_handlePreparePostrollSucess",value:function(){this.setState({prepareSuccess:!0}),this.PreparePostroll()}},{key:"checkToStartPostroll",value:function(){var t=this.props.player;this.isPreparePost||t.vastAd||t.currentTime()+6>=t.duration()&&(this.isPreparePost=!0,this.preparePostroll())}},{key:"preparePostroll",value:function(){function t(t){o.trigger("preparePostrollVast"),s.initAd({player:o,skipoffset:c,adTagUrl:a,vastResponse:t,type:"postroll",preLoaded:i})}var e=this.props,n=e.infoAd,o=e.player,i=e.preLoaded,r=e.vastResponse,s=e.defaultAd,a=n.tag,c=n.skipoffset;if(!r)return s.getVastRespone({adTagUrl:a,isPackageAds:n.isAddLinkSSP,player:o}).then(function(e){t(e)}).catch(function(){});t(r)}},{key:"checkDurationIsGreat",value:function(){var t=this.props.player.duration();Number.isNaN(t)}},{key:"PreparePostroll",value:function(){var t=this.props,e=t.player,n=t.preLoaded,o=this,i=this.state,r=i.prepareSuccess,s=i.contentEnded;!r&&n||!s||(this.setState({postrollstate:T.RUNNING}),e.one(I.EVENT.AD_END,function(){o.setState({postrollstate:T.SUCCESS}),e.one("play",function(){o.setState({postrollstate:T.IDLE}),e.currentTime(0)}),e.trigger(I.EVENT.AD_ENDED_POSTROLL)}),n?e.trigger(I.EVENT.AD_ORDER_START_POSTROLL):this.startPostroll())}},{key:"startPostroll",value:function(){var t=this.props,e=t.infoAd,n=t.player,o=t.vastResponse,i=t.defaultAd,r=e.tag,s=e.skipoffset;i._initAd({player:n,skipoffset:s,vastResponse:o,adTagUrl:r,type:"postroll",preLoaded:!1})}},{key:"handleContentEnded",value:function(){var t=this.state,e=t.count,n=t.postrollstate,o=this.props,i=o.player,r=o.number;if("IDLE"===n){if(this.setState({count:++e,contentEnded:!0}),e>r&&r>=0)return i.off(I.EVENT.PLAYER_ENDED_CONTEND,this.handleContentEnded),void(i.play=this.oriPlay);this.PreparePostroll()}}}]),e}(t.Plugin),P=function(e,n,i,r){var s=r.rules,a=r.vastResponse;e.one("play",function(){e.one("timeupdate",function(){var r=e.duration(),c=e.options(),u=c.params,l=c.plugins,h=!1;o({duration:r,durationValue:n.durationValue,durationLogical:n.durationLogical})&&(u.noAdsLoad||t.agent.isIOS||(h=!0),l.AdsPlayerPlugin||(h=!1),new O({player:e,infoAd:n,preLoaded:h,vastResponse:a,rules:s,defaultAd:i}))})})},R=t.playerconfig.DEFAULT,S={IDLE:"IDLE",PREPAIRING:"PREPAIRING",RUNNING:"RUNNING",DISPOSE:"DISPOSE"},D=(m=p=function(t){function e(t){k(this,e);var n=E(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.state={left:null,dispose:!1},n.midrollState_=S.IDLE,n}return _(e,t),g(e,[{key:"componentDidMount",value:function(){var t=this.props.player;this.prepareSuccess=!1,t.on("timeupdate",this.checkToStartMidroll),t.on("ignoreEventAds",this.handleStopOrResume),t.on(R.EVENT.AD_END,this.handleStopOrResume),t.on(R.EVENT.AD_START,this.stopHandleEvent),t.on(R.EVENT.AD_ORDER_START_MIDROLL,this.stopHandleEvent),this.updatePosition()}},{key:"componentWillUnmount",value:function(){var t=this.props.player;t.off("timeupdate",this.checkToStartMidroll),t.off("ignoreEventAds",this.handleStopOrResume),t.off(R.EVENT.AD_END,this.handleStopOrResume),t.off(R.EVENT.AD_START,this.stopHandleEvent)}},{key:"updatePosition",value:function(){var t=this.props,e=t.seconds,n=t.duration,o=e/n,i=100*o+"%",r=o*n;this.setState({left:i,starttime:r})}},{key:"dispose",value:function(){var t=this.props.player;t.off("timeupdate",this.checkToStartMidroll),t.off("ignoreEventAds",this.handleStopOrResume),t.off(R.EVENT.AD_END,this.handleStopOrResume),t.off(R.EVENT.AD_START,this.stopHandleEvent),t.off(R.EVENT.AD_ORDER_START_MIDROLL,this.stopHandleEvent),this.setState({dispose:!0}),this.currentTime_&&(this.props.isCounting=!1,this.props.checkAdStart={adStart:!1,currentTime:this.currentTime_})}},{key:"stopHandleEvent",value:function(){this.props.player.off("timeupdate",this.checkToStartMidroll)}},{key:"resumeHandleEvent",value:function(){this.stopHandleEvent();var t=this,e=this.props.player;e.one("timeupdate",function(){e.on("timeupdate",t.checkToStartMidroll)})}},{key:"handleStopOrResume",value:function(){this.midrollState_===S.IDLE?this.resumeHandleEvent():this.dispose()}},{key:"checkToStartMidroll",value:function(){this.midrollPrepare(),this.midrollCountDown()}},{key:"_handleGetVastResponse",value:function(t){this.midrollState_===S.PREPAIRING&&(this.vastResponse=t)}},{key:"_getVastResponse",value:function(){function t(t){r?c.initAd({player:i,skipoffset:o,adTagUrl:n,vastResponse:t,type:"midroll",preLoaded:r}):i.one(R.EVENT.AD_ORDER_START_MIDROLL,function(){c.initAd({player:i,skipoffset:o,adTagUrl:n,vastResponse:t,type:"midroll",preLoaded:r})})}var e=this.props,n=e.adTagUrl,o=e.skipoffset,i=e.player,r=e.preLoaded,s=e.vastResponse,a=e.infoAd,c=e.defaultAd,u=this;return s?(this._handleGetVastResponse(s),void t(s)):Promise.resolve().then(function(){return c.getVastRespone({adTagUrl:n,isPackageAds:a.isAddLinkSSP,player:i})}).then(function(e){u._handleGetVastResponse(e),t(e)}).catch(function(){u.dispose()})}},{key:"midrollPrepare",value:function(){var t=this.props,e=t.player,n=t.isCounting,o=t.checkAdStart,i=this;if(this.midrollState_===S.IDLE){var r=this.state.starttime;if(e.currentTime()+6>=r){if(n)return;if(o.currentTime>r&&o.adStart)return void this.dispose();n=!0,e.trigger("prepareMidrollVast",1),e.one("prepareMidrollVastSuccess",function(){i.prepareSuccess=!0}),this.midrollState_=S.PREPAIRING,this._getVastResponse()}}}},{key:"midrollCountDown",value:function(){var t=this.props,e=t.player,n=t.preLoaded;if(this.midrollState_===S.PREPAIRING&&this.vastResponse&&(!n||this.prepareSuccess)){var o=this.state.starttime,i=e.currentTime(),r=Math.round(o-i);r=r>=0&&r<=5?r:null,i>o&&(this.currentTime_=i,this.stopHandleEvent(),e.trigger(R.EVENT.AD_ORDER_START_MIDROLL,this.vastResponse)),0===r&&(this.midrollState_=S.RUNNING,this.currentTime_=i,this.stopHandleEvent(),e.trigger(R.EVENT.AD_ORDER_START_MIDROLL,this.vastResponse)),this.setState({timeToStart:r})}}},{key:"_startMidroll",value:function(){var t=this.props,e=t.skipoffset,n=t.player,o=t.defaultAd,i=void 0,r=void 0;if("string"==typeof this.vastResponse)i=this.vastResponse;else{if("object"!==b(this.vastResponse))return;r=this.vastResponse}o.initAd({player:n,skipoffset:e,adTagUrl:i,vastResponse:r,type:"midroll"})}},{key:"render",value:function(){var t=this.state,e=t.left,n=t.dispose,o=t.timeToStart;return n||o<=0||!e?null:h.createElement("div",null,h.createElement("div",{className:"midroll-marker",style:{left:e}}),"number"==typeof o?h.createElement("div",{className:"countdown-midroll"},"Qung co sau: ",h.createElement("span",null,o,"s")):"")}}]),e}(e.Component),p.propTypes={defaultAd:t.PropTypes.object.isRequired,player:t.PropTypes.object.isRequired,adTagUrl:t.PropTypes.string,checkAdStart:t.PropTypes.object,duration:t.PropTypes.number,infoAd:t.PropTypes.object,isCounting:t.PropTypes.bool,preLoaded:t.PropTypes.bool,rules:t.PropTypes.object,seconds:t.PropTypes.number,skipoffset:t.PropTypes.number,vastResponse:t.PropTypes.array},d=m,i(d.prototype,"stopHandleEvent",[t.autobind],Object.getOwnPropertyDescriptor(d.prototype,"stopHandleEvent"),d.prototype),i(d.prototype,"resumeHandleEvent",[t.autobind],Object.getOwnPropertyDescriptor(d.prototype,"resumeHandleEvent"),d.prototype),i(d.prototype,"handleStopOrResume",[t.autobind],Object.getOwnPropertyDescriptor(d.prototype,"handleStopOrResume"),d.prototype),i(d.prototype,"checkToStartMidroll",[t.autobind],Object.getOwnPropertyDescriptor(d.prototype,"checkToStartMidroll"),d.prototype),i(d.prototype,"midrollPrepare",[t.autobind],Object.getOwnPropertyDescriptor(d.prototype,"midrollPrepare"),d.prototype),i(d.prototype,"midrollCountDown",[t.autobind],Object.getOwnPropertyDescriptor(d.prototype,"midrollCountDown"),d.prototype),t.playerconfig.DEFAULT),M={IDLE:"IDLE",PREPAIRING:"PREPAIRING",RUNNING:"RUNNING",DISPOSE:"DISPOSE"},V=t.playerconfig.DEFAULT,z=(y=v=function(t){function e(t){k(this,e);var n=E(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));n.state={renderMidroll:!0,dispose:!1},n.isCounting=!1,n.checkAdStart={adStart:!1};var o=n.props.player;return o.on("preparePostrollVast",n._handleAdPostroll),o.on(V.EVENT.PLAYER_ENDED_CONTEND,n._handleEnded),o.on("player:reRenderAds",n._dispose),n}return _(e,t),g(e,[{key:"componentDidMount",value:function(){var t=this.props.player;t.on("durationchange",this._checkDuration),t.on("loadedmetadata",this._checkDuration),this._checkDuration()}},{key:"componentWillUnmount",value:function(){var t=this.props.player;t.off("durationchange",this._checkDuration),t.off("loadedmetadata",this._checkDuration)}},{key:"_dispose",value:function(){this.setState({dispose:!0})}},{key:"_checkDuration",value:function(){var t=this.props.player,e=t.duration();!e||e<40||Number.isNaN(e)||0===e||(t.off("loadedmetadata",this._checkDuration),t.off("durationchange",this._checkDuration),this.setState({duration:e}),this._updatePosition(e))}},{key:"_updatePosition",value:function(t){var e=this.props.infoAd,n=[];Object.keys(e).map(function(e){r(e,t)});for(var i in e){var s=e[i],a=s.skipoffset,c=s.tag,u=s.durationLogical,l=s.durationValue,h=s.repeat,d=s.repeatTime,p=s.vastResponse,m=r(i,t);if(o({duration:t,durationValue:l,durationLogical:u})&&(n.push([a,c,m,!0,p]),h))for(var f=m+d;f<t;f+=d)n.push([a,c,f,!1,p])}n.sort(function(t,e){return t[2]-e[2]}),this._sortAdsRule(n)}},{key:"_sortAdsRule",value:function(t){var e=this.props.rules,n=this.state.duration,o=e.timeBetweenAds||0,i=e.startOn||1,r=void 0;Q.havePreroll&&(r=o),t.map(function(e,s){if(e[2]<i)delete t[s];else if(0!==s||Q.havePreroll){if(e[2]<=r)return void delete t[s];if(t[s][3])r=e[2]+o;else if(void 0!==t[s+1])if(t[s+1][3]){if(t[s+1][2]-e[2]<o)return void delete t[s];r=e[2]+o}else r=e[2]+o;else if(Q.havePostroll&&n-e[2]<o)return void delete t[s]}else r=e[2]+o}),this.setState({sortInfoAd:t})}},{key:"_reRenderMidroll",value:function(){this.setState({renderMidroll:!0})}},{key:"_handleAdPostroll",value:function(){var t=this.props.player;t.off(V.EVENT.PLAYER_ENDED_CONTEND,this._handleEnded),t.one(V.EVENT.AD_END,this._handleEnded)}},{key:"_handleEnded",value:function(){var t=this.props.player;t.off("play",this._reRenderMidroll),t.one("play",this._reRenderMidroll),this.setState({renderMidroll:!1})}},{key:"render",value:function(){var t=this.props,e=t.player,n=t.preLoaded,o=(t.rules,t.defaultAd),i=t.infoAd,r=this,a=this.state,c=a.renderMidroll,u=a.duration,l=a.sortInfoAd,h=a.dispose;return c&&u&&l&&!h?(l.map(function(t){var a=t[0],c=t[1],l=t[2],h=t[4];s(e,o,c,r.checkAdStart,u,r.isCounting,n,0,l,a,h,i)}),null):null}}]),e}(e.Component),v.propTypes={defaultAd:t.PropTypes.object.isRequired,player:t.PropTypes.object.isRequired,infoAd:t.PropTypes.object,preLoaded:t.PropTypes.bool,rules:t.PropTypes.object},f=y,a(f.prototype,"_dispose",[t.autobind],Object.getOwnPropertyDescriptor(f.prototype,"_dispose"),f.prototype),a(f.prototype,"_checkDuration",[t.autobind],Object.getOwnPropertyDescriptor(f.prototype,"_checkDuration"),f.prototype),a(f.prototype,"_reRenderMidroll",[t.autobind],Object.getOwnPropertyDescriptor(f.prototype,"_reRenderMidroll"),f.prototype),a(f.prototype,"_handleAdPostroll",[t.autobind],Object.getOwnPropertyDescriptor(f.prototype,"_handleAdPostroll"),f.prototype),a(f.prototype,"_handleEnded",[t.autobind],Object.getOwnPropertyDescriptor(f.prototype,"_handleEnded"),f.prototype),f),N=function(e,n,o,i){var r=e.options(),s=r.params,a=r.plugins,c=!1;t.agent.isIOS||s.noAdsLoad||(c=!0),a.AdsPlayerPlugin||(c=!1);var u=h.createElement(z,{key:"MidrollDisplay",infoAd:n,player:e,rules:o,preLoaded:c,defaultAd:i});e.container.controlBar.addChild(u)},L=function(){function t(){k(this,t)}return g(t,null,[{key:"KENH14",get:function(){return"kenh14"}},{key:"SOHANEWS",get:function(){return"sohanews"}},{key:"AFAMILY",get:function(){return"afamily"}},{key:"CAFEF2",get:function(){return"cafef2"}},{key:"GENK",get:function(){return"genk"}},{key:"AUTOPRO",get:function(){return"autopro"}},{key:"SPORT5",get:function(){return"sport5"}},{key:"VTV",get:function(){return"vtv"}},{key:"CAFEBIZ",get:function(){return"cafebiz"}},{key:"NLD",get:function(){return"nld"}}]),t}();L[L.KENH14]=function(t,e){return"https://video.kenh14.vn/"+c(t)+"-"+e+".chn"},L[L.SOHANEWS]=function(t,e){return"https://soha.vn/video/"+c(t)+"-"+e+".htm"},L[L.AFAMILY]=function(t,e){return"https://video.afamily.vn/"+c(t)+"-"+e+".chn"},L[L.CAFEF2]=function(t,e){return"https://cafef.vn/videos/"+e+"-"+c(t)+".chn"},L[L.GENK]=function(t,e){return"https://genk.vn/video-"+e+"/"+c(t)+".chn"},L[L.AUTOPRO]=function(t,e){return"https://autopro.com.vn/video/video-"+e+".chn"},L[L.SPORT5]=function(t,e){return"https://sport5.vn/video/"+c(t)+"-"+e+".htm"},L[L.VTV]=function(t,e){return"https://vtv.vn/video/"+c(t)+"-"+e+".htm"},L[L.CAFEBIZ]=function(t,e){return"https://vtv.vn/video/"+c(t)+"-"+e+".chn"},L[L.NLD]=function(t,e){return"https://tv.nld.com.vn/"+c(t)+"-"+e+".htm"};var C=new(function(){function t(){k(this,t)}return g(t,[{key:"getLinkAds",value:function(t,e){var n=!1,o=-1,i="",r=-1,s=-1,a="",c="window";void 0!==window._chkPrLink&&(n=window._chkPrLink),void 0!==window.admtvcPgid&&(i=window.admtvcPgid());var u=[];u.dantri=5939,u.kenh14=5938,u.genk=5940,u.gamek=475198,u.afamily=5942,u.autopro=5944,u.cafef=5943,u.linkhay=5941,u.giadinh=5945,u[71]=2657,u.sohanews=5818,u.soha=5818,u.channelvn=2657,u.cafebiz=5943,u.vcmedia="vcmedia",u.thegioivanhoa=6703,u.phim14=7692,u["beta.autopro"]=5944,u.vtv=23260,u.ttvn=25438,u.thanhnien=37079,u.docbao=7493,u.thethaovanhoa=502991,u.anninhthudo=16834,u.bongda24h=32159,u.bongdanet=11227,u.laodong=10698,u.vtc=6300,u.tuoitre=488052,u.webtretho=501452,u.toquoc=512260,u.channelvn=5944,u.thethao247=514470,this.arrZoneIDMobile=u;var l=[];l.webtretho=501451,l.kenh14=2656,l.dantri=2657,l.autopro=2760,l.afamily=2763,l.genk=2658,l.gamek=475197,l.cafef=2661,l.cafebiz=2661,l.giadinh=2971,l.libero=4298,l.nld=2790,l.phapluattp=2787,l.phapluattp=2787,l.sannhac=2762,l.socnhi=3034,l.sohanews=2761,l.soha=2761,l.suckhoedoisong=2972,l.vneconomy=3385,l["beta.autopro"]=2760,l.vtv=6301,l.ttvn=25437,l.thanhnien=37079,l.docbao=7493,l.thethaovanhoa=502990,l.anninhthudo=16834,l.bongda24h=32159,l.bongdanet=11227,l.laodong=10698,l.ole=42329,l.go=42341,l.tintuc=42331,l.lichthidau=42334,l.docbaogiay=42337,l.vntinnhanh=42338,l.tuoitre=488051,l.ale=42340,l.bongda=42333,l.vtc=6300,l.sggp=475266,l.saigondautu=477879,l.sggpnews=477878,l.toquoc=512259,l.channelvn=5944,l.thethao247=514469,this.arrZoneID=l;var h=e.sspid||this.createZoneId(t),d="0;0;0;0",p=0,m=t.mediaInfo.domain,f=t.mediaInfo.vid,v=t.mediaInfo.pathname,y=void 0,k=void 0;s=e.position;var g=void 0;try{g=top.document.URL}catch(t){g=document.referrer?document.referrer:location.href}var j=!1;try{window.top!==window.self&&window.top.location!==window.self.location&&(j=!0)}catch(t){j=!0}if(void 0===v&&""==v&&(v=g.match(/(http[s]?:\/\/)?([^\s]+)(\/.*)/)[3]),j)try{m=g.match(/(http[s]?:\/\/)?([^\s]+)(\/.*)/)[2]}catch(t){m=location.ancestorOrigins[0]}if(void 0!==t.mediaInfo._admParamTvc&&""!=t.mediaInfo._admParamTvc&&(d=t.mediaInfo._admParamTvc),void 0!==t.mediaInfo.tag&&""!=t.mediaInfo.tag&&(p=t.mediaInfo.tag),void 0===t.mediaInfo.vid&&""==t.mediaInfo.vid&&(f=t.mediaInfo.file),t.mediaInfo.pid&&(o=t.mediaInfo.pid),void 0!=b(t.options().params.vtype)&&null!=t.options().params.vtype&&""!=t.options().params.vtype&&(r=t.options().params.vtype),t.mediaInfo.id&&t.mediaInfo.id>-1?L[t.mediaInfo.namespace]&&(a=L[t.mediaInfo.namespace](t.mediaInfo.title,t.mediaInfo.id)):a="",p&&void 0!==p||t.on("updateMediaInfo",function(){p=t.mediaInfo.tag}),d=d.split(";"),0==(k=d[0])&&(k=-1),0==n||567203==k)return c=this.getDeviceName(t.mediaInfo),0!=this.getQueryVariable("_bid")&&(k=this.getQueryVariable("_bid")),y=t.isAudio_?this.createLinkSppAudio({domain:m,pathname:v,zoneID:h,pgid:i,pid:o,tag:p,adstype:s,vtype:r,shareUrl:a,vid:f,bannerid:k,os:c}):this.createLinkSpp({domain:m,pathname:v,zoneID:h,pgid:i,pid:o,tag:p,adstype:s,vtype:r,shareUrl:a,vid:f,bannerid:k,os:c}),window.ADMStorageFileCDN&&window.ADMStorageFileCDN.ssp&&(y=y.replace(/sspapi.admicro.vn/g,window.ADMStorageFileCDN.ssp)),void 0!==t.mediaInfo.vast&&(y=decodeURIComponent(t.mediaInfo.vast)),encodeURIComponent(y)}},{key:"createZoneId",value:function(t){var e=location.hostname.replace("http://",""),n=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace("https://","")).replace("http://www.","")).replace("https://www.","")).replace(".com","")).replace(".vn","")).replace(".net","")).replace(".org","")).replace(".info","")).replace(".edu","")).split(".");return n.length>1&&(e=n[1]),t.mediaInfo.isMobile?this.arrZoneIDMobile[e]?this.arrZoneIDMobile[e]:"0":this.arrZoneID[e]?this.arrZoneID[e]:"0"}},{key:"createLinkSpp",value:function(t){var e=t.domain,n=t.pathname,o=t.zoneID,i=t.pgid,r=t.pid,s=t.tag,a=t.adstype,c=t.vtype,u=t.vid,l=t.bannerid,h=t.shareUrl;return"https://sspapi.admicro.vn/ssp_request/video?u="+encodeURIComponent(e+n)+"&z="+o+"&p=1&w=650&h=300"+i+"&pid="+r+"&tags="+s+"&adstype="+a+"&vtype="+c+"&uraw="+h+"&vid="+encodeURIComponent(u)+"&bannerlimit=5&bannerid="+l}},{key:"createLinkSppAudio",value:function(t){var e=t.domain,n=t.pathname,o=t.zoneID,i=t.pgid,r=t.pid,s=t.tag,a=t.adstype,c=t.vtype,u=t.shareUrl,l=t.os;return"https://sspapi.admicro.vn/ssp_request/audio?u="+encodeURIComponent(e+n)+"&zones="+o+i+"&pid="+r+"&tags="+s+"&adstype="+a+"&vtype="+c+"&refer="+u+"&os="+l+"&brandsafe=1"}},{key:"getDeviceName",value:function(t){return t.isAndroid?"android":t.isIOS?"ios":t.isLinux?"linux":"window"}},{key:"getQueryVariable",value:function(t){for(var e=window.location.search.substring(1).split("&"),n=0;n<e.length;n++){var o=e[n].split("=");if(o[0]==t)return o[1]}return!1}}]),t}()),x=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})},q={view:100,start:101,midpoint:102,firstQuartile:103,thirdQuartile:104,complete:105,mute:106,unmute:107,pause:108,rewind:109,resume:110,fullscreen:111,expand:112,collapse:113,close:114,click:115},U=function t(e,n){var o,i=[];for(o in e)if(e.hasOwnProperty(o)){var r=n?n+"["+o+"]":o,s=e[o];i.push(null!==s&&"object"===(void 0===s?"undefined":b(s))?t(s,r):encodeURIComponent(r)+"="+encodeURIComponent(s))}return i.join("&")},F=t.playerconfig.DEFAULT,H=function(t){function e(t){k(this,e);var n=E(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)),o=n.props,i=o.adRequest,r=o.ref,s=o.player;n.props.track_url=i.rules.log+"?";var a=i.advertising.adscheduleid,c=r?decodeURIComponent(r):document.referrer?document.referrer:location.href,u=document.location.href;/adminplayer\.sohatv\.vn/.test(u)&&(u=c),window.top!=window.self&&(u=c);var l=u.match(/(http[s]?:\/\/)?([^\s]+)(\/.*)/),h="-1";l&&l.length&&(h=l[2]);var d;return localStorage.hasOwnProperty("userId")?d=localStorage.getItem("userId"):(d=x(),localStorage.setItem("userId",d)),n.state={params:{zid:a,lsn:d,dmn:h,i:localStorage.userId}},n.track({cov:q.view}),n._handleAdStart=n._handleAdStart.bind(n),n._handleTrackQuartiles=n._handleTrackQuartiles.bind(n),n._handleTrackFullscreen=n._handleTrackFullscreen.bind(n),n._handlePauseAds=n._handlePauseAds.bind(n),n._handleResumeAds=n._handleResumeAds.bind(n),n._handleSkipAds=n._handleSkipAds.bind(n),n._handleVolumeAds=n._handleVolumeAds.bind(n),n._handleClickAds=n._handleClickAds.bind(n),n._handleEndContentAds=n._handleEndContentAds.bind(n),n._handleAdEnded=n._handleAdEnded.bind(n),s.on(F.EVENT.VAST_AD_START,n._handleAdStart),s.on(F.EVENT.VPAID_AD_START,n._handleAdStart),s.on(F.EVENT.AD_END,n._handleAdEnded),s.on(F.EVENT.AD_PAUSE_AD,n._handlePauseAds),s.on(F.EVENT.AD_RESUME_AD,n._handleResumeAds),s.on(F.EVENT.AD_SKIP,n._handleSkipAds),s.on(F.EVENT.VPAID_AD_SKIPPED,n._handleSkipAds),s.on(F.EVENT.VAST_AD_CLICK_THRU,n._handleClickAds),s.on(F.EVENT.VPAID_AD_CLICK_THRU,n._handleClickAds),n}return _(e,t),g(e,[{key:"_handleAdEnded",value:function(){var t=this.props.player;t.off("timeupdate",this._handleTrackQuartiles),t.off("fullscreenchange",this._handleTrackFullscreen),t.off("advolumechange",this._handleVolumeAds),t.off("advideoend",this._handleEndContentAds)}},{key:"_handleAdStart",value:function(){var t=this.props.player,e=this,o=document.getElementById(""+t.tech_.options_.techId),i=new n,r=[n.MeasurementTechniques.IntersectionObserver],s={inViewThreshold:.5,timeInView:2e3},a=n.Strategies.StrategyFactory(!0,r,s);i.measureElement(o,a).onViewableStart(function(){}).onViewableComplete(function(){e.track({cov:q.start})}),t.vastAd.adUnit().getAdDuration().then(function(t){e.setState({quartiles:{firstQuartile:{tracked:!1,time:Math.round(25*t*1e3)/100},midpoint:{tracked:!1,time:Math.round(50*t*1e3)/100},thirdQuartile:{tracked:!1,time:Math.round(75*t*1e3)/100}}})}),t.on("timeupdate",this._handleTrackQuartiles),t.on("fullscreenchange",this._handleTrackFullscreen),t.on("advolumechange",this._handleVolumeAds),t.one("advideoend",this._handleEndContentAds)}},{key:"_handleEndContentAds",value:function(){this.track({cov:q.complete})}},{key:"_handleVolumeAds",value:function(){var t=this.props.player,e=this,n=void 0;t.vastAd.adUnit().getAdVolume().then(function(o){"VAST"===t.vastAd.adUnit().type?o&&!t.muted()?n="unmute":(0===o||t.muted())&&(n="mute"):n=o?"unmute":"mute",e.track({cov:q[n]})})}},{key:"_handleClickAds",value:function(){this.track({cov:q.click})}},{key:"_handleSkipAds",value:function(){this.track({cov:q.close})}},{key:"_handlePauseAds",value:function(){this.track({cov:q.pause})}},{key:"_handleResumeAds",value:function(){this.track({cov:q.resume})}},{key:"_handleTrackFullscreen",value:function(){this.props.player.isFullscreen()&&this.track({cov:q.fullscreen})}},{key:"_canBeTracked",value:function(t,e){var n=t.time;return e>=n&&e<=n+5e3}},{key:"_trackQuartile",value:function(t,e){var n=this.state.quartiles[t];n.tracked||this._canBeTracked(n,e)&&(n.tracked=!0,this.track({cov:q[t]}))}},{key:"_handleTrackQuartiles",value:function(){var t=this.props.player,e=this.state.quartiles;if(e){var n=1e3*t.currentTime(),o=e.firstQuartile,i=e.midpoint,r=e.thirdQuartile;o.tracked||this._trackQuartile("firstQuartile",n),i.tracked||this._trackQuartile("midpoint",n),r.tracked||this._trackQuartile("thirdQuartile",n)}}},{key:"track",value:function(t){var e=this.state.params,n=this.props.track_url,o=j({},e,t),i=U(o);(new Image).src=n+i}}]),e}(t.Plugin),G=l.getComponent("Player"),B={PREROLL:"preroll",MIDROLL:"midroll",POSTROLL:"postroll"},Q=new(function(){function t(){k(this,t),this.havePreroll=!1,this.havePostroll=!1,this.rules={log:"https://lg1.logging.admicro.vn/tvccms",positionOnSite:"1",timeBetweenAds:0}}return g(t,[{key:"setDefaultAdVast",value:function(t){this.defaultAd_=t}},{key:"getInfoAd",value:function(t,e){this.player_=t,this.adRequest_=e,this.classifiedAds()}},{key:"classifiedAds",value:function(){var t=this.adRequest_,e=this.player_,n=t.advertising,o=t.rules;this.rules=o&&!e.mediaInfo.mids?o:this.rules,this.rules.isPackageAds=!0,window.ADMStorageFileCDN&&window.ADMStorageFileCDN.logging&&(this.rules.log=this.rules.log.replace(/lg1.logging.admicro.vn/g,window.ADMStorageFileCDN.logging)),new H({player:e,adRequest:t}),n=this.checkPointMidroll(n),this.scheduleAds(n.schedule)}},{key:"checkPointMidroll",value:function(t){var e=this.player_.mediaInfo.mids;if(!e)return t;e=e.match(/-?\d*\.?\d+/g).map(Number);var n;return Object.keys(t.schedule).map(function(e){n||(n=Object.assign(t.schedule[e])),"number"==typeof t.schedule[e].offset&&delete t.schedule[e]}),e.map(function(e){t.schedule[e]=JSON.parse(JSON.stringify(n)),t.schedule[e].offset=e,delete t.schedule[e].durationLogical,delete t.schedule[e].durationValue}),t}},{key:"scheduleAds",value:function(t){var e=this.player_,n=void 0,o=void 0,i={},r=0,s=this;for(var a in t){var c=t[a],u=c.sspid,l=c.isAddLinkSSP;if("start"===t[a].offset)(n=t[a]).tag=n.tag+this.createTagMacros({position:r,isAddLinkSSP:l,sspid:u,evtType:"preroll"});else if("end"===t[a].offset)(o=t[a]).tag=o.tag+this.createTagMacros({position:r,isAddLinkSSP:l,sspid:u,evtType:"postroll"});else{i[t[a].offset]={};var h=t[a],d=h.tag,p=h.skipoffset,m=h.repeat,f=h.repeatTime,v=h.durationLogical,y=h.durationValue,b=h.sspid;d+=this.createTagMacros({position:r,isAddLinkSSP:l,sspid:b,evtType:"midroll"}),i[t[a].offset]={tag:d,skipoffset:p,repeatTime:f,repeat:m,durationLogical:v,durationValue:y}}r++}s._createPreroll(e,n,!0),s._createMidroll(e,i),s._createPostroll(e,o)}},{key:"createTagMacros",value:function(t){var e=this.player_,n=e.mediaInfo.domain,o=e.mediaInfo.pathname,i=t.isAddLinkSSP,r=t.position,s=t.sspid,a=t.evtType;void 0===e.mediaInfo.domain&&""==e.mediaInfo.domain&&(n=location.hostname),void 0===e.mediaInfo.pathname&&""==e.mediaInfo.pathname&&(o=location.pathname);var c=C.getLinkAds(e,{position:r,sspid:s,evtType:a});i||(c="");var u=void 0===window._ADM_Channel?"":window._ADM_Channel;return"&domain="+encodeURIComponent(n+o)+"&link="+c+"&category="+u+this._admtvcPgid()}},{key:"_admtvcPgid",value:function(){try{var t=!1;"undefined"!=typeof _ADM_Channel&&-1!=window._ADM_Channel.indexOf("detail")&&(t=!0);var e=document.location.pathname;if(!t&&55<e.length&&(t=!0),void 0!==window.ADS_CHECKER){var n=window.ADS_CHECKER.getCookie("__RC");return n=""!=n&&101<parseInt(n)?101:n,"&pgid="+window.__admloadPageId+"&dgid="+window.__admloadPageIdc+"&l="+n+"&loc="+n+"&uid="+window.ADM_AdsTracking.get("__uid")+"&isdetail="+(t?"1":"0")}if("undefined"!=typeof ADM_CHECKER)return n=window.ADM_CHECKER.getCookie("__RC"),n=""!=n&&101<parseInt(n)?101:n,"&pgid="+window.__m_admPageloadid+"&dgid="+window.__admloadPageRdIdc+"&l="+n+"&loc="+n+"&uid="+window.ADM_CHECKER.__uid+"&isdetail="+(t?"1":"0")}catch(t){return""}}},{key:"_createPreroll",value:function(t,e,n){if(e&&!t.options().params.nopre){var i=e.durationValue,r=e.durationLogical;!o({duration:t.duration(),durationValue:i,durationLogical:r})&&n||(this.havePreroll=!0,w(t,e,this.rules,this.defaultAd_))}}},{key:"_createMidroll",value:function(t,e){var n=this,o=this,i=t.options().params.preLoadVast;if(Object.keys(e).length){var r=[];if(i){for(var s in e)e[s].offset=s,r.push(this._getVastResponse(e[s]));return Promise.all(r.map(function(t){return t.catch(function(){return[]})})).then(function(e){var i={};if(e.length){if(e.map(function(t){void 0!==t&&(i[t.offset]=t)}),!Object.keys(i).length||0===Object.keys(i).length)return;N(t,i,n.rules,o.defaultAd_)}})}N(t,e,this.rules,o.defaultAd_)}}},{key:"_getVastResponse",value:function(t){var e=this;return Promise.resolve().then(function(){return e.defaultAd_.getVastRespone({adTagUrl:t.tag,isPackageAds:e.rules.isPackageAds,player:e.player_})}).then(function(e){return t.vastResponse=e,t}).catch(function(){})}},{key:"_createPostroll",value:function(t,e){var n=this,o=this,i=t.options().params,r=i.preLoadVast,s=i.postroll;if(e&&s)return this.havePostroll=!0,r?this.defaultAd_.getVastRespone({adTagUrl:e.tag,isPackageAds:this.rules.isPackageAds,player:t}).then(function(i){P(t,e,o.defaultAd_,{rules:n.rules,vastResponse:i})}).catch(function(){}):P(t,e,o.defaultAd_,{rules:this.rules,vastResponse:void 0})}},{key:"createDefaultAds",value:function(t){var e=t.options().params,n=e.ima,o=e.vast,i=e.midroll,r={durationLogical:">=",durationValue:"20",skipoffset:0,tag:o||n},s=this;this.rules.isPackageAds=!1;var a=r,c=r;a.tag=this._getVastInAdmicro(t,{type:B.PREROLL,position:0}),c.tag=this._getVastInAdmicro(t,{type:B.POSTROLL,position:10}),this._createPreroll(t,a,!1),this._createPostroll(t,c);var u={};if(i){if("string"==typeof i){var l=i.match(/(0\.\d+)/g),h=i.match(/(\d+)(?=s)/g);for(i=[];l&&l.length;){var d=l.shift();i.push({position:d})}for(;h&&h.length;){var p=h.shift();i.push({position:p})}}if(!i.length)return null;i.map(function(e){r.tag=s._getVastInAdmicro(t,{type:B.MIDROLL}),u[e.position]=r}),this._createMidroll(t,u)}}},{key:"_getVastInAdmicro",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.options().params;return G.prototype.kinghubAdmicroADSPlugin?G.prototype.kinghubAdmicroADSPlugin.call(t,e):n.vast?n.vast:void 0}}]),t}()),W=function(t){var e=t.player,n=t.domain,o=[{domain:"nguoiduatin.vn",pc:"https://static.sourcetobin.com/cms/arf-www.nguoiduatin.vn-kg95kv3g-kg95nowe.json",mb:"https://static.sourcetobin.com/cms/arf-m.nguoiduatin.vn-kg95lib7-kg95mz4l.json"},{domain:"danviet.vn",pc:"https://static.sourcetobin.com/cms/arf-danviet.vn-kfdh5tyf-kfdh7wux.json",mb:"https://static.sourcetobin.com/cms/arf-danviet.vn-kfdh5tyf-kfdh9no5.json"},{domain:"beta.nguoiduatin.vn",pc:"https://static.sourcetobin.com/cms/arf-nguoiduatin.vn-kdsi223r-kdsi4cgu.json",mb:"https://static.sourcetobin.com/cms/arf-nguoiduatin.vn-kdsi223r-ke18bi24.json"},{domain:"autopro.com.vn",pc:"https://static.contineljs.com/cms/arf-autopro.com.vn-jqp0j9py-1.json",mb:"https://static.contineljs.com/cms/arf-autopro.com.vn-jqp0j9py-2.json"},{domain:"genk.vn",pc:"https://static.contineljs.com/cms/arf-genk.vn-judhsgoi-1.json",mb:"https://static.contineljs.com/cms/arf-genk.vn-judhsgoi-2.json"},{domain:"gamek.vn",pc:"https://static.contineljs.com/cms/arf-gamek.vn-judhswul-1.json",mb:"https://static.contineljs.com/cms/arf-gamek.vn-judhswul-2.json"},{domain:"kenh14.vn",pc:"https://static.sourcetobin.com/cms/arf-kenh14.vn-k3nrhg9h-1.json",mb:"https://static.sourcetobin.com/cms/arf-kenh14.vn-k3nrhg9h-2.json"},{domain:"soha.vn",pc:"https://static.contineljs.com/cms/arf-soha.vn-k3nri53c-1.json",mb:"https://static.contineljs.com/cms/arf-soha.vn-k3nri53c-2.json"},{domain:"cafef.vn",pc:"https://static.contineljs.com/cms/arf-cafef.vn-k3nrjeki-1.json",mb:"https://static.contineljs.com/cms/arf-cafef.vn-k3nrjeki-2.json"},{domain:"cafebiz.vn",pc:"https://static.contineljs.com/cms/arf-cafebiz.vn-k3jjoi4o-1.json",mb:"https://static.contineljs.com/cms/arf-cafebiz.vn-k3jjoi4o-2.json"},{domain:"afamily.vn",pc:"https://static.contineljs.com/cms/arf-afamily.vn-k3nrk7yw-1.json",mb:"https://static.contineljs.com/cms/arf-afamily.vn-k3nrk7yw-2.json"},{domain:"vtv.vn",pc:"https://static.contineljs.com/cms/arf-vtv.vn-k7nixzek-1.json",mb:"https://static.contineljs.com/cms/arf-vtv.vn-k7nixzek-2.json"},{domain:"nld.com.vn",pc:"https://static.contineljs.com/cms/arf-nld.com.vn-k7nizl6n-1.json",mb:"https://static.contineljs.com/cms/arf-nld.com.vn-k7nizl6n-2.json"},{domain:"giadinh.net.vn",pc:"https://static.contineljs.com/cms/arf-giadinh.net.vn-k7nj1734-1.json",mb:"https://static.contineljs.com/cms/arf-giadinh.net.vn-k7nj1734-2.json"},{domain:"thethaovanhoa.vn",pc:"https://static.contineljs.com/cms/arf-thethaovanhoa.vn-juwc8z6a-k3txyr2z.json",mb:"https://static.contineljs.com/cms/arf-thethaovanhoa.vn-juwc8z6a-k3txyr2z.json"}],i=[{domain:"soha.vn",pc:"https://static.contineljs.com/cms/arf-soha.vn-k3nri53c-ky5brbz3.json",mb:"https://static.contineljs.com/cms/arf-soha.vn-k3nri53c-ky5cmpv9.json"},{domain:"autopro.com.vn",pc:"https://static.contineljs.com/cms/arf-autopro.com.vn-jqp0j9py-ky5btlz1.json",mb:"https://static.contineljs.com/cms/arf-autopro.com.vn-jqp0j9py-ky5cpcri.json"},{domain:"cafef.vn",pc:"https://static.contineljs.com/cms/arf-cafef.vn-k3nrjeki-ky5bv977.json",mb:"https://static.contineljs.com/cms/arf-cafef.vn-k3nrjeki-ky5cq88r.json"},{domain:"kenh14.vn",pc:"https://static.contineljs.com/cms/arf-kenh14.vn-k3nrhg9h-ky5c1l9k.json",mb:"https://static.contineljs.com/cms/arf-kenh14.vn-k3nrhg9h-ky5cr32r.json"},{domain:"afamily.vn",pc:"https://static.contineljs.com/cms/arf-afamily.vn-k3nrk7yw-ky5c2b61.json",mb:"https://static.contineljs.com/cms/arf-afamily.vn-k3nrk7yw-ky5crusg.json"},{domain:"genk.vn",pc:"https://static.contineljs.com/cms/arf-genk.vn-judhsgoi-ky5c5bqw.json",mb:"https://static.contineljs.com/cms/arf-genk.vn-judhsgoi-ky5d0h68.json"},{domain:"cafebiz.vn",pc:"https://static.contineljs.com/cms/arf-cafebiz.vn-k3jjoi4o-ky5c6t05.json",mb:"https://static.contineljs.com/cms/arf-cafebiz.vn-k3jjoi4o-ky5d17ie.json"},{domain:"giadinh.net.vn",pc:"https://static.contineljs.com/cms/arf-giadinh.net.vn-k7nj1734-ky5c987v.json",mb:"https://static.contineljs.com/cms/arf-giadinh.net.vn-k7nj1734-ky5d1z4a.json"},{domain:"truyenhinhthanhhoa.vn",pc:"https://media1.admicro.vn/cms/arf-truyenhinhthanhhoa.vn-l9rx8u9v-l9rxabkb.json",mb:"https://media1.admicro.vn/cms/arf-truyenhinhthanhhoa.vn-l9rx8u9v-l9rx9sfh.json"},{domain:"vtv.vn",pc:"https://media1.admicro.vn/cms/arf-vtv.vn-k7nixzek-l9rwusek.json",mb:"https://media1.admicro.vn/cms/arf-vtv.vn-k7nixzek-l9rx07th.json"},{domain:"giadinh.suckhoedoisong.vn",pc:"https://media1.admicro.vn/cms/arf-giadinh.net.vn-k7nj1734-ky5c987v.json",mb:"https://media1.admicro.vn/cms/arf-giadinh.net.vn-k7nj1734-ky5d1z4a.json"},{domain:"tapchigiaothong.vn",pc:"https://media1.admicro.vn/cms/arf-tapchigiaothong.vn-lb601e5v-lb6034dc.json",mb:"https://media1.admicro.vn/cms/arf-tapchigiaothong.vn-lb601e5v-lb606xev.json"},{domain:"doanhnghieptiepthi.vn",pc:"https://media1.admicro.vn/cms/arf-doanhnghieptiepthi.vn-lb680pri-lb6814dd.json",mb:"https://media1.admicro.vn/cms/arf-doanhnghieptiepthi.vn-lb680pri-lb6824o4.json"},{domain:"nhandaovtv.vn",pc:"https://media1.admicro.vn/cms/arf-nhandaovtv.vn-lb682lyn-lb6830kn.json",mb:"https://media1.admicro.vn/cms/arf-nhandaovtv.vn-lb682lyn-lb683d9k.json"},{domain:"truyenhinhvov.vn",pc:"https://media1.admicro.vn/cms/arf-truyenhinhvov.vn-lb683usf-lb68491n.json",mb:"https://media1.admicro.vn/cms/arf-truyenhinhvov.vn-lb683usf-lb684ogp.json"}];if("AudioPlayer,audioTransPlayer,audioSwitchVoicePlayer,audioPodcastPlayer".indexOf("audioSwitchVoicePlayer")>=0){var r=i.find(function(t){return"vtv.vn"==n&&"vtv.vn"==t?t:"nhandaovtv.vn"==n&&"nhandaovtv.vn"==t?t:n.search(t.domain)>=0});return void 0===r?null:e.mediaInfo.isMobile?r.mb:r.pc}var s=o.find(function(t){return"nguoiduatin.vn"==n&&"nguoiduatin.vn"==t?t:"beta.nguoiduatin.vn"==n&&"beta.nguoiduatin.vn"==t?t:n.search(t.domain)>=0});return void 0===s?null:e.mediaInfo.isMobile?s.mb:s.pc},Y=function(t){var e=t.player,n=t.channel,o=[{path:"thoi-su",pc:"https://static.contineljs.com/cms/arf-thanhnien.vn-k7nj1yv7-k7um6lyz.json",mb:"https://static.contineljs.com/cms/arf-thanhnien.vn-k7nj1yv7-k7unovg0.json"},{path:"the-gioi",pc:"https://static.contineljs.com/cms/arf-thanhnien.vn-k7nj1yv7-k7un6kpt.json",mb:"https://static.contineljs.com/cms/arf-thanhnien.vn-k7nj1yv7-k7unpb8p.json"},{path:"tai-chinh-kinh-doanh",pc:"https://static.contineljs.com/cms/arf-thanhnien.vn-k7nj1yv7-k7um9tak.json",mb:"https://static.contineljs.com/cms/arf-thanhnien.vn-k7nj1yv7-k7unpzb9.json"},{path:"kinh-doanh",pc:"https://static.contineljs.com/cms/arf-thanhnien.vn-k7nj1yv7-k7um9tak.json",mb:"https://static.contineljs.com/cms/arf-thanhnien.vn-k7nj1yv7-k7unpzb9.json"},{path:"doi-song",pc:"https://static.contineljs.com/cms/arf-thanhnien.vn-k7nj1yv7-k7umbxt3.json",mb:"https://static.contineljs.com/cms/arf-thanhnien.vn-k7nj1yv7-k7unr9ts.json"},{path:"van-hoa",pc:"https://static.contineljs.com/cms/arf-thanhnien.vn-k7nj1yv7-k7umee7w.json",mb:"https://static.contineljs.com/cms/arf-thanhnien.vn-k7nj1yv7-k7unrksu.json"},{path:"gioi-tre",pc:"https://static.contineljs.com/cms/arf-thanhnien.vn-k7nj1yv7-k7un7zi2.json",mb:"https://static.contineljs.com/cms/arf-thanhnien.vn-k7nj1yv7-k7unrzhr.json"},{path:"giao-duc",pc:"https://static.contineljs.com/cms/arf-thanhnien.vn-k7nj1yv7-k7un8mqs.json",mb:"https://static.contineljs.com/cms/arf-thanhnien.vn-k7nj1yv7-k7unsd1n.json"},{path:"the-thao",pc:"https://static.contineljs.com/cms/arf-thanhnien.vn-k7nj1yv7-k7una4uh.json",mb:"https://static.contineljs.com/cms/arf-thanhnien.vn-k7nj1yv7-k7unsrp1.json"},{path:"suc-khoe",pc:"https://static.contineljs.com/cms/arf-thanhnien.vn-k7nj1yv7-k7unats1.json",mb:"https://static.contineljs.com/cms/arf-thanhnien.vn-k7nj1yv7-k7unt5y0.json"},{path:"cong-nghe",pc:"https://static.contineljs.com/cms/arf-thanhnien.vn-k7nj1yv7-k7unbg70.json",mb:"https://static.contineljs.com/cms/arf-thanhnien.vn-k7nj1yv7-k7unth2c.json"},{path:"xe",pc:"https://static.contineljs.com/cms/arf-thanhnien.vn-k7nj1yv7-k7unc337.json",mb:"https://static.contineljs.com/cms/arf-thanhnien.vn-k7nj1yv7-k7untsye.json"},{path:"game",pc:"https://static.contineljs.com/cms/arf-thanhnien.vn-k7nj1yv7-k7uncp90.json",mb:"https://static.contineljs.com/cms/arf-thanhnien.vn-k7nj1yv7-k7unu418.json"},{path:"toi-viet",pc:"https://static.contineljs.com/cms/arf-thanhnien.vn-k7nj1yv7-k7und9v4.json",mb:"https://static.contineljs.com/cms/arf-thanhnien.vn-k7nj1yv7-k7unuh63.json"},{path:"chinh-tri",pc:"https://static.contineljs.com/cms/arf-thanhnien.vn-k7nj1yv7-k7une3en.json",mb:"https://static.contineljs.com/cms/arf-thanhnien.vn-k7nj1yv7-k7unutw4.json"},{path:"e-magazine",pc:"https://static.contineljs.com/cms/arf-thanhnien.vn-k7nj1yv7-k7ung3jn.json",mb:"https://static.contineljs.com/cms/arf-thanhnien.vn-k7nj1yv7-k7unnod0.json"},{path:"magazine",pc:"https://static.contineljs.com/cms/arf-thanhnien.vn-k7nj1yv7-k7unewre.json",mb:"https://static.contineljs.com/cms/arf-thanhnien.vn-k7nj1yv7-k7unmgpn.json"},{path:"du-lich",pc:"https://media1.admicro.vn/cms/arf-thanhnien.vn-k7nj1yv7-ke9fa5ly.json",mb:"https://media1.admicro.vn/cms/arf-thanhnien.vn-k7nj1yv7-ke9fawek.json"},{path:"giai-tri",pc:"https://media1.admicro.vn/cms/arf-thanhnien.vn-k7nj1yv7-ke9f7jvn.json",mb:"https://media1.admicro.vn/cms/arf-thanhnien.vn-k7nj1yv7-ke9f9d77.json"},{path:"video",pc:"https://static.contineljs.com/cms/arf-thanhnien.vn-k7nj1yv7-k7um2iwk.json",mb:"https://static.contineljs.com/cms/arf-thanhnien.vn-k7nj1yv7-k7unojvi.json"}].find(function(t){if(n){var e=n.split("/");if(e[1])return e[1].search(t.path)>=0}});return void 0===o&&(o={path:"",pc:"https://static.contineljs.com/cms/arf-thanhnien.vn-k7nj1yv7-k7ultuac.json",mb:"https://static.contineljs.com/cms/arf-thanhnien.vn-k7nj1yv7-k7uno6uc.json"}),e.mediaInfo.isMobile?o.mb:o.pc},K=function(t){var e=t.domain,n=t.player,o=t.channel,i=[{channel:"home",pc:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9uszbrl.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9uuovr3.json"},{channel:"binh-duong",pc:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9ut5hr2.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9uupvep.json"},{channel:"ban-doc-lam-bao",pc:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9ut68sk.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9uuqddk.json"},{channel:"can-biet",pc:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9ut6y1x.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9uurcev.json"},{channel:"cong-nghe",pc:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9ut7onl.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9v38e74.json"},{channel:"du-lich",pc:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9ut8bup.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9uuruu0.json"},{channel:"gia-that",pc:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9ut9lco.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9uusjd3.json"},{channel:"giai-tri",pc:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9utabo2.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9uutd8b.json"},{channel:"giao-duc",pc:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9utj6an.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9uutvbx.json"},{channel:"khoa-hoc",pc:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9utk6vv.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9uuuejm.json"},{channel:"kinh-doanh",pc:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9utmmrx.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9uuuux5.json"},{channel:"video",pc:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9utowf3.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9uuvkj7.json"},{channel:"media",pc:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9utowf3.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9uuvkj7.json"},{channel:"mekong-xanh",pc:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9utqe9v.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9uuw6oa.json"},{channel:"nha-dat",pc:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9utt383.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9uuy6q9.json"},{channel:"nhip-song-tre",pc:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9utv1ph.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9uuytxj.json"},{channel:"phap-luat",pc:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9utvq99.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9uuzggh.json"},{channel:"search",pc:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9utxi8x.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9uv001j.json"},{channel:"suc-khoe",pc:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9uty8nk.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9uv0hez.json"},{channel:"the-gioi",pc:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9utz1oj.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9uv0yth.json"},{channel:"the-thao",pc:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9utzyrv.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9uv7k8a.json"},{channel:"thoi-su",pc:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9uu0qh3.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9uv8kid.json"},{channel:"thu-gian",pc:"https://static.contineljs.com/cms/arf-thanhnien.vn-k7nj1yv7-k9uubko7.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9uva54a.json"},{channel:"tuyen-sinh",pc:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9uufbsx.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9uvanp1.json"},{channel:"van-hoa",pc:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9uug9ii.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9uvhz3m.json"},{channel:"xe",pc:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9uuh8d4.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9uvik5g.json"}];"video.tuoitre.vn"==e?i=[{channel:"home",pc:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9860pp3.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k98855nv.json"},{channel:"tin-nong/tin-nong-24h",pc:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9862xgh.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k987up1o.json"},{channel:"tin-nong-24h",pc:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9862xgh.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k987up1o.json"},{channel:"channel/tin-nong-24h-40",pc:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9862xgh.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k987up1o.json"},{channel:"giai-tri/giai-tri-24h",pc:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9869e4h.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k987wkfo.json"},{channel:"giai-tri-24h",pc:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9869e4h.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k987wkfo.json"},{channel:"tin-nong",pc:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k986afg3.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k987yuki.json"},{channel:"dac-sac",pc:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k986beya.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k987zbh4.json"},{channel:"the-gioi-muon-mau",pc:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k986c8l0.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k987zwdi.json"},{channel:"doi-thuong",pc:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k986d34u.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9880ef7.json"},{channel:"ban-co-biet",pc:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k986dwcd.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9880w20.json"},{channel:"the-thao",pc:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k986ew1m.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9882az7.json"},{channel:"giai-tri",pc:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k986g7ci.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9882t6c.json"},{channel:"hai-huoc",pc:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k986hdtf.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9883wk4.json"},{channel:"goc-nhin-trua-nay",pc:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-kqszeq8i.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-kqszhi7w.json"},{channel:"dep",pc:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-kqszj8z5.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-kqszkaev.json"},{channel:"30s-nong",pc:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-kqszlqpm.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-kqszmp1z.json"},{channel:"kham-pha-truong-hoc",pc:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-kqszo2wb.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-kqszoxus.json"}]:"cuoi.tuoitre.vn"==e?i=[{channel:"biem-hoa",pc:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k986rmkm.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9884le7.json"},{channel:"home",pc:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k986sayg.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k987suyb.json"},{channel:"tin-tuc",pc:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k986tefp.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9885xtl.json"},{channel:"doi-cuoi",pc:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k986usph.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9886yux.json"},{channel:"giai-tri",pc:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k987er4n.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9887nmp.json"},{channel:"truyen-tranh",pc:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k987ffva.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9888au4.json"},{channel:"zoi-tre",pc:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k987giym.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9888pzt.json"},{channel:"video",pc:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k986u4p7.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9886fp4.json"},{channel:"post-video",pc:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k986u4p7.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9886fp4.json"}]:"quangcao.tuoitre.vn"==e&&(i=[{channel:"undefined",pc:null,mb:null}]);var r=i.find(function(t){return o.search(t.channel)>=0});if(void 0===r)switch(e){case"tuoitre.vn":r={path:"/",pc:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9uszbrl.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9uuovr3.json"};break;case"video.tuoitre.vn":r={path:"/",pc:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9860pp3.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k98855nv.json"};break;case"cuoi.tuoitre.vn":r={path:"/",pc:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k986sayg.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k987suyb.json"};break;default:r={path:"/",pc:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9uszbrl.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9uuovr3.json"}}return n.mediaInfo.isMobile?r.mb:r.pc},Z=function(){function e(t){k(this,e),this.player=t}return g(e,[{key:"initAd",value:function(t){var e=t.player,n=t.adTagUrl,o=t.adTagXML,i=t.vastResponse,r=t.ima,s=t.type,a=t.skipoffset,c=t.preLoaded,u=this,l=e.play,h=!1;e.play=function(){h||(h=!0,e.play=l,u._initAd({player:e,adTagUrl:n,adTagXML:o,vastResponse:i,ima:r,type:s,skipoffset:a,preLoaded:c}))},e.play()}},{key:"_initAd",value:function(e){var n=e.player,o=e.adTagUrl,i=e.adTagXML,r=e.vastResponse,s=e.ima,a=e.type,c=e.skipoffset,u=e.preLoaded;n.vastAd||new t.Vast({player:n,adTagUrl:o,adTagXML:i,vastResponse:r,ima:s,type:a,skipoffset:c,preLoaded:u})}},{key:"getVastRespone",value:function(e){var n=e.adTagUrl,o=e.adTagXML,i=e.isPackageAds,r=e.player;return t.Vast.getVASTResponse({adTagUrl:n,adTagXML:o,isPackageAds:i,player:r})}}]),e}();l.registerPlugin("adsVastPlugin",function(){function e(t,e){r.isAudio_&&Q.getInfoAd(r,t),t&&e&&p&&Q.getInfoAd(r,t)}function n(){var t=r.duration();t&&(r.off("durationchange",n),e(a,c=t))}function o(){l.indexOf("a21.cnnd.vn")>=0&&r.isAudio()&&(u="https://media1.admicro.vn/cms/arf-autopro.com.vn-jqp0j9py-kufm723g.json",p=!0),f.vast||f.ima?Q.createDefaultAds(r):u&&!d&&(i.vid&&i.vid.split(/[\s,]+/).includes(r.options().params.vid)||A({url:u,method:"GET"}).then(function(n){t.agent.isFireFox&&(n=n.replace(/lg1.logging.admicro.vn/g,"contineljs.com")),window.ADMStorageFileCDN&&window.ADMStorageFileCDN.logging&&(n=n.replace(/lg1.logging.admicro.vn/g,window.ADMStorageFileCDN.logging)),e(a=JSON.parse(n),c)}))}var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=this,s=new Z(r),a=void 0,c=void 0,u=void 0,l=void 0,h=void 0,d=!1,p=!1,m="",f=r.options().params;Q.setDefaultAdVast(s),l=r.mediaInfo.domain,h=r.mediaInfo.pathname;var v=void 0;try{v=top.document.URL}catch(t){v=document.referrer?document.referrer:location.href}var y=!1;try{window.top!==window.self&&window.top.location!==window.self.location&&(y=!0)}catch(t){y=!0}if(void 0===h&&""==h)try{h=top.document.URL}catch(t){h=v.match(/(http[s]?:\/\/)?([^\s]+)(\/.*)/)[3]}if(y)try{l=v.match(/(http[s]?:\/\/)?([^\s]+)(\/.*)/)[2]}catch(t){l=location.ancestorOrigins[0]}try{void 0!==window._chkPrLink&&(d=top._chkPrLink)}catch(t){}if(!1!==f.ads){try{m=y?decodeURIComponent(top._ADM_Channel):decodeURIComponent(window._ADM_Channel)}catch(t){m=""}if(!(["dan-viet/dan-viet-tro-chuyen"].filter(function(t){return m.search(t)>=0}).length>0)){if(u=l.indexOf("tuoitre.vn")>=0?K({domain:l,channel:m,player:r}):l.indexOf("thanhnien.vn")>=0?Y({channel:m,player:r}):W({domain:l,player:r,channel:m}),r.one("updateMediaInfo",function(){p=!0;var t=r.duration();e(a,t)}),r.on("durationchange",n),i.jsonAd)return a=JSON.parse(i.jsonAd),void e(a,c);i.urlAd?A({url:i.urlAd,method:"GET"}).then(function(n){t.agent.isFireFox&&(n=n.replace(/lg1.logging.admicro.vn/g,"contineljs.com")),window.ADMStorageFileCDN&&window.ADMStorageFileCDN.logging&&(n=n.replace(/lg1.logging.admicro.vn/g,window.ADMStorageFileCDN.logging)),e(a=JSON.parse(n),c)}):(r.on("player:reRenderAds",o),i.nonPreload?r.one("play",o):r.one("ready",o))}}})})}();/**
 * AdsPlayerPlugin - v1.4.7 - 10:03:08 24-08-2023
 * Author: tungtm
 */

!function(){var e=void 0;this.vcReact=this.vcReact?this.vcReact:this.React,function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(require("playercore"),require("react")):"function"==typeof e&&e.amd?e(["playercore","react"],n):n(t.audioSwitchVoicePlayerCore,t.vcReact)}(this,function(e,t){"use strict";function n(e,t){t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null}function r(){}function i(e){return null===e}function a(e){return void 0!==e}function o(e){return"object"===(void 0===e?"undefined":de(e))}function s(e){return"function"==typeof e}function u(e){return"number"==typeof e}function l(e){return"[object Array]"===Object.prototype.toString.call(e)}function c(e){return"string"==typeof e}function d(e){return c(e)&&0===e.length}function p(e){return c(e)&&0!==e.length}function f(e){return Array.prototype.slice.call(e)}function h(e,t,n){var r,i;if(e)if(s(e))for(r in e)"prototype"===r||"length"===r||"name"===r||e.hasOwnProperty&&!e.hasOwnProperty(r)||t.call(n,e[r],r,e);else if(l(e)){var a="object"!==(void 0===e?"undefined":de(e));for(r=0,i=e.length;r<i;r++)(a||r in e)&&t.call(n,e[r],r,e)}else if(e.forEach&&e.forEach!==h)e.forEach(t,n,e);else for(r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r,e);return e}function v(e){var t,n,r;for(n=1;n<arguments.length;n++){t=arguments[n];for(r in t)t.hasOwnProperty(r)&&(o(e[r])&&!i(e[r])&&o(t[r])?e[r]=v({},e[r],t[r]):e[r]=t[r])}return e}function g(e){return e.charAt(0).toUpperCase()+e.slice(1)}function y(e){return e.charAt(0).toLowerCase()+e.slice(1)}function _(e,t){var n=[];return e.forEach(function(e,r){var i=t(e,r);a(i)&&n.push(i)}),n}function A(e,t){var n=e+"";if(t=u(t)?t:0,e=u(e)?e:parseInt(e,10),u(e)&&!isNaN(e)){for(n=e+"";n.length<t;)n="0"+n;return n}return"NaN"}function m(e,t){var n=(new Date).getTime()-(t+1);return function(){var r=(new Date).getTime();r-n>=t&&(n=r,e.apply(this,arguments))}}function E(e){return u(e)&&(e+=""),!!c(e)&&me.test(e.trim())}function k(){var e=T(navigator);return-1!==e&&e<10}function T(e){var t=-1;if("Microsoft Internet Explorer"==e.appName){var n=e.userAgent,r=new RegExp("MSIE ([0-9]{1,}\\.[0-9]{0,})").exec(n);null!==r&&(t=parseFloat(r[1]))}return t}function V(){}function S(e,t,n){var r=document.createElement("iframe");return r.src=t||"about:blank",r.marginWidth="0",r.marginHeight="0",r.frameBorder="0",r.width="100%",r.height="100%",R(r),n&&(r.style.zIndex=n),r.setAttribute("SCROLLING","NO"),e.innerHTML="",e.appendChild(r),r}function R(e){e&&e.setAttribute("style","position: absolute !important; left: 0 !important; top: 0 !important; margin: 0 !important; padding: 0 !important; border: none !important; width: 100% !important; height: 100% !important")}function P(e,t){return Object.keys(t).forEach(function(n){var r="object"==typeof r?JSON.stringify(t[n]):t[n];e=e.replace(new RegExp("{{"+n+"}}","g"),r)}),e}function I(e,t){var n=e.contentWindow&&e.contentWindow.document;return!!n&&(n.write(t),!0)}function b(e,t,n){}function D(e,t,n){Object.defineProperty(e,t,{writable:!1,configurable:!1,value:n})}function w(){this._subscribers={}}function L(e,t,n,r){this._isValid=Ce(e),this._isValid&&(this._creative=e,this._el=t,this._videoEl=n,this._iframe=r,this._subscribers=new Le,Se.setFullSizeStyle(t),C.call(this))}function C(){if(Ue.forEach(function(e){this._creative.subscribe(N.bind(this,e),e)}.bind(this)),this._creative.subscribe(O.bind(this),Ne),this._videoEl){var e=this._iframe.contentDocument.documentElement,t=this._videoEl;e.addEventListener("click",function(n){n.target===e&&t.click()})}}function O(e,t,n){this._subscribers.triggerSync(Ne,{url:e,id:t,playerHandles:n})}function N(e){this._subscribers.trigger(e,Array.prototype.slice(arguments,1))}function U(e,t,n,r){e?e(n,r):n&&t.trigger(Oe,n)}function M(e,t,n,r){n=n||{},this._id=xe(),this._destroyed=!1,this._frameContainer=Se.createElementInEl(e,"div"),this._videoEl=t,this._vpaidOptions=r||{timeout:1e4},this._templateConfig={template:n.template||je,extraOptions:n.extraOptions||{}}}function x(e){var t=this[e];t&&t.parentNode&&(t.parentNode.removeChild(t),delete this[e])}function j(){z.call(this),delete this._adUnit}function F(){z.call(this),W.call(this)}function z(){x.call(this,"_frame"),B.call(this)}function B(){this._onLoad&&(window.removeEventListener("message",this._onLoad),delete this._onLoad)}function W(){this._adUnit&&(this._adUnit.stopAd(),delete this._adUnit)}function H(){if(this._destroyed)throw new Error("VPAIDHTML5Client already destroyed!")}function q(){return"null"===window.location.origin?window.location.ancestorOrigins[0]:window.location.origin?window.location.origin:window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")}function G(e,t){t.forEach(function(t){e.push(t)})}function K(e,t,n,r,i){var a={};return Object.keys(r).forEach(function(e){a[e]=r[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}function Q(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location.href;e=e.replace(/[[\]]/g,"\\$&");var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null}function $(e,t){return t={exports:{}},e(t,t.exports),t.exports}function X(e){return!!/[?&]([^=#]+)=([^&#]*)/g.exec(e)}function Y(e){var t,n;return(n=e.match(/^(?:https?:\/\/)?(?:[^@\n]+@)?(?:www\.)?([^:\/\n\?\=]+)/im))&&(t=n[1]),t}function J(e){try{var t=new URL(e)}catch(e){return}var n=new URLSearchParams(t.search);return zn.forEach(function(e){var t=e.name,r=e.value;n.has(t)?n.set(t,r):n.append(t,r)}),t.search=n.toString(),t.toString()}function Z(e,t,n,r,i){var a={};return Object.keys(r).forEach(function(e){a[e]=r[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}function ee(e,t,n,r,i){var a={};return Object.keys(r).forEach(function(e){a[e]=r[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}function te(e,t,n,r,i){var a={};return Object.keys(r).forEach(function(e){a[e]=r[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}function ne(e,t,n,r,i){var a={};return Object.keys(r).forEach(function(e){a[e]=r[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}function re(e,t,n,r,i){var a={};return Object.keys(r).forEach(function(e){a[e]=r[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}function ie(e,t,n,r,i){var a={};return Object.keys(r).forEach(function(e){a[e]=r[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}function ae(e,t,n,r,i){var a={};return Object.keys(r).forEach(function(e){a[e]=r[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}function oe(e,t,n,r,i){var a={};return Object.keys(r).forEach(function(e){a[e]=r[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var se,ue,le="default"in e?e.default:e,ce="default"in t?t.default:t,de="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pe=(function(){function e(e){this.value=e}function t(t){function n(i,a){try{var o=t[i](a),s=o.value;s instanceof e?Promise.resolve(s.value).then(function(e){n("next",e)},function(e){n("throw",e)}):r(o.done?"return":"normal",o.value)}catch(e){r("throw",e)}}function r(e,t){switch(e){case"return":i.resolve({value:t,done:!0});break;case"throw":i.reject(t);break;default:i.resolve({value:t,done:!1})}(i=i.next)?n(i.key,i.arg):a=null}var i,a;this._invoke=function(e,t){return new Promise(function(r,o){var s={key:e,arg:t,resolve:r,reject:o,next:null};a?a=a.next=s:(i=a=s,n(e,t))})},"function"!=typeof t.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(t.prototype[Symbol.asyncIterator]=function(){return this}),t.prototype.next=function(e){return this._invoke("next",e)},t.prototype.throw=function(e){return this._invoke("throw",e)},t.prototype.return=function(e){return this._invoke("return",e)}}(),function(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(i,a){try{var o=t[i](a),s=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}return r("next")})}}),fe=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},he=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),ve=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ge=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},ye=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},_e=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},Ae=(ue=se=function(){function t(e){fe(this,t),this.state={},this._validProps(e),this._initProps(e)}return he(t,[{key:"getDefaultProps",value:function(){return this.constructor.defaultProps}},{key:"setState",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.state||{};this.state=ve({},n,t),e.log.stateInfo({label:this.constructor.name,prevState:n,nextState:t})}},{key:"updateProps",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.props||{};this.props=ve({},t,e)}},{key:"_initProps",value:function(e){var t=this.getDefaultProps(e);this.props=ve({},t,e)}},{key:"_validProps",value:function(t){var n=this.constructor.propTypes;e.PropTypes.checkPropTypes(n,t,"prop",this.constructor.name)}}]),t}(),se.propTypes={},se.defaultProps={},ue),me=/^([+-]?\d{4}(?!\d{2}\b))((-?)((0[1-9]|1[0-2])(\3([12]\d|0[1-9]|3[01]))?|W([0-4]\d|5[0-2])(-?[1-7])?|(00[1-9]|0[1-9]\d|[12]\d{2}|3([0-5]\d|6[1-6])))([T\s]((([01]\d|2[0-3])((:?)[0-5]\d)?|24:?00)([.,]\d+(?!:))?)?(\17[0-5]\d([.,]\d+)?)?([zZ]|([+-])([01]\d|2[0-3]):?([0-5]\d)?)?)?)?$/,Ee=function(){function e(){fe(this,e)}return he(e,null,[{key:"addClass",value:function(e,t){var n;if(p(t)){if(e.classList)return e.classList.add(t);n=c(e.getAttribute("class"))?e.getAttribute("class").split(/\s+/):[],c(t)&&p(t.replace(/\s+/,""))&&(n.push(t),e.setAttribute("class",n.join(" ")))}}},{key:"addEventListener",value:function(t,n,r){l(t)?h(t,function(t){e.addEventListener(t,n,r)}):l(n)?h(n,function(n){e.addEventListener(t,n,r)}):t.addEventListener?t.addEventListener(n,r,!1):t.attachEvent&&t.attachEvent("on"+n,r)}},{key:"remove",value:function(e){e&&e.parentNode&&e.parentNode.removeChild(e)}},{key:"removeEventListener",value:function(t,n,r){l(t)?h(t,function(t){e.removeEventListener(t,n,r)}):l(n)?h(n,function(n){e.removeEventListener(t,n,r)}):t.removeEventListener?t.removeEventListener(n,r,!1):t.detachEvent?t.detachEvent("on"+n,r):t["on"+n]=null}},{key:"isDomElement",value:function(e){return e instanceof Element}},{key:"getDimension",value:function(e){var t;return!k()&&e.getBoundingClientRect?(t=e.getBoundingClientRect(),{width:t.width,height:t.height}):{width:e.offsetWidth,height:e.offsetHeight}}}]),e}(),ke=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments[2];fe(this,e),this.code=t,this.msg=n,r&&(this.data=r)}return he(e,[{key:"extendsWithData",value:function(e){var t=this.code,n=this.msg;return new Error(t,n,e)}}]),e}(),Te=function(e,t){return new ke(e,t)},Ve={ERROR_DF_99:Te(99,"timeout while waiting for the video to start playing"),ERROR_100:Te(100,"VASTClient, error parsing xml"),ERROR_102:Te(102,"VASTClient, not supported VAST version"),ERROR_301:Te(301,"VASTClient, request ad tag url error"),ERROR_303:Te(303,"VASTClient, no Ad in VAST tree"),ERROR_402:Te(402,"timeout while waiting for the video to start playing"),VPAIDHTML5TECH_INVALID_MEDIA_FILE:Te(700,"Invalid MediaFile"),VPAIDHTML5TECH_INVALID_DOM_CONTAINER_EL:Te(701,"Invalid container HtmlElement"),VPAIDHTML5TECH_INVALID_DOM_VIDEO_EL:Te(702,"Invalid HTMLVideoElement"),VPAIDHTML5TECH_MISSING_CALLBACK:Te(702,"Missing valid callback"),VASTTRACKER_ASSET_URI:Te(110,"VASTTracker, missing required the URI of the ad asset being played"),VASTTRACKER_VAST_RESPONSE:Te(111,"VASTTracker, missing required VAST response"),VASTClIENT_MISS_AD_TAG_URL:Te(120,"VASTClient, missing ad tag URL"),VASTClIENT_RESQUEST_AD_TAG_URL_ERROR:Te(121,"VASTClient, request ad tag url error"),VASTClIENT_NO_AD_IN_VAST_TREE:Te(303,"VASTClient, no Ad in VAST tree"),VASTClIENT_NOT_SUPPORT_VAST_VERSION:Te(102,"VASTClient, not supported VAST version"),VASTClIENT_PARSING_XML_ERROR:Te(100,"VASTClient, error parsing xml"),VASTClIENT_WRAPPER_LIMIT_REACHED:Te(302,"VASTClient, players wrapper limit reached"),VASTClIENT_AD_TYPE_NOT_SUPPORT:Te(200,"VASTClient, received an Ad type that is not supported"),VASTClIENT_MISSING_DURATION:Te(101,"VASTClient, missing duration field in VAST response"),VASTClIENT_MISSING_OFFSET_TRACKING:Te(101,"VASTClient, missing or wrong offset attribute on progress tracking event"),VALID_AD_ERROR_1:Te(101,"VASTClient, InLine and Wrapper both found on the same Ad"),VALID_AD_ERROR_2:Te(101,"VASTClient, nor wrapper nor inline elements found on the Ad"),VALID_AD_ERROR_3:Te(403,"VASTClient, could not find MediaFile that is supported by this video player"),VALID_AD_ERROR_4:Te(133,'VASTClient, missing "VASTAdTagURI" in wrapper'),VAST_INTEGRATOR_SOURCE_ERROR:Te(403,"VASTIntegrator, Could not find Ad mediafile supported by this player"),VPAID_INTEGRATOR_NOT_SUPPORT_MEDIAFILE:Te(150,"VPAIDIntegrator, Could not find a supported mediaFile"),VPAID_INTEGRATOR_HANDSHAKE_NOT_SUPPORT_VERSION:Te(151,"VPAIDIntegrator handshake, unsupported version"),VPAID_INTEGRATOR_ERROR_WHILE_WAITING_FINISH:Te(152," VPAIDIntegrator, error while waiting for the adUnit to finish playing"),VPAID_INTEGRATOR_ERROR_WHILE_INIT:Te(153," VPAIDIntegrator, error while waiting init adUnit"),VPAID_AD_UNIT_WRAPPER_AD_UNIT_NOT_FULLY:Te(160,"VPAIDAdUnitWrapper, the passed VPAID adUnit does not fully implement the VPAID interface"),VPAID_AD_UNIT_WRAPPER_METHOD_TIMEOUT:Te(161," VPAIDAdUnitWrapper, timeout while waiting for a response on call method"),VPAID_AD_UNIT_WRAPPER_INVALID_METHOD_NAME:Te(162," VPAIDAdUnitWrapper, invalid method name"),VPAID_AD_UNIT_WRAPPER_MISSING_CALLBACK:Te(163," VPAIDAdUnitWrapper, missing callback"),VPAID_AD_UNIT_WRAPPER_EVENT_TIMEOUT:Te(601," VPAIDAdUnitWrapper, timeout while waiting for event"),VPAID_AD_UNIT_WRAPPER_MISSING_EVENT_NAME:Te(165," VPAIDAdUnitWrapper, missing event name"),VPAID_AD_UNIT_WRAPPER_MISSING_EVENT_CALLBACK:Te(166," VPAIDAdUnitWrapper, missing event callback")},Se={noop:V,validate:function(e,t){return e?null:new Error(t)},callbackTimeout:function(e,t,n){var r;return r=setTimeout(function(){t=V,n()},e),function(){t.apply(this,arguments)&&clearTimeout(r)}},createElementInEl:function(e,t,n){var r=document.createElement(t);return n&&(r.id=n),e.appendChild(r),r},createIframeWithContent:function(e,t,n){var r=S(e,null,n.zIndex);if(I(r,P(t,n)))return r},createIframe:S,setFullSizeStyle:R,simpleTemplate:P,setIframeContent:I,extend:function(e,t){return Object.keys(t).forEach(function(n){e[n]=t[n]}),e},unique:function(e){var t=-1;return function(){return e+"_"+ ++t}}},Re=["handshakeVersion","initAd","startAd","stopAd","skipAd","resizeAd","pauseAd","resumeAd","expandAd","collapseAd","subscribe","unsubscribe"],Pe=["AdLoaded","AdStarted","AdStopped","AdSkipped","AdSkippableStateChange","AdSizeChange","AdLinearChange","AdDurationChange","AdExpandedChange","AdRemainingTimeChange","AdVolumeChange","AdImpression","AdVideoStart","AdVideoFirstQuartile","AdVideoMidpoint","AdVideoThirdQuartile","AdVideoComplete","AdClickThru","AdInteraction","AdUserAcceptInvitation","AdUserMinimize","AdUserClose","AdPaused","AdPlaying","AdLog","AdError"],Ie=["getAdLinear","getAdWidth","getAdHeight","getAdExpanded","getAdSkippableState","getAdRemainingTime","getAdDuration","getAdVolume","getAdCompanions","getAdIcons"],be=["setAdVolume"];b.prototype.handshakeVersion=function(e,t){},b.prototype.initAd=function(e,t,n,r,i,a,o){},b.prototype.startAd=function(e){},b.prototype.stopAd=function(e){},b.prototype.skipAd=function(e){},b.prototype.resizeAd=function(e,t,n,r){},b.prototype.pauseAd=function(e){},b.prototype.resumeAd=function(e){},b.prototype.expandAd=function(e){},b.prototype.collapseAd=function(e){},b.prototype.subscribe=function(e,t,n){},b.prototype.unsubscribe=function(e,t){},b.prototype.getAdLinear=function(e){},b.prototype.getAdWidth=function(e){},b.prototype.getAdHeight=function(e){},b.prototype.getAdExpanded=function(e){},b.prototype.getAdSkippableState=function(e){},b.prototype.getAdRemainingTime=function(e){},b.prototype.getAdDuration=function(e){},b.prototype.getAdVolume=function(e){},b.prototype.getAdCompanions=function(e){},b.prototype.getAdIcons=function(e){},b.prototype.setAdVolume=function(e,t){},D(b,"METHODS",Re),D(b,"GETTERS",Ie),D(b,"SETTERS",be),D(b,"EVENTS",Pe);var De=Re.filter(function(e){return-1===["skipAd"].indexOf(e)});D(b,"checkVPAIDInterface",function(e){return De.every(function(t){return"function"==typeof e[t]})});var we=b;w.prototype.subscribe=function(e,t,n){this.isHandlerAttached(e,t)||this.get(t).push({handler:e,context:n,eventName:t})},w.prototype.unsubscribe=function(e,t){this._subscribers[t]=this.get(t).filter(function(t){return e!==t.handler})},w.prototype.unsubscribeAll=function(){this._subscribers={}},w.prototype.trigger=function(e,t){var n=this;this.get(e).concat(this.get("*")).forEach(function(e){setTimeout(function(){n.isHandlerAttached(e.handler,e.eventName)&&e.handler.call(e.context,t)},0)})},w.prototype.triggerSync=function(e,t){this.get(e).concat(this.get("*")).forEach(function(e){e.handler.call(e.context,t)})},w.prototype.get=function(e){return this._subscribers[e]||(this._subscribers[e]=[]),this._subscribers[e]},w.prototype.isHandlerAttached=function(e,t){return this.get(t).some(function(t){return e===t.handler})};var Le=w,Ce=we.checkVPAIDInterface,Oe="AdError",Ne="AdClickThru",Ue=we.EVENTS.filter(function(e){return e!=Ne});(L.prototype=Object.create(we.prototype)).isValidVPAIDAd=function(){return this._isValid},we.METHODS.forEach(function(e){-1===["subscribe","unsubscribe","initAd"].indexOf(e)&&(L.prototype[e]=function(){var t=we.prototype[e].length,n=Array.prototype.slice.call(arguments),r=t===n.length?n.pop():void 0;setTimeout(function(){var t,i=null;try{t=this._creative[e].apply(this._creative,n)}catch(e){i=e}U(r,this._subscribers,i,t)}.bind(this),0)})}),L.prototype.initAd=function(e,t,n,r,i,a,o){i=i||{},a=Se.extend({slot:this._el,videoSlot:this._videoEl},a||{}),setTimeout(function(){var s;try{this._creative.initAd(e,t,n,r,i,a)}catch(e){s=e}U(o,this._subscribers,s)}.bind(this),0)},L.prototype.subscribe=function(e,t,n){this._subscribers.subscribe(t,e,n)},L.prototype.unsubscribe=function(e,t){this._subscribers.unsubscribe(t,e)},L.prototype.on=L.prototype.subscribe,L.prototype.off=L.prototype.unsubscribe,we.GETTERS.forEach(function(e){L.prototype[e]=function(t){setTimeout(function(){var n,r=null;try{n=this._creative[e]()}catch(e){r=e}U(t,this._subscribers,r,n)}.bind(this),0)}}),L.prototype.setAdVolume=function(e,t){setTimeout(function(){var n,r=null;try{this._creative.setAdVolume(e),n=this._creative.getAdVolume()}catch(e){r=e}r||(r=Se.validate(n===e,"failed to apply volume: "+e)),U(t,this._subscribers,r,n)}.bind(this),0)},L.prototype._destroy=function(){this.stopAd(),this._subscribers.unsubscribeAll()};var Me=L,xe=Se.unique("vpaidIframe"),je='<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"></head><body style="margin:0;padding:0"><div class="ad-element"></div><script type="text/javascript" src="{{iframeURL_mediaFile}}"><\/script><script type="text/javascript" src="{{iframeURL_interactiveCreativeFile}}"><\/script><script type="text/javascript" src="{{iframeURL_verifications}}"><\/script><script type="text/javascript">window.parent.postMessage(\'{"event": "ready", "id": "{{iframeID}}"}\', \'{{origin}}\');<\/script></body></html>',Fe="AdStopped";M.prototype.destroy=function(){this._destroyed||(this._destroyed=!0,F.call(this))},M.prototype.isDestroyed=function(){return this._destroyed},M.prototype.loadAdUnit=function(e,t){if(!this._onLoad){H.call(this),F.call(this);var n=this,r=Se.createIframeWithContent(this._frameContainer,this._templateConfig.template,Se.extend({iframeURL_mediaFile:e.mediaFile,iframeURL_interactiveCreativeFile:e.interactiveCreativeFile,iframeURL_verifications:e.verifications,iframeID:this.getID(),origin:q()},this._templateConfig.extraOptions));this._frame=r,this._onLoad=Se.callbackTimeout(this._vpaidOptions.timeout,function(e){var r;if("string"==typeof e.data){try{r=JSON.parse(e.data)}catch(e){return}if(e.origin===q()&&r.id===n.getID()){var i,a,o;if(n._frame.contentWindow?(o=n._frame.contentWindow.getVPAIDAd,a=Se.validate("function"==typeof o,"the ad didn't return a function to create an ad")):a="the iframe is not anymore in the DOM tree",!a){var s=n._frame.contentWindow.document.querySelector(".ad-element");(i=new Me(o(),s,n._videoEl,n._frame)).subscribe(Fe,j.bind(n)),a=Se.validate(i.isValidVPAIDAd(),"the add is not fully complaint with VPAID specification")}return n._adUnit=i,B.call(n),t(a,a?null:i),!0}}}.bind(this),function(){t("timeout",null)}.bind(this)),window.addEventListener("message",this._onLoad)}},M.prototype.unloadAdUnit=function(){F.call(this)},M.prototype.getID=function(){return this._id};var ze=M;window.VPAIDHTML5Client=M;var Be,We,He,qe,Ge=(We=Be=function(){function t(e){if(fe(this,t),!e.mediaFile||!c(e.mediaFile.src))throw Ve.VPAIDHTML5TECH_INVALID_MEDIA_FILE;this.name="vpaid-html5",this.containerEl=null,this.videoEl=null,this.vpaidHTMLClient=null,this.mediaFile=e.mediaFile;var n="",r="";e.interactiveCreativeFile&&(n=e.interactiveCreativeFile),e.verifications&&(r=e.verifications),this.dataInputVpaid={mediaFile:e.mediaFile.src,interactiveCreativeFile:n,verifications:r}}return he(t,[{key:"loadAdUnit",value:function(e,t,n){if(!Ee.isDomElement(e))throw Ve.VPAIDHTML5TECH_INVALID_DOM_CONTAINER_EL;if(!Ee.isDomElement(t)||"video"!==t.tagName.toLowerCase())throw Ve.VPAIDHTML5TECH_INVALID_DOM_CONTAINER_EL;if(!s(n))throw Ve.VPAIDHTML5TECH_MISSING_CALLBACK;this.containerEl=e,this.videoEl=t,this.vpaidHTMLClient=new ze(e,t,{}),this.vpaidHTMLClient.loadAdUnit(this.dataInputVpaid,n)}},{key:"unloadAdUnit",value:function(){if(this.vpaidHTMLClient){try{this.vpaidHTMLClient.destroy()}catch(t){e.log.error("VAST ERROR: trying to unload the VPAID adunit")}this.vpaidHTMLClient=null}this.containerEl&&(Ee.remove(this.containerEl),this.containerEl=null)}}],[{key:"supports",value:function(e){return!k()&&this.types.indexOf(e)>-1}}]),t}(),Be.types=["text/javascript","text/javascript1.0","text/javascript1.2","text/javascript1.4","text/jscript","application/javascript","application/x-javascript","text/ecmascript","text/ecmascript1.0","text/ecmascript1.2","text/ecmascript1.4","text/livescript","application/ecmascript","application/x-ecmascript"],We),Ke=(qe=He=function(){function e(){fe(this,e)}return he(e,null,[{key:"track",value:function(e,t){var n=[];return this.parseURLMacros(e,t).forEach(function(e){e.indexOf("bs.serving-sys.com")>0&&(e=e.replace("{timestamp}",Date.now()));var t=new Image;t.src=e,n.push(t)}),n}},{key:"parseURLMacros",value:function(e,t){var n=this,r=[];return(t=t||{}).CACHEBUSTING||(t.CACHEBUSTING=Math.round(1e10*Math.random())),e.forEach(function(e){e&&r.push(n._parseURLMacro(e,t))}),r}},{key:"parseURLMacro",value:function(e,t){return(t=t||{}).CACHEBUSTING||(t.CACHEBUSTING=Math.round(1e10*Math.random())),this._parseURLMacro(e,t)}},{key:"parseDuration",value:function(e){var t,n,r=/(\d\d):(\d\d):(\d\d)(\.(\d\d\d))?/;return c(e)&&(t=e.match(r))&&(n=function(e){return 60*parseInt(e,10)*60*1e3}(t[1])+function(e){return 60*parseInt(e,10)*1e3}(t[2])+function(e){return 1e3*parseInt(e,10)}(t[3])+parseInt(t[5]||0)),isNaN(n)?null:n}},{key:"parseImpressions",value:function(e){return e?(e=l(e)?e:[e],_(e,function(e){if(p(e.keyValue))return e.keyValue})):[]}},{key:"parseError",value:function(e){if(e)return e=l(e)?e:[e],_(e,function(e){if(p(e.keyValue))return e.keyValue})}},{key:"parseCampain",value:function(e){return e?(e=l(e)?e:[e],_(e,function(e){if(p(e.keyValue)&&"AdMicro"===e["@id"]){var t=n("p",e.keyValue)?n("p",e.keyValue):"";return t=t.slice(0,t.indexOf(";"))}})):[]}},{key:"formatProgress",value:function(e){var t,n,r,i;return t=e/36e5,t=Math.floor(t),n=e/6e4%60,n=Math.floor(n),r=e/1e3%60,r=Math.floor(r),i=e%1e3,A(t,2)+":"+A(n,2)+":"+A(r,2)+"."+A(i,3)}},{key:"parseOffset",value:function(e,t){function n(e,t){return e*t/100}return function(e){return/^\d+(\.\d+)?%$/g.test(e)}(e)?function(e,t){return t?n(t,parseFloat(e.replace("%",""))):null}(e,t):this.parseDuration(e)}},{key:"isVPAID",value:function(e){return!!e&&"VPAID"===e.apiFramework}},{key:"findSupportedVPAIDTech",value:function(e){var t,n,r;for(t=0,n=this.VPAID_techs.length;t<n;t+=1)if((r=this.VPAID_techs[t]).supports(e))return r;return null}},{key:"isFlashSupported",value:function(){return!1}},{key:"_parseURLMacro",value:function(e,t){return t=t||{},h(t,function(t,n){e=e.replace(new RegExp("\\["+n+"\\]","gm"),t)}),e}}]),e}(),He.VPAID_techs=[Ge],qe),Qe=function(){function e(t){fe(this,e);var n=$e.parseText;if(t.documentElement)return new e(t.documentElement);if(t.hasChildNodes()){for(var r,i,a,o="",s=0;s<t.childNodes.length;s++)3==((r=t.childNodes.item(s)).nodeType-1|1)?o+=3===r.nodeType?r.nodeValue.trim():r.nodeValue:1!==r.nodeType||r.prefix||(i=y(r.nodeName),a=new e(r),this.hasOwnProperty(i)?(this[i].constructor!==Array&&(this[i]=[this[i]]),this[i].push(a)):this[i]=a);o&&(this.keyValue=n(o))}if(void 0===t.hasAttributes?t.attributes.length>0:t.hasAttributes())for(var u,l=0;l<t.attributes.length;l++)this["@"+y((u=t.attributes.item(l)).name)]=n(u.value.trim())}return he(e,[{key:"attr",value:function(e){return this["@"+y(e)]}}]),e}(),$e=function(){function e(){fe(this,e)}return he(e,null,[{key:"strToXMLDoc",value:function(e){function t(e){try{var t=(new DOMParser).parseFromString("INVALID","text/xml").getElementsByTagName("parsererror")[0].namespaceURI;return"http://www.w3.org/1999/xhtml"===t?e.getElementsByTagName("parsererror").length>0:e.getElementsByTagNameNS(t,"parsererror").length>0}catch(e){}}if(void 0===window.DOMParser){var n=new ActiveXObject("Microsoft.XMLDOM");return n.async=!1,n.loadXML(e),n}return function(e){var n,r=new DOMParser;try{if(n=r.parseFromString(e,"application/xml"),t(n)||d(e))throw new Error}catch(t){throw new Error("xml.strToXMLDOC: Error parsing the string: "+e)}return n}(e)}},{key:"parseText",value:function(e){return/^\s*$/.test(e)?null:/^(?:true|false)$/i.test(e)?"true"===e.toLowerCase():isFinite(e)?parseFloat(e):E(e)?new Date(e):e.trim()}},{key:"toJXONTree",value:function(t){var n=e.strToXMLDoc(t);return new Qe(n)}},{key:"keyValue",value:function(e){if(e)return e.keyValue}},{key:"attr",value:function(e,t){if(e)return e["@"+y(t)]}},{key:"encode",value:function(e){if(c(e))return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}},{key:"decode",value:function(e){if(c(e))return e.replace(/&apos;/g,"'").replace(/&quot;/g,'"').replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&amp;/g,"&")}}]),e}(),Xe=function e(t,n){fe(this,e),this.name=t.attr("event"),this.uri=$e.keyValue(t),"progress"===this.name&&(this.offset=Ke.parseOffset(t.attr("offset"),n))},Ye=["delivery","type","width","height","codec","id","bitrate","minBitrate","maxBitrate","scalable","maintainAspectRatio","apiFramework","fileSize","meidaType"],Je=function(){function e(t){fe(this,e),this.src=$e.keyValue(t);for(var n=0;n<Ye.length;n++){var r=Ye[n];this[r]=t.attr(r)}"video/x-mp4"===this.type&&(this.type="video/mp4")}return he(e,[{key:"isSupported",value:function(){return Ke.isVPAID(this)?!!Ke.findSupportedVPAIDTech(this.type):"video/x-flv"!==this.type||Ke.isFlashSupported()}}]),e}(),Ze=function(){function e(t){fe(this,e),this.clickThrough=$e.keyValue(t.clickThrough),this.clickTrackings=this._parseClickTrackings(t.clickTracking),this.customClicks=this._parseClickTrackings(t.customClick)}return he(e,[{key:"_parseClickTrackings",value:function(e){var t=[];return e&&(e=l(e)?e:[e]).forEach(function(e){t.push($e.keyValue(e))}),t}}]),e}(),et=function(){function e(t){if(fe(this,e),!(this instanceof e))return new e(t);this.type=t.attr("type"),this.apiFramework=t.attr("apiFramework"),this.variableDuration=t.attr("variableDuration"),this.src=$e.keyValue(t)}return he(e,null,[{key:"parseInteractiveCreativeFiles",value:function(t){var n=[];return a(t)&&(l(t)?t:[t]).forEach(function(t){n.push(new e(t))}),n}}]),e}(),tt=["program","width","height","xPosition","yPosition","duration","offset","apiFramework","pxratio"],nt=function(){function e(t){if(fe(this,e),!(this instanceof e))return new e(t);for(var n=0;n<tt.length;n++){var r=tt[n];this[r]=t.attr(r)}this.duration&&(this.duration=Ke.duration(this.duration)),this.offset&&(this.offset=Ke.duration(this.offset)),this.creativeType=$e.attr(t.staticResource,"creativeType"),this.staticResource=$e.keyValue(t.staticResource);var i=null;$e.keyValue(t.HTMLResource)?i=$e.keyValue(t.HTMLResource):$e.keyValue(t.hTMLResource)&&(i=$e.keyValue(t.hTMLResource)),this.htmlResource=i;var a=null;$e.keyValue(t.IFrameResource)?a=$e.keyValue(t.IFrameResource):$e.keyValue(t.iFrameResource)&&(a=$e.keyValue(t.iFrameResource)),this.iframeResource=a,this.iconViewTrackings=this._parseTrackings(t.iconViewTracking),t.iconClicks&&(this.iconClickThrough=$e.keyValue(t.iconClicks.iconClickThrough),this.iconClickTrackings=this._parseTrackings(t.iconClicks.iconClickTracking))}return he(e,[{key:"_parseTrackings",value:function(e){return e?(e=l(e)?e:[e],_(e,function(e){if(p(e.keyValue))return e.keyValue})):[]}}]),e}(),rt=function e(t){fe(this,e),this.type=t.attr("type"),this.language=t.attr("language"),this.uri=$e.keyValue(t)},it=function(){function e(t){fe(this,e),this.clickThrough=$e.keyValue(t.clickThrough),this.clickTrackings=this._parseClickTrackings(t.clickTracking),this.customClicks=this._parseClickTrackings(t.customClick)}return he(e,[{key:"_parseClickTrackings",value:function(e){var t=[];return e&&(e=l(e)?e:[e]).forEach(function(e){t.push($e.keyValue(e))}),t}}]),e}(),at=function(){function e(t){fe(this,e),this.duration=Ke.parseDuration($e.keyValue(t.duration)),this.mediaFiles=this._parseMediaFiles(t.mediaFiles&&t.mediaFiles.mediaFile),this.trackingEvents=this._parseTrackingEvents(t.trackingEvents&&t.trackingEvents.tracking,this.duration),this.skipoffset=Ke.parseOffset($e.attr(t,"skipoffset"),this.duration)/1e3,t.videoClicks&&(this.videoClicks=new Ze(t.videoClicks)),t.adParameters&&(this.adParameters=$e.keyValue(t.adParameters),$e.attr(t.adParameters,"xmlEncoded")&&(this.adParameters=$e.decode(this.adParameters))),t.mediaFiles&&t.mediaFiles.mezzanine&&(this.mezzanie=$e.keyValue(t.mediaFiles.mezzanine)),t.mediaFiles&&t.mediaFiles.interactiveCreativeFile&&(this.interactiveCreativeFile=et.parseInteractiveCreativeFiles(t.mediaFiles.interactiveCreativeFile)),t.icons&&(this.icons=this._parseIcons(t.icons&&t.icons.icon)),t.mediaFiles&&t.mediaFiles.closedCaptionFiles&&t.mediaFiles.closedCaptionFiles.closedCaptionFile&&(this.closedCaptionFiles=this._parseClosedCaptionFiles(t.mediaFiles&&t.mediaFiles.closedCaptionFiles.closedCaptionFile)),t.audioInteractions&&(this.audioInteractions=new it(t.audioInteractions))}return he(e,[{key:"_parseMediaFiles",value:function(e){var t=[];return a(e)&&(e=l(e)?e:[e]).forEach(function(e){t.push(new Je(e))}),t}},{key:"_parseTrackingEvents",value:function(e,t){var n=[];return a(e)&&(e=l(e)?e:[e]).forEach(function(e){n.push(new Xe(e,t))}),n}},{key:"_parseClosedCaptionFiles",value:function(e){var t=[];return a(e)&&(e=l(e)?e:[e]).forEach(function(e){t.push(new rt(e))}),t}},{key:"_parseIcons",value:function(e){var t=[];return a(e)&&(e=l(e)?e:[e]).forEach(function(e){t.push(new nt(e))}),t}},{key:"isSupported",value:function(){var e,t;for(e=0,t=this.mediaFiles.length;e<t;e+=1)if(this.mediaFiles[e].isSupported())return!0;return!1}}]),e}(),ot=function(){function t(n){fe(this,t),e.log.info("<Companion> found companion ad"),e.log.debug("<Companion>  companionJTree:",n),this.creativeType=$e.attr(n.staticResource,"creativeType"),this.staticResource=$e.keyValue(n.staticResource),e.log.info("<Companion>  creativeType: "+this.creativeType),e.log.info("<Companion>  staticResource: "+this.staticResource);var r=null;$e.keyValue(n.HTMLResource)?r=$e.keyValue(n.HTMLResource):$e.keyValue(n.hTMLResource)&&(r=$e.keyValue(n.hTMLResource)),null!==r&&e.log.info("<Companion> found html resource",r),this.htmlResource=r;var i=null;$e.keyValue(n.IFrameResource)?i=$e.keyValue(n.IFrameResource):$e.keyValue(n.iFrameresource)&&(i=$e.keyValue(n.iFrameresource)),null!==i&&e.log.info("<Companion> found iframe resource",i),this.iframeResource=i,n.adParameters&&(this.adParameters=this.parserAdParameters(n.adParameters)),this.altText=$e.keyValue(n.altText),this.id=$e.attr(n,"id"),this.width=$e.attr(n,"width"),this.height=$e.attr(n,"height"),this.assetWidth=$e.attr(n,"assetWidth"),this.assetHeight=$e.attr(n,"assetHeight"),this.expandedWidth=$e.attr(n,"expandedWidth"),this.expandedHeight=$e.attr(n,"expandedHeight"),this.apiFramework=$e.attr(n,"apiFramework"),this.adSlotId=$e.attr(n,"adSlotId"),this.pxratio=$e.attr(n,"pxratio"),this.renderingMode=$e.attr(n,"renderingMode"),this.scalable=$e.attr(n,"scalable"),this.maintainAspectRatio=$e.attr(n,"maintainAspectRatio"),this.minSuggestedDuration=$e.attr(n,"minSuggestedDuration"),this.apiFramework=$e.attr(n,"apiFramework"),this.companionClickThrough=$e.keyValue(n.companionClickThrough),this.companionClickTracking=this._parseTrackingEvents(n.companionClickTracking),this.trackingEvents=this._parseTrackingEvents(n.trackingEvents&&n.trackingEvents.tracking),this.logoTile=$e.attr(n,"logoTile"),this.logoTitle=$e.attr(n,"logoTitle"),this.logoArtist=$e.attr(n,"logoArtist"),this.logoURL=$e.attr(n,"logoURL"),e.log.info("<Companion>  companionClickThrough: "+this.companionClickThrough)}return he(t,[{key:"_parseTrackingEvents",value:function(e){var t=[];return a(e)&&(e=l(e)?e:[e]).forEach(function(e){t.push(new Xe(e))}),t}},{key:"parserAdParameters",value:function(e){var t=[];return a(e)&&(e=l(e)?e:[e]).forEach(function(e){t.push(e)}),t}}]),t}(),st=function e(t){var n=this;if(fe(this,e),!(this instanceof e))return new e(t);this.arrUnivarsal=[],t?t.length?t.map(function(e){e&&n.arrUnivarsal.push({idRegistry:e.attr("idRegistry"),idValue:e.attr("idValue")})}):this.arrUnivarsal.push({idRegistry:t.attr("idRegistry"),idValue:t.attr("idValue")}):this.arrUnivarsal.push({idRegistry:"unknown",idValue:"unknown"})},ut=["id","width","height","expandedWidth","expandedHeight","scalable","maintainAspectRatio","minSuggestedDuration","apiFramework"],lt=function e(t){if(fe(this,e),!(this instanceof e))return new e(t);for(var n=0;n<ut.length;n++){var r=ut[n];this[r]=t.attr(r)}this.creativeTypeStatic=$e.attr(t.staticResource,"creativeType"),this.staticResource=$e.keyValue(t.staticResource),this.creativeTypeHtml=$e.attr(t.hTMLResource,"creativeType"),this.HTMLResource=$e.keyValue(t.hTMLResource),this.nonLinearClickThrough=$e.keyValue(t.nonLinearClickThrough),this.nonLinearClickTracking=function(e){var t=[];return e&&(e=l(e)?e:[e]).forEach(function(e){t.push($e.keyValue(e))}),t}(t.nonLinearClickTracking)},ct=function(){function e(t){fe(this,e),t.nonLinear&&(this.nonLinear=new lt(t.nonLinear)),t.trackingEvents&&(this.trackingEvents=this._parseTrackingEvents(t.trackingEvents.tracking))}return he(e,[{key:"_parseTrackingEvents",value:function(e){var t=[];return a(e)&&(e=l(e)?e:[e]).forEach(function(e){t.push(new Xe(e))}),t}}]),e}(),dt=function(){function e(t){if(fe(this,e),this.id=t.attr("id"),this.sequence=t.attr("sequence"),this.float=t.attr("float"),this.adId=t.attr("adId"),this.apiFramework=t.attr("apiFramework"),t.linear&&(this.linear=new at(t.linear)),t.companionAds){var n=[],r=t.companionAds&&t.companionAds.companion;a(r)&&(r=l(r)?r:[r]).forEach(function(e){n.push(new ot(e))}),this.companionAds=n}t.universalAdId&&(this.universalAdId=new st(t.universalAdId)),t.nonLinearAds&&(this.nonLinearAds=new ct(t.nonLinearAds)),t.creativeExtensions&&(this.creativeExtensions=t.creativeExtensions)}return he(e,[{key:"isSupported",value:function(){return!this.linear||this.linear.isSupported()}}],[{key:"parseCreatives",value:function(t){var n=[];return a(t)&&a(t.creative)&&(l(t.creative)?t.creative:[t.creative]).forEach(function(t){n.push(new e(t))}),n}}]),e}(),pt=function(){function e(t){if(fe(this,e),!(this instanceof e))return new e(t);this.authority=t.attr("authority"),this.category=$e.keyValue(t)}return he(e,null,[{key:"parseCategories",value:function(t){var n=[];return n&&(l(t)?t:[t]).forEach(function(t){var r=new e(t);r.category&&r.category.length>0&&r.authority&&r.authority.length>0&&n.push(new e(t))}),n}}]),e}(),ft=function(){function e(t){if(fe(this,e),!(this instanceof e))return new e(t);this.id=t.attr("id"),t.viewable&&(this.viewables=this._parseUriArray(t.viewable)),t.notViewable&&(this.notViewables=this._parseUriArray(t.notViewable)),t.viewUndetermined&&(this.viewUndetermineds=this._parseUriArray(t.viewUndetermined))}return he(e,[{key:"_parseUriArray",value:function(e){var t=[];return e&&(l(e)?e:[e]).forEach(function(e){t.push($e.keyValue(e))}),t}}]),e}(),ht=function(){function e(t){if(fe(this,e),!(this instanceof e))return new e(t);this.vendor=t.attr("vendor"),t.javaScriptResource&&(this.javaScriptResources=this._parseResources(t.javaScriptResource)),Ke.isFlashSupported()&&t.flashResource&&(this.javaScriptResources=this._parseResources(t.javaScriptResource)),t.viewableImpression&&(this.viewableImpression={id:t.viewableImpression.attr("id"),uri:$e.keyValue(t.viewableImpression)}),t.executableResource&&(this.executableResource=this._parseExecutableResource(t.executableResource)),t.trackingEvents&&(this.trackingEvents=this._parseTrackingEvents(t.trackingEvents.tracking)),this.verificationParameters=$e.keyValue(t.verificationParameters),this.blockedAdCategories=$e.keyValue(t.blockedAdCategories)}return he(e,[{key:"_parseResources",value:function(e){var t=[];return e&&(l(e)?e:[e]).forEach(function(e){t.push({apiFramework:e.attr("apiFramework"),uri:$e.keyValue(e)})}),t}},{key:"_parseExecutableResource",value:function(e){var t=[];return(l(e)?e:[e]).forEach(function(e){t.push({apiFramework:e.attr("apiFramework"),type:e.attr("type"),uri:$e.keyValue(e)})}),t}},{key:"_parseTrackingEvents",value:function(e){var t=[];return(l(e)?e:[e]).forEach(function(e){t.push(new Xe(e))}),t}}],[{key:"parseAdVerifications",value:function(t){var n=[];return a(t)&&a(t.verification)&&(l(t.verification)?t.verification:[t.verification]).forEach(function(t){n.push(new e(t))}),n}}]),e}(),vt=function(){function e(t){fe(this,e),this.adTitle=$e.keyValue(t.adTitle),this.adSystem=$e.keyValue(t.adSystem),this.impressions=Ke.parseImpressions(t.impression),this.creatives=dt.parseCreatives(t.creatives),this.campains=Ke.parseCampain(t.impression),this.adServingId=$e.keyValue(t.adServingId),this.description=$e.keyValue(t.description),this.advertiser=$e.keyValue(t.advertiser),this.surveys=this._parseSurveys(t.survey),this.error=Ke.parseError(t.error),this.pricing=$e.keyValue(t.pricing),this.extensions=t.extensions,this.expires=$e.keyValue(t.expires),this.extensions&&(this.moat=this._parseMoat(this.extensions)),t.category&&(this.categories=pt.parseCategories(t.category)),t.viewableImpression&&(this.viewableImpression=new ft(t.viewableImpression)),t.adVerifications&&(this.adVerifications=ht.parseAdVerifications(t.adVerifications))}return he(e,[{key:"_parseSurveys",value:function(e){return e?_(l(e)?e:[e],function(e){if(p(e.keyValue))return{uri:e.keyValue,type:e.attr("type")}}):[]}},{key:"isSupported",value:function(){var e,t;if(0===this.creatives.length)return!1;for(e=0,t=this.creatives.length;e<t;e+=1)if(!this.creatives[e].isSupported())return!1;return!0}},{key:"_parseMoat",value:function(e){if(e)return function(t){for(var n=0;n<t.length;n++){var r=t[n].extensions;if(r&&r.moat){for(var i={},a=$e.keyValue(e.moat).split(";"),o=0;o<a.length;o++){var s=a[o].split("=");s&&2===s.length&&(i[s[0]]=s[1])}return i}}}(l(e)?e:[e])}}]),e}(),gt=function e(t){fe(this,e),this.adSystem=$e.keyValue(t.adSystem),this.impressions=Ke.parseImpressions(t.impression),this.VASTAdTagURI=$e.keyValue(t.vASTAdTagURI),this.campains=Ke.parseCampain(t.impression),this.creatives=dt.parseCreatives(t.creatives),this.error=Ke.parseError(t.error),this.pricing=$e.keyValue(t.pricing),this.viewable=$e.keyValue(t.viewable),this.notViewable=$e.keyValue(t.notViewable),this.viewUndetermined=$e.keyValue(t.viewUndetermined),this.error&&0===this.error.length&&(this.error=void 0),this.extensions=t.extensions,this.followAdditionalWrappers=!a($e.attr(t,"followAdditionalWrappers"))||$e.attr(t,"followAdditionalWrappers"),this.allowMultipleAds=$e.attr(t,"allowMultipleAds"),this.fallbackOnNoAd=$e.attr(t,"fallbackOnNoAd"),t.viewableImpression&&(this.viewableImpression=new ft(t.viewableImpression)),t.adVerifications&&(this.adVerifications=ht.parseAdVerifications(t.adVerifications))},yt=function(){function e(t){fe(this,e),this._initialize(t)}return he(e,[{key:"_initialize",value:function(e){this.id=e.attr("id"),this.sequence=e.attr("sequence"),this.float=e.attr("float"),this.conditionalAd=e.attr("conditionalAd"),this.adType=e.attr("adType"),this.replay=e.attr("replay"),e.inLine&&(this.inLine=new vt(e.inLine)),e.wrapper&&(this.wrapper=new gt(e.wrapper))}}]),e}(),_t=function(){function e(){fe(this,e),this._linearAdded=!1,this.ads=[],this.errorURLMacros=[],this.impressions=[],this.clickTrackings=[],this.customClicks=[],this.trackingEvents={},this.mediaFiles=[],this.jstracking=[],this.campains=[],this.clickThrough=void 0,this.adTitle="",this.duration=void 0,this.skipoffset=void 0,this.viewableImpression={},this.adVerifications=[],this.nonLinearClickTracking=[],this.nonLinear={},this.companions=[],this.ima=!1}return he(e,[{key:"addAd",value:function(e){var t,n;e instanceof yt&&(t=e.inLine,n=e.wrapper,this.ads.push(e),t&&this._addInLine(t),n&&this._addWrapper(n),e.ima&&(this.adTagUrl=e.adTagUrl,this.ima=!0))}},{key:"_addErrorTrackUrl",value:function(e){if(e){var t=e instanceof Qe?$e.keyValue(e):e,n=this;l(t)&&t.length>0?t.forEach(function(e){n.errorURLMacros.push(e)}):this.errorURLMacros.push(t)}}},{key:"_addImpressions",value:function(e){l(e)&&G(this.impressions,e)}},{key:"_addViewableImpression",value:function(e){e&&(this.viewableImpression=e)}},{key:"_addAdVerifications",value:function(e){l(e)&&G(this.adVerifications,e)}},{key:"_addClickThrough",value:function(e){p(e)&&(this.clickThrough=e)}},{key:"_addClickTrackings",value:function(e){l(e)&&G(this.clickTrackings,e)}},{key:"_addCustomClicks",value:function(e){l(e)&&G(this.customClicks,e)}},{key:"_addTrackingEvents",value:function(e){var t=this.trackingEvents;e&&(e=l(e)?e:[e]).forEach(function(e){t[e.name]||(t[e.name]=[]),t[e.name].push(e)})}},{key:"_addTitle",value:function(e){p(e)&&(this.adTitle=e)}},{key:"_addDuration",value:function(e){u(e)&&(this.duration=e)}},{key:"_addVideoClicks",value:function(e,t){e instanceof Ze&&(t||this._addClickThrough(e.clickThrough),this._addClickTrackings(e.clickTrackings),this._addCustomClicks(e.customClicks))}},{key:"_addNonLinearClicks",value:function(e){e&&l(e)&&G(this.nonLinearClickTracking,e)}},{key:"_addMediaFiles",value:function(e){l(e)&&G(this.mediaFiles,e)}},{key:"_addSkipoffset",value:function(e){e&&(this.skipoffset=e)}},{key:"_addAdParameters",value:function(e){if(e){this.adParameters=e;var t=void 0;try{t=JSON.parse(e).jstracking}catch(e){}t&&this._addJsTracking(t)}}},{key:"_addAudioInteractions",value:function(e,t){e instanceof it&&(t||this._addClickThrough(e.clickThrough),this._addClickTrackings(e.clickTrackings),this._addCustomClicks(e.customClicks))}},{key:"_addLinear",value:function(e){e instanceof at&&(this._addDuration(e.duration),this._addTrackingEvents(e.trackingEvents),this._addVideoClicks(e.videoClicks),this._addAudioInteractions(e.audioInteractions),this._addMediaFiles(e.mediaFiles),this._addSkipoffset(e.skipoffset),this._addAdParameters(e.adParameters),this._linearAdded=!0)}},{key:"_addNonLinearAd",value:function(e){e instanceof ct&&(this._addTrackingEvents(e.trackingEvents),this._addNonLinearClicks(e.nonLinear.nonLinearClickTracking)),this.nonLinear=e.nonLinear}},{key:"_addCompanionClick",value:function(e){if(e){var t=[];return l(e)&&G(t,e),t}}},{key:"_addCompanionAds",value:function(e){var t=this,n=[];e.forEach(function(e){if(e instanceof ot){var r=e.trackingEvents,i=t._addCompanionClick(e.companionClickTracking),a=e.companionClickThrough,o=e.adParameters,s=e.staticResource,u=e.htmlResource,l=e.iframeResource;n.push({trackingClick:i,eventtracking:r,staticResource:s,htmlResource:u,iframeResource:l,clickThroughCom:a,parametersCom:o})}}),this.companions=n}},{key:"_addInLine",value:function(e){var t=this;e instanceof vt&&(this._addTitle(e.adTitle),this._addErrorTrackUrl(e.error),this._addImpressions(e.impressions),this._addViewableImpression(e.viewableImpression),this._addAdVerifications(e.adVerifications),l(e.campains)&&e.campains.length>0&&this._addCampain(e.campains),e.creatives.forEach(function(e){e.linear&&t._addLinear(e.linear),e.nonLinearAds&&t._addNonLinearAd(e.nonLinearAds),e.companionAds&&t._addCompanionAds(e.companionAds)}))}},{key:"_addCampain",value:function(e){G(this.campains,e)}},{key:"_addJsTracking",value:function(e){this.jstracking.push(e)}},{key:"_addWrapper",value:function(e){var t=this;e instanceof gt&&(this._addErrorTrackUrl(e.error),this._addImpressions(e.impressions),this._addViewableImpression(e.viewableImpression),this._addAdVerifications(e.adVerifications),l(e.campains)&&e.campains.length>0&&this._addCampain(e.campains),e.creatives.forEach(function(e){var n=e.linear;if(n&&(t._addVideoClicks(n.videoClicks,!0),t._addAudioInteractions(n.audioInteractions,!0),t._addTrackingEvents(n.trackingEvents),n.adParameters)){var r=void 0;try{r=JSON.parse(n.adParameters).jstracking}catch(e){}r&&t._addJsTracking(r)}e.nonLinearAds&&t._addNonLinearAd(e.nonLinearAds),e.companionAds&&t._addCompanionAds(e.companionAds)}))}},{key:"hasLinear",value:function(){return this._linearAdded}},{key:"hasIMA",value:function(){return this.ima}}]),e}(),At=function(){function e(t,n,r){fe(this,e),this._sanityCheck(t,n),this._initialize(t,n),this.player=r}return he(e,[{key:"_sanityCheck",value:function(e,t){if(!c(e)||d(e))throw Ve.VASTTRACKER_ASSET_URI;if(!(t instanceof _t))throw Ve.VASTTRACKER_VAST_RESPONSE}},{key:"_initialize",value:function(e,t){this.response=t,this.assetURI=e,this.progress=0,this.quartiles={firstQuartile:{tracked:!1,time:Math.round(25*t.duration)/100},midpoint:{tracked:!1,time:Math.round(50*t.duration)/100},thirdQuartile:{tracked:!1,time:Math.round(75*t.duration)/100}}}},{key:"durationChange",value:function(e){this.quartiles={firstQuartile:{tracked:!1,time:Math.round(25*e)/100},midpoint:{tracked:!1,time:Math.round(50*e)/100},thirdQuartile:{tracked:!1,time:Math.round(75*e)/100}}}},{key:"trackURLs",value:function(e,t){l(e)&&e.length>0&&(t=v({ASSETURI:this.assetURI,CONTENTPLAYHEAD:Ke.formatProgress(this.progress)},t||{}),Ke.track(e,t))}},{key:"trackEvent",value:function(e,t){this.player.trigger("EventTrackingAds",e),this.trackURLs(this._getEventUris(this.response.trackingEvents[e])),t&&(this.response.trackingEvents[e]=void 0)}},{key:"trackProgress",value:function(e){function t(e,t,n){o[e]&&n&&i.push({name:e,trackOnce:!!t})}function n(e,t){var n=e.time;return t>=n&&t<=n+5e3}var r=this,i=[],a=!0,o=this.response.trackingEvents;u(e)&&(t("start",a,e>0),t("rewind",!1,function(t,n){return t>e&&Math.abs(n-t)>3e3}(this.progress,e)),function(e){function i(e,r){var i=o[e];n(i,r)&&(i.tracked=!0,t(e,a,!0))}var o=r.quartiles,s=r.quartiles.firstQuartile,u=r.quartiles.midpoint,l=r.quartiles.thirdQuartile;s.tracked?u.tracked?l.tracked||i("thirdQuartile",e):i("midpoint",e):i("firstQuartile",e)}(e),function(e){if(l(o.progress)){var t=[];o.progress.forEach(function(n){n.offset<=e?r.trackURLs([n.uri]):t.push(n)}),o.progress=t}}(e),i.forEach(function(e){r.trackEvent(e.name,e.trackOnce)}),this.progress=e)}},{key:"trackComplete",value:function(){this.quartiles.thirdQuartile.tracked&&this.trackEvent("complete",!0)}},{key:"trackErrorWithCode",value:function(e){u(e)&&this.trackURLs(this.response.errorURLMacros,{ERRORCODE:e})}},{key:"trackImpressions",value:function(){this.trackURLs(this.response.impressions)}},{key:"trackViewables",value:function(){this.trackURLs(this.response.viewableImpression.viewables)}},{key:"trackNotViewables",value:function(){this.trackURLs(this.response.viewableImpression.notViewables)}},{key:"trackCreativeView",value:function(){this.trackEvent("creativeView")}},{key:"trackNonLinearStart",value:function(){this.trackEvent("start",!0)}},{key:"trackNonLinearClick",value:function(){this.trackURLs(this.response.nonLinearClickTracking)}},{key:"trackCloseNonLinear",value:function(){this.trackEvent("close",!0)}},{key:"trackNonLinearComplete",value:function(){this.trackEvent("complete",!0)}},{key:"trackNonLinearFirst",value:function(){this.trackEvent("firstQuartile",!0)}},{key:"trackNonLinearMid",value:function(){this.trackEvent("midpoint",!0)}},{key:"trackNonLinearThrid",value:function(){this.trackEvent("thirdQuartile",!0)}},{key:"trackClick",value:function(){this.trackURLs(this.response.clickTrackings)}},{key:"_getEventUris",value:function(e){var t;return e&&(t=[],e.forEach(function(e){e.uri&&t.push(e.uri)})),t}}]),e}();["rewind","fullscreen","exitFullscreen","pause","resume","mute","unmute","acceptInvitation","acceptInvitationLinear","collapse","expand"].forEach(function(e){At.prototype["track"+g(e)]=function(){this.trackEvent(e)}}),["start","skip","close","closeLinear"].forEach(function(e){At.prototype["track"+g(e)]=function(){this.trackEvent(e,!0)}}),["firstQuartile","midpoint","thirdQuartile"].forEach(function(e){At.prototype["track"+g(e)]=function(){this.quartiles[e].tracked=!0,this.trackEvent(e,!0)}});var mt,Et,kt,Tt,Vt,St,Rt,Pt,It=function(){function e(){fe(this,e)}return he(e,null,[{key:"once",value:function(e,t,n){function r(){for(var i=0;i<t.length;i++)e.off(t[i],r);n.apply(null,arguments)}t.forEach(function(t){e.on(t,r)})}}]),e}(),bt=e.playerconfig.DEFAULT,Dt=(Et=mt=function(e){function t(e){fe(this,t);var n=ye(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),r=n.props.player;return n.createAdVideoEl(),n._dispose=n._dispose.bind(n),n._showAds=n._showAds.bind(n),n._disposeAdsOutstream=n._disposeAdsOutstream.bind(n),r.on(bt.EVENT.AD_END,n._dispose),r.on(bt.EVENT.USER_SKIP_AD,n._disposeAdsOutstream),r.on(bt.EVENT.VAST_AD_VIDEO_COMPLETE,n._dispose),r.on(bt.EVENT.VPAID_AD_VIDEO_COMPLETE,n._dispose),r.on(bt.EVENT.VPAID_AD_STARTED,n._showAds),r.on(bt.EVENT.AD_VASTRESPONSE,n._disposeAdsOutstream),n}return ge(t,Ae),he(t,[{key:"_disposeAdsOutstream",value:function(){this._dispose(!0,!0)}},{key:"_dispose",value:function(e,t){var n=this.state.videoEl,r=this.props,i=r.player;r.adsITVC&&!t||(i.overlay.getElementsByClassName("overlay-ad")[0].style.opacity="0",Ee.remove(n),n=null,i.off(bt.EVENT.AD_VASTRESPONSE,this._disposeAdsOutstream),i.off(bt.EVENT.AD_END,this._dispose),i.off(bt.EVENT.USER_SKIP_AD,this._dispose),i.off(bt.EVENT.VAST_AD_VIDEO_COMPLETE,this._dispose),i.off(bt.EVENT.VPAID_AD_VIDEO_COMPLETE,this._dispose),i.off(bt.EVENT.VPAID_AD_STARTED,this._showAds))}},{key:"_showAds",value:function(){var e=this.props.player;this.state.videoEl.style.display="block",e.overlay.getElementsByClassName("overlay-ad")[0].style.opacity="1"}},{key:"createAdVideoEl",value:function(){var e=this.props.player,t=this,n=document.createElement("video");n.style.display="none",n.muted=!0,Ee.addClass(n,"VideoEl-container"),e.overlay.getElementsByClassName("overlay-ad")[0].append(n),this.setState({videoEl:n}),n.addEventListener("playing",function(){t._showAds()}),n.ontimeupdate=function(){e.trigger("timeupdate")},n.onvolumechange=function(){e.trigger("advolumechange")},n.onended=function(){e.trigger("advideoend")}}},{key:"src",value:function(e){this.state.videoEl.src=e.src}},{key:"on",value:function(e,t){this.state.videoEl.addEventListener(e,t)}},{key:"off",value:function(e,t){this.state.videoEl.removeEventListener(e,t)}},{key:"currentTime",value:function(){return this.state.videoEl.currentTime}},{key:"duration",value:function(){return this.state.videoEl.duration}},{key:"load",value:function(){this.state.videoEl.load()}},{key:"volume",value:function(e){var t=this.state.videoEl;if("number"!=typeof e)return t.volume;0!==e&&(t.muted=!1),t.volume=e}},{key:"paused",value:function(){return this.state.videoEl.paused}},{key:"play",value:function(){var e=this.state.videoEl;this.props.player.trigger("play"),e.play().then(function(){}).catch(function(e){})}},{key:"pause",value:function(){var e=this.state.videoEl;this.props.player.trigger("pause"),e.pause()}},{key:"preload",value:function(e){this.state.videoEl.preload=e}},{key:"muted",value:function(e){var t=this.state.videoEl;return void 0!==e&&(t.muted=e),t.muted}},{key:"requestFullscreen",value:function(){this.state.videoEl.requestFullscreen()}}]),t}(),mt.propTypes={player:e.PropTypes.object.isRequired},Et),wt=e.playerconfig.DEFAULT,Lt=(Tt=kt=function(e){function t(e){fe(this,t);var n=ye(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),r=n.props.player;return n.createAdAudioEl(),n._dispose=n._dispose.bind(n),n._showAds=n._showAds.bind(n),n._disposeAdsOutstream=n._disposeAdsOutstream.bind(n),r.on(wt.EVENT.AD_END,n._dispose),r.on(wt.EVENT.USER_SKIP_AD,n._disposeAdsOutstream),r.on(wt.EVENT.VAST_AD_VIDEO_COMPLETE,n._dispose),r.on(wt.EVENT.VPAID_AD_VIDEO_COMPLETE,n._dispose),r.on(wt.EVENT.VPAID_AD_STARTED,n._showAds),r.on(wt.EVENT.AD_VASTRESPONSE,n._disposeAdsOutstream),n}return ge(t,Ae),he(t,[{key:"_disposeAdsOutstream",value:function(){this._dispose(!0,!0)}},{key:"_dispose",value:function(e,t){var n=this.state.audioEl,r=this.props,i=r.player;r.adsITVC&&!t||(i.overlay.getElementsByClassName("overlay-ad")[0].style.opacity="0",Ee.remove(n),n=null,i.off(wt.EVENT.AD_VASTRESPONSE,this._disposeAdsOutstream),i.off(wt.EVENT.AD_END,this._dispose),i.off(wt.EVENT.USER_SKIP_AD,this._dispose),i.off(wt.EVENT.VAST_AD_VIDEO_COMPLETE,this._dispose),i.off(wt.EVENT.VPAID_AD_VIDEO_COMPLETE,this._dispose),i.off(wt.EVENT.VPAID_AD_STARTED,this._showAds))}},{key:"_showAds",value:function(){var e=this.props.player;this.state.audioEl.style.display="block",e.overlay.getElementsByClassName("overlay-ad")[0].style.opacity="1"}},{key:"createAdAudioEl",value:function(){var e=this.props.player,t=this,n=document.createElement("audio");n.style.display="none",n.muted=!0,Ee.addClass(n,"VideoEl-container"),e.overlay.getElementsByClassName("overlay-ad")[0].append(n),this.setState({audioEl:n}),n.addEventListener("playing",function(){t._showAds()}),n.onvolumechange=function(){e.trigger("advolumechange")},n.onended=function(){e.trigger("advideoend")}}},{key:"src",value:function(e){this.state.audioEl.src=e.src}},{key:"on",value:function(e,t){this.state.audioEl.addEventListener(e,t)}},{key:"off",value:function(e,t){this.state.audioEl.removeEventListener(e,t)}},{key:"currentTime",value:function(){return this.state.audioEl.currentTime}},{key:"duration",value:function(){return this.state.audioEl.duration}},{key:"load",value:function(){this.state.audioEl.load()}},{key:"volume",value:function(e){var t=this.state.audioEl;if("number"!=typeof e)return t.volume;0!==e&&(t.muted=!1),t.volume=e}},{key:"paused",value:function(){return this.state.audioEl.paused}},{key:"play",value:function(){var e=this.state.audioEl;this.props.player.trigger("play"),e.play().then(function(){}).catch(function(e){})}},{key:"pause",value:function(){var e=this.state.audioEl;this.props.player.trigger("pause"),e.pause()}},{key:"preload",value:function(e){this.state.audioEl.preload=e}},{key:"muted",value:function(e){var t=this.state.audioEl;return void 0!==e&&(t.muted=e),t.muted}},{key:"requestFullscreen",value:function(){this.state.audioEl.requestFullscreen()}}]),t}(),kt.propTypes={player:e.PropTypes.object.isRequired},Tt),Ct=(St=Vt=function(t){function n(e){fe(this,n);var t=ye(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.selectPlayerAd(),t}return ge(n,Ae),he(n,[{key:"createAdVideoEl",value:function(){return"audio"==this.props.player.vastAd.state.vastResponse.ads[0].adType?new Lt(this.props):new Dt(this.props)}},{key:"selectPlayerAd",value:function(){var t=this.props,n=t.player,r=t.preLoaded,i=void 0;i=e.agent.isIOS||!r?n:this.createAdVideoEl(),this.setState({PlayerAdUnit:i})}},{key:"dispose",value:function(){var t=this.state.PlayerAdUnit;e.agent.isIOS||t._dispose()}},{key:"getPlayerAdUnit",value:function(){var e=this.state.PlayerAdUnit;if(e)return e}}]),n}(),Vt.propTypes={player:e.PropTypes.object.isRequired},St),Ot=e.playerconfig.DEFAULT,Nt=function(t){function n(e){fe(this,n);var t=ye(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.type="VAST",t.state={tracker:null,duration:null,orderPlay:!1,firstAdVideoStart:!1,canPlay:!1},t.props.player.one(Ot.EVENT.AD_END,t._handleAdEnd),t}return ge(n,Ae),he(n,[{key:"_handleAdEnd",value:function(){}},{key:"playAd",value:function(t){var n=this;return this.setState({vastResponse:t}),t.nonLinear.height&&!e.agent.isMobile?this._start().then(function(){return n._createnonLinearAds()}).then(function(){n._createTracker()}).then(function(){n.displayNonLinearAds()}):this._start().then(function(){return n._createAdPlayer()}).then(function(){return n._initResourceTracking()}).then(function(){return n._initJsTracking()}).then(function(){return n._selectAdSource()}).then(function(){return n._createVASTTracker()}).then(function(){return n._addClickThrough()}).then(function(){return n._addSkipButton()}).then(function(){return n._setupEvents()}).then(function(){return n._playSelectedAd()}).catch(function(e){throw n.state.playerAd&&n.state.playerAd.dispose(),n._trackError(e),e})}},{key:"_createnonLinearAds",value:function(){function e(e,n){var a=n.eleClickThrough=document.createElement("a");a.href=e,a.style.width=i+"px",a.style.height=r+"px",a.style.left="0px",a.style.top="0px",a.style.zIndex=999,a.setAttribute("target","_blank"),a.style.position="absolute",Ee.addClass(a,"a-img"),t.overlay.getElementsByClassName("non-linear-ad")[0].append(a);var o=n.eleClose=document.createElement("div");o.style.left=i-15+"px",o.style.top="0px",o.style.display="none",o.style.justifyContent="center",o.style.alignItems="center",o.style.fontSize="11px",o.innerHTML="X",Ee.addClass(o,"button-close-image"),t.overlay.getElementsByClassName("non-linear-ad")[0].append(o)}var t=this.props.player,n=this.state.vastResponse.nonLinear,r=parseInt(n.height),i=parseInt(n.width),a=n.minSuggestedDuration.split(":");this.timeHiddenAds=3600*parseInt(a[0])+60*parseInt(a[1])+parseInt(a[2]);var o=n.nonLinearClickThrough;if(this.eleImage=null,this.eleOverHtmlSource=null,this.eleClose=null,this.eleClickThrough=null,n.creativeTypeStatic){var s=n.staticResource,u=this.eleImage=document.createElement("img");u.src=s,u.style.width=i+"px",u.style.height=r+"px",u.style.left="0px",u.style.position="absolute",Ee.addClass(u,"ad-img"),t.overlay.getElementsByClassName("non-linear-ad")[0].append(u),e(o,this)}if(n.creativeTypeHtml){var l=n.HTMLResource;t.overlay.getElementsByClassName("non-linear-ad")[0].style.width=i+"px",t.overlay.getElementsByClassName("non-linear-ad")[0].style.height=r+"px",t.overlay.getElementsByClassName("non-linear-ad")[0].style.zIndex=111;var c=this.eleOverHtmlSource=document.createElement("iframe");c.style.display="block",c.style.width="100%",c.style.height="100%",c.src=l,t.overlay.getElementsByClassName("non-linear-ad")[0].append(c),e(o,this)}t.on("fullscreenchange",function(){t.isFullscreen()?t.overlay.getElementsByClassName("non-linear-ad")[0].style.display="none":t.overlay.getElementsByClassName("non-linear-ad")[0].style.display="block"}),t.on("player_useractive",function(){t.overlay.getElementsByClassName("non-linear-ad")[0].style.top="calc(100% - "+(r+40)+"px)"}),t.on("player_userinactive",function(){t.overlay.getElementsByClassName("non-linear-ad")[0].style.top="calc(100% - "+(r+5)+"px)"}),t.overlay.getElementsByClassName("non-linear-ad")[0].style.left="calc(50% - "+i/2+"px)"}},{key:"_createTracker",value:function(){var e=this.props.player,t=this.state.vastResponse,n=new At("no source",t,e);this.setState({trackerNonLinearAds:n})}},{key:"displayNonLinearAds",value:function(){function e(e){function t(){n.currentTime()>=e+.25*r&&i&&(i=!1,a.trackNonLinearFirst()),n.currentTime()>=e+.5*r&&s&&(s=!1,a.trackNonLinearMid()),n.currentTime()>=e+.75*r&&l&&(l=!1,a.trackNonLinearThrid()),n.currentTime()>=e+r&&(n.vastAd=null,n.off("timeupdate",t),o.eleOverHtmlSource?o.eleOverHtmlSource.remove():n.overlay.getElementsByClassName("ad-img")[0].remove(),n.overlay.getElementsByClassName("a-img")[0].remove(),n.overlay.getElementsByClassName("button-close-image")[0].remove(),n.overlay.getElementsByClassName("non-linear-ad")[0].style.display="none",n.off("player_useractive",function(){n.overlay.getElementsByClassName("non-linear-ad")[0].style.top="calc(100% - "+(u+40)+"px)"}),n.off("player_userinactive",function(){n.overlay.getElementsByClassName("non-linear-ad")[0].style.top="calc(100% - "+(u+5)+"px)"}),a.trackNonLinearComplete(),n.trigger(Ot.EVENT.AD_END))}var r=o.timeHiddenAds+10;n.overlay.getElementsByClassName("non-linear-ad")[0].style.display="block",n.trigger("start_nonLinearAds"),o.eleClickThrough.addEventListener("click",function(){o.state.trackerNonLinearAds.trackNonLinearClick()}),setTimeout(function(){o.eleClose.style.display="flex"},1e3*o.timeHiddenAds),o.eleClose.addEventListener("click",function(){o.state.trackerNonLinearAds.trackCloseNonLinear(),n.vastAd=null,o.eleImage&&o.eleImage.remove(),o.eleOverHtmlSource&&o.eleOverHtmlSource.remove(),n.overlay.getElementsByClassName("a-img")[0].remove(),n.overlay.getElementsByClassName("button-close-image")[0].remove(),n.overlay.getElementsByClassName("non-linear-ad")[0].style.display="none",n.off("timeupdate",t),n.trigger(Ot.EVENT.AD_END)}),a.trackCreativeView(),a.trackNonLinearStart(),n.on("timeupdate",t);var i=!0,s=!0,l=!0}var t=this.props,n=t.player,r=t.type,i=this.state,a=i.trackerNonLinearAds,o=this,s=i.vastResponse.nonLinear,u=parseInt(s.height);"preroll"==r&&n.one("play",function(){e(0)}),"midroll"===r&&(n.on(Ot.EVENT.AD_ORDER_START_MIDROLL,function(){e(n.currentTime())}),n.trigger("prepareMidrollVastSuccess"))}},{key:"_initJsTracking",value:function(){var e=this.props.player;return new Promise(function(t){window.vcTracking&&window.vcTracking(e),t()})}},{key:"_initResourceTracking",value:function(){var e=this.state.vastResponse,t=this.props.player;return new Promise(function(n){e.jstracking.length?e.jstracking.forEach(function(e){var r=void 0;(r=document.createElement("script")).src=""+e,r.onload=n,r.onerror=n,t.el_.appendChild(r)}):n()})}},{key:"_createAdPlayer",value:function(){var e=this,t=this,n=this.state.vastResponse,r=this.props.player;return n.ads[0]&&n.ads[0].inLine&&n.ads[0].inLine.adVerifications&&n.ads[0].inLine.adVerifications.map(function(e){var t='\n                    <html>\n                        <head>\n                            <script type="text/javascript" src = '+e.javaScriptResources[0].uri+"><\/script>\n                        </head>\n                        <body></body>\n                    </html>\n                ",n=document.createElement("iframe");n.style.display="none",n.srcdoc=t,r.overlay.getElementsByClassName("overlay-ad")[0].append(n)}),n.ads[0]&&n.ads[0].inLine&&n.ads[0].inLine.creatives[0]&&n.ads[0].inLine.creatives[0].linear&&n.ads[0].inLine.creatives[0].linear.interactiveCreativeFile&&n.ads[0].inLine.creatives[0].linear.interactiveCreativeFile.map(function(e){var t='\n                    <html>\n                        <head>\n                            <script type="text/javascript" src = '+e.src+"><\/script>\n                        </head>\n                        <body></body>\n                    </html>\n                ",n=document.createElement("iframe");n.style.display="none",n.srcdoc=t,r.overlay.getElementsByClassName("overlay-ad")[0].append(n)}),new Promise(function(n){var r=new Ct(e.props);t.setState({playerAdUnit:r.getPlayerAdUnit(),playerAd:r}),n()})}},{key:"getPlayerAdUnit",value:function(){return this.state.playerAdUnit}},{key:"_start",value:function(){return new Promise(function(e){e()})}},{key:"_selectAdSource",value:function(){var t=void 0,n=this.props.player,r=this.state.vastResponse,i=Ee.getDimension(n.el()).width;if(r.mediaFiles.sort(function(e,t){return Math.abs(i-e.width)-Math.abs(i-t.width)}),r.mediaFiles=r.mediaFiles.filter(function(e){return"video/mp4;video/webm;video/ogg".indexOf(e.type)>=0}),t=n.selectSource(r.mediaFiles).source)return e.log.info("selected source: ",t),this._adUnit&&(this._adUnit._src=t),void this.setState({source:t});throw Ve.VAST_INTEGRATOR_SOURCE_ERROR}},{key:"_createVASTTracker",value:function(){var e=this.props.player,t=this.state,n=t.source,r=t.vastResponse,i=new At(n.src,r,e);this.setState({tracker:i})}},{key:"_addClickThrough",value:function(){function e(e,t){var n={ASSETURI:r.src,CONTENTPLAYHEAD:Ke.formatProgress(1e3*t.currentTime())};return e?Ke.parseURLMacro(e,n):"#"}var t=this.props.player,n=this.state,r=n.source,i=n.vastResponse,a=n.playerAdUnit,o=function(t,n,r){try{var i=e(t.clickThrough,n);r.container.ad.clickThrough.updateBlocker(i)}catch(e){}}.bind(null,i,a,t);a.on("timeupdate",o)}},{key:"_addSkipButton",value:function(){}},{key:"_setupEvents",value:function(){function e(){o.isFullscreen()?u.trackFullscreen():u.trackExitFullscreen()}function t(){Math.abs(l.duration()-l.currentTime())<2||(u.trackPause(),It.once(o,[Ot.EVENT.VAST_AD_RESUME,Ot.EVENT.AD_END,Ot.EVENT.AD_CANCEL],function(e){e.type===Ot.EVENT.VAST_AD_RESUME&&u.trackResume()}))}function n(){var e=1e3*l.currentTime();u.trackProgress(e)}function r(){u.trackImpressions(),u.trackCreativeView();var e=o.el_.getBoundingClientRect().height,t=o.el_.getBoundingClientRect().top,n=window.innerHeight;t+e/2<0||t+e/2>n?u.trackNotViewables():u.trackViewables()}function i(){var e=l.volume(),t=l.muted();0===e||t?u.trackMute():u.trackUnmute()}function a(){var e=l.duration();isNaN(e)||c||(c=!0,u.durationChange(1e3*e))}var o=this.props.player,s=this.state,u=s.tracker,l=s.playerAdUnit,c=!1;o.on("fullscreenchange",e),o.on(Ot.EVENT.VAST_AD_VIDEO_START,r),o.on(Ot.EVENT.VAST_AD_START,function(){l.off("durationchange",a)}),l.on("durationchange",function(){l.on("pause",t),l.on("timeupdate",n),l.on("volumechange",i),l.on("durationchange",a),l.on("play",function(){o.trigger(Ot.EVENT.VAST_AD_RESUME)}),a()}),It.once(o,[Ot.EVENT.AD_END,Ot.EVENT.AD_CANCEL,Ot.EVENT.AD_SKIP],function(){o.off("fullscreenchange",e),o.off(Ot.EVENT.VAST_AD_VIDEO_START,r),l.off("pause",t),l.off("timeupdate",n),l.off("volumechange",i),l.off("durationchange",a)}),It.once(o,[Ot.EVENT.AD_END,Ot.EVENT.AD_CANCEL,Ot.EVENT.AD_SKIP],function(e){e.type===Ot.EVENT.AD_END&&u.trackComplete()})}},{key:"_playSelectedAd",value:function(){var t=this,n=this.props,r=n.player,i=n.type,a=n.preLoaded,o=n.adsITVC,s=this.state,u=s.playerAdUnit,l=s.orderPlay,c=s.firstAdVideoStart,d=s.canPlay,p=s.source,f=s.vastResponse,h=r.vastAd;return new Promise(function(n,s){function v(){r.off(Ot.EVENT.AD_SKIP,y),r.off("play",S),r.off("timeupdate",V),r.off("timeupdate",A),r.off(Ot.EVENT.AD_ORDER_START_MIDROLL,S),r.off(Ot.EVENT.AD_ORDER_START_POSTROLL,S),u.off("ended",y),u.off("error",m),u.off("loadedmetadata",E),u.off("playing",k)}function g(){return{src:r.currentSrc(),duration:r.duration(),currentTime:r.currentTime()-1,type:r.currentType()}}function y(e){"ended"===e.type&&u.duration()-u.currentTime()>3||(v(),"ended"!==e.type&&e.type!==Ot.EVENT.AD_SKIP||(r.trigger(Ot.EVENT.VAST_AD_VIDEO_COMPLETE),n()))}function _(){d?(r.trigger(Ot.EVENT.AD_PLAY,h.state.vastResponse),r.trigger(Ot.EVENT.VAST_AD_START),r.trigger(Ot.EVENT.AD_START,h),u.play()):l=!0}function A(){r.vastAd._prepareForAd(),r.vastAd.firstAd=!0,_()}function m(){v(),s("Error! Something went wrong")}function E(){d||r.trigger("ad:ready",f),l&&!d&&(d=!0,_()),d=!0}function k(){c||(t._vastAdVideoStart(),c=!0)}function T(){r.one("timeupdate",function(){var e=g();r.vastAd._setUpRestorePlayer(),r.trigger("snapshotPlayer",e),u.preload("auto"),u.src(p),u.load(),A()})}function V(){r.paused()?r.one("play",S):S()}function S(){var e=g();r.trigger("snapshotPlayer",e),A()}if(u.on("durationchange",function(){var e=u.duration();t.setState({duration:e})}),u.on("error",m),u.on("loadedmetadata",E),u.on("playing",k),u.on("ended",y),r.on(Ot.EVENT.AD_CANCEL,y),r.on(Ot.EVENT.AD_SKIP,y),!a&&!r.vastAd.firstAd){var R=g();return r.vastAd._setUpRestorePlayer(),r.trigger("snapshotPlayer",R),u.preload("auto"),u.src(p),u.load(),void A()}if(!e.agent.isIOS||!a||o)return e.agent.isIOS&&a&&o?(r.one("play",T),void(d||(r.trigger("ad:ready",f),d=!0))):void(r.vastAd.firstAd?_():(r.vastAd._setUpRestorePlayer(),u.preload("auto"),u.src(p),"preroll"===i?r.one("timeupdate",V):"midroll"===i?(u.load(),r.one(Ot.EVENT.AD_ORDER_START_MIDROLL,S),r.trigger("prepareMidrollVastSuccess")):"postroll"===i&&(u.load(),r.one(Ot.EVENT.AD_ORDER_START_POSTROLL,S),r.trigger("preparePostrollSuccess"))));r.one("play",T)})}},{key:"_vastAdVideoStart",value:function(){this.props.player.trigger(Ot.EVENT.VAST_AD_VIDEO_START)}},{key:"getAdDuration",value:function(){var e=this.state.duration;return new Promise(function(t,n){e?t(e):n()})}},{key:"getSkipOffSet",value:function(){var e=this.props.skipoffset;if(e)return e}},{key:"_trackError",value:function(e){var t=this.state.vastResponse;Ke.track(t.errorURLMacros,{ERRORCODE:e.code||900})}},{key:"getAdRemainingTime",value:function(){var e=this.state.playerAdUnit,t=e.duration()-e.currentTime();return Promise.resolve(t)}},{key:"getAdVolume",value:function(){var e=this.state.playerAdUnit.volume();return Promise.resolve(e)}},{key:"skipAd",value:function(){var e=this.props.player,t=this.state.tracker;e&&t&&(t.trackSkip(),e.trigger(Ot.EVENT.AD_SKIP))}},{key:"pauseAd",value:function(){var e=this.props.player;this.state.playerAdUnit.pause(!0),e.trigger(Ot.EVENT.AD_PAUSE_AD)}},{key:"resumeAd",value:function(){var e=this.props.player;this.state.playerAdUnit.play(!0),e.trigger(Ot.EVENT.AD_RESUME_AD)}},{key:"clickThrough",value:function(){var e=this.props.player,t=this.state.tracker;e&&t&&(e.trigger(Ot.EVENT.VAST_AD_CLICK_THRU),t.trackClick())}},{key:"setAdVolume",value:function(e){this.state.playerAdUnit.volume(e)}},{key:"isPaused",value:function(){return this.state.playerAdUnit.paused()}},{key:"requestFullscreen",value:function(){var e=this.state.playerAdUnit;if(e)return e.requestFullscreen()}}]),n}(),Ut=e.playerconfig.DEFAULT,Mt=function(t){function n(e){fe(this,n);var t=ye(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.type="DAAST",t.state={tracker:null,duration:null,orderPlay:!1,firstAdVideoStart:!1,canPlay:!1},t.props.player.one(Ut.EVENT.AD_END,t._handleAdEnd),t}return ge(n,Ae),he(n,[{key:"_handleAdEnd",value:function(){}},{key:"playAd",value:function(e){var t=this;return this.setState({vastResponse:e}),this._start().then(function(){return t._createAdPlayer()}).then(function(){return t._initResourceTracking()}).then(function(){return t._initJsTracking()}).then(function(){return t._selectAdSource()}).then(function(){return t._createVASTTracker()}).then(function(){return t._addClickThrough()}).then(function(){return t._addSkipButton()}).then(function(){return t._setupEvents()}).then(function(){return t._playSelectedAd()}).catch(function(e){throw t.state.playerAd&&t.state.playerAd.dispose(),t._trackError(e),e})}},{key:"_initJsTracking",value:function(){var e=this.props.player;return new Promise(function(t){window.vcTracking&&window.vcTracking(e),t()})}},{key:"_initResourceTracking",value:function(){var e=this.state.vastResponse,t=this.props.player;return new Promise(function(n){e.jstracking.length?e.jstracking.forEach(function(e){var r=void 0;(r=document.createElement("script")).src=""+e,r.onload=n,r.onerror=n,t.el_.appendChild(r)}):n()})}},{key:"_createAdPlayer",value:function(){var e=this,t=this;return new Promise(function(n){var r=new Ct(e.props);t.setState({playerAdUnit:r.getPlayerAdUnit(),playerAd:r}),n()})}},{key:"getPlayerAdUnit",value:function(){return this.state.playerAdUnit}},{key:"_start",value:function(){return new Promise(function(e){e()})}},{key:"_selectAdSource",value:function(){var t=void 0,n=this.props.player,r=this.state.vastResponse,i=Ee.getDimension(n.el()).width;if(r.mediaFiles.sort(function(e,t){return Math.abs(i-e.width)-Math.abs(i-t.width)}),r.mediaFiles=r.mediaFiles.filter(function(e){return"audio/mp4;audio/mpeg;video/mp4".indexOf(e.type)>=0}),t=n.selectSource(r.mediaFiles).source)return e.log.info("selected source: ",t),this._adUnit&&(this._adUnit._src=t),void this.setState({source:t});throw Ve.VAST_INTEGRATOR_SOURCE_ERROR}},{key:"_createVASTTracker",value:function(){var e=this.props.player,t=this.state,n=t.source,r=t.vastResponse,i=new At(n.src,r,e);this.setState({tracker:i})}},{key:"_addClickThrough",value:function(){function e(e,t){var n={ASSETURI:r.src,CONTENTPLAYHEAD:Ke.formatProgress(1e3*t.currentTime())};return e?Ke.parseURLMacro(e,n):"#"}var t=this.props.player,n=this.state,r=n.source,i=n.vastResponse,a=n.playerAdUnit,o=function(t,n,r){try{var i=e(t.clickThrough,n),a=r.container.ad;a.Audio?a.Audio.updateBlocker(i):a.AdTransPlayer&&a.AdTransPlayer.updateBlocker(i)}catch(e){}}.bind(null,i,a,t);a.on("timeupdate",o)}},{key:"_addSkipButton",value:function(){}},{key:"_setupEvents",value:function(){function e(){o.isFullscreen()?u.trackFullscreen():u.trackExitFullscreen()}function t(){Math.abs(l.duration()-l.currentTime())<2||(u.trackPause(),It.once(o,[Ut.EVENT.VAST_AD_RESUME,Ut.EVENT.AD_END,Ut.EVENT.AD_CANCEL],function(e){e.type===Ut.EVENT.VAST_AD_RESUME&&u.trackResume()}))}function n(){var e=1e3*l.currentTime();u.trackProgress(e)}function r(){u.trackImpressions(),u.trackCreativeView();var e=o.el_.getBoundingClientRect().height,t=o.el_.getBoundingClientRect().top,n=window.innerHeight;t+e/2<0||t+e/2>n?u.trackNotViewables():u.trackViewables()}function i(){var e=l.volume(),t=l.muted();0===e||t?u.trackMute():u.trackUnmute()}function a(){var e=l.duration();isNaN(e)||c||(c=!0,u.durationChange(1e3*e))}var o=this.props.player,s=this.state,u=s.tracker,l=s.playerAdUnit,c=!1;o.on("fullscreenchange",e),o.on(Ut.EVENT.VAST_AD_VIDEO_START,r),o.on(Ut.EVENT.VAST_AD_START,function(){l.off("durationchange",a)}),l.on("durationchange",function(){l.on("pause",t),l.on("timeupdate",n),l.on("volumechange",i),l.on("durationchange",a),l.on("play",function(){o.trigger(Ut.EVENT.VAST_AD_RESUME)}),a()}),It.once(o,[Ut.EVENT.AD_END,Ut.EVENT.AD_CANCEL,Ut.EVENT.AD_SKIP],function(){o.off("fullscreenchange",e),o.off(Ut.EVENT.VAST_AD_VIDEO_START,r),l.off("pause",t),l.off("timeupdate",n),l.off("volumechange",i),l.off("durationchange",a)}),It.once(o,[Ut.EVENT.AD_END,Ut.EVENT.AD_CANCEL,Ut.EVENT.AD_SKIP],function(e){e.type===Ut.EVENT.AD_END&&u.trackComplete()})}},{key:"_playSelectedAd",value:function(){var t=this,n=this.props,r=n.player,i=n.type,a=n.preLoaded,o=n.adsITVC,s=this.state,u=s.playerAdUnit,l=s.orderPlay,c=s.firstAdVideoStart,d=s.canPlay,p=s.source,f=s.vastResponse,h=r.vastAd;return new Promise(function(n,s){function v(){r.off(Ut.EVENT.AD_SKIP,y),r.off("play",V),r.off("timeupdate",T),r.off("timeupdate",A),r.off(Ut.EVENT.AD_ORDER_START_MIDROLL,V),r.off(Ut.EVENT.AD_ORDER_START_POSTROLL,V),u.off("ended",y),u.off("error",m),u.off("loadedmetadata",E),u.off("playing",k)}function g(){return{src:r.currentSrc(),duration:r.duration(),currentTime:r.currentTime()-1,type:r.currentType()}}function y(e){"ended"===e.type&&u.duration()-u.currentTime()>3||(v(),"ended"!==e.type&&e.type!==Ut.EVENT.AD_SKIP||(r.trigger(Ut.EVENT.VAST_AD_VIDEO_COMPLETE),n()))}function _(){d?(r.trigger(Ut.EVENT.AD_PLAY,h.state.vastResponse),r.trigger(Ut.EVENT.VAST_AD_START),r.trigger(Ut.EVENT.AD_START,h),u.play()):l=!0}function A(){r.vastAd._prepareForAd(),r.vastAd.firstAd=!0,_()}function m(){v(),s("Error! Something went wrong")}function E(){l&&!d&&(d=!0,_()),r.trigger("ad:ready",f),d=!0}function k(){c||(t._vastAdVideoStart(),c=!0)}function T(){r.paused()?r.one("play",V):V()}function V(){var e=g();r.trigger("snapshotPlayer",e),A()}if(u.on("error",m),u.on("loadedmetadata",E),u.on("playing",k),u.on("ended",y),r.on(Ut.EVENT.AD_CANCEL,y),r.on(Ut.EVENT.AD_SKIP,y),!a&&!r.vastAd.firstAd){var S=g();return r.vastAd._setUpRestorePlayer(),r.trigger("snapshotPlayer",S),u.preload("auto"),u.src(p),u.load(),void A()}e.agent.isIOS&&a&&!o?r.one("play",function(){r.one("timeupdate",function(){var e=g();r.vastAd._setUpRestorePlayer(),r.trigger("snapshotPlayer",e),u.preload("auto"),u.src(p),u.load(),A()})}):r.vastAd.firstAd?_():(r.vastAd._setUpRestorePlayer(),u.preload("auto"),u.src(p),"preroll"===i?r.one("timeupdate",T):"midroll"===i?(u.load(),r.one(Ut.EVENT.AD_ORDER_START_MIDROLL,V),r.trigger("prepareMidrollVastSuccess")):"postroll"===i&&(u.load(),r.one(Ut.EVENT.AD_ORDER_START_POSTROLL,V),r.trigger("preparePostrollSuccess")))})}},{key:"_vastAdVideoStart",value:function(){this.props.player.trigger(Ut.EVENT.VAST_AD_VIDEO_START)}},{key:"getAdDuration",value:function(){var e=this.state.playerAdUnit.duration();return Promise.resolve(e)}},{key:"getSkipOffSet",value:function(){var e=this.props.skipoffset,t=this.state.vastResponse,n=e||t.skipoffset;if(n)return n}},{key:"_trackError",value:function(e){var t=this.state.vastResponse;Ke.track(t.errorURLMacros,{ERRORCODE:e.code||900})}},{key:"getAdRemainingTime",value:function(){var e=this.state.playerAdUnit,t=e.duration()-e.currentTime();return Promise.resolve(t)}},{key:"getAdVolume",value:function(){var e=this.state.playerAdUnit.volume();return Promise.resolve(e)}},{key:"skipAd",value:function(){var e=this.props.player,t=this.state.tracker;e&&t&&(t.trackSkip(),e.trigger(Ut.EVENT.AD_SKIP))}},{key:"pauseAd",value:function(){var e=this.props.player;this.state.playerAdUnit.pause(!0),e.trigger(Ut.EVENT.AD_PAUSE_AD)}},{key:"resumeAd",value:function(){var e=this.props.player;this.state.playerAdUnit.play(!0),e.trigger(Ut.EVENT.AD_RESUME_AD)}},{key:"clickThrough",value:function(){var e=this.props.player,t=this.state.tracker;e&&t&&(e.trigger(Ut.EVENT.VAST_AD_CLICK_THRU),t.trackClick())}},{key:"setAdVolume",value:function(e){this.state.playerAdUnit.volume(e)}},{key:"isPaused",value:function(){return this.state.playerAdUnit.paused()}},{key:"requestFullscreen",value:function(){var e=this.state.playerAdUnit;if(e)return e.requestFullscreen()}}]),n}(),xt=["AdLoaded","AdStarted","AdStopped","AdSkipped","AdSkippableStateChange","AdSizeChange","AdLinearChange","AdDurationChange","AdExpandedChange","AdRemainingTimeChange","AdVolumeChange","AdImpression","AdVideoStart","AdVideoFirstQuartile","AdVideoMidpoint","AdVideoThirdQuartile","AdVideoComplete","AdClickThru","AdInteraction","AdUserAcceptInvitation","AdUserMinimize","AdUserClose","AdPaused","AdPlaying","AdLog","AdError"],jt=(Pt=Rt=function(e){function t(e){fe(this,t);var n=ye(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),r=n.props,i=r.adUnit,a=r.player;if(!i||!n._checkVPAIDInterface(i))throw Ve.VPAID_AD_UNIT_WRAPPER_AD_UNIT_NOT_FULLY;return xt.forEach(function(e){this.on(e,function(){a.trigger("ads.log",e)})}.bind(n)),n}return ge(t,Ae),he(t,[{key:"_checkVPAIDInterface",value:function(e){for(var t=["handshakeVersion","initAd","startAd","stopAd","resizeAd","pauseAd","expandAd","collapseAd"],n=0,r=t.length;n<r;n++)if(!e||!s(e[t[n]]))return!1;return function(e){return s(e.subscribe)||s(e.addEventListener)||s(e.on)}(e)&&function(e){return s(e.unsubscribe)||s(e.removeEventListener)||s(e.off)}(e)}},{key:"adUnitAsyncCall",value:function(){var e,t=this.props,n=t.adUnit,i=t.responseTimeout,a=f(arguments),o=a.shift(),u=a.pop();!function(e,t,n){if(!c(e)||!s(n[e]))throw Ve.VPAID_AD_UNIT_WRAPPER_INVALID_METHOD_NAME.extendsWithData({method:e});if(!s(t))throw Ve.VPAID_AD_UNIT_WRAPPER_MISSING_CALLBACK.extendsWithData({method:e})}(o,u,n),a.push(function(){e&&clearTimeout(e),u.apply(this,arguments)}),n[o].apply(n,a),e=setTimeout(function(){e=null,u(Ve.VPAID_AD_UNIT_WRAPPER_METHOD_TIMEOUT.extendsWithData({method:o})),u=r},i)}},{key:"on",value:function(e,t){var n=this.props.adUnit;(n.addEventListener||n.subscribe||n.on).call(n,e,t)}},{key:"off",value:function(e,t){var n=this.props.adUnit;(n.removeEventListener||n.unsubscribe||n.off).call(n,e,t)}},{key:"waitForEvent",value:function(e,t,n,i){var a=this.props.responseTimeout,o=void 0;!function(e,t){if(!c(e))throw Ve.VPAID_AD_UNIT_WRAPPER_MISSING_EVENT_NAME.extendsWithData({event:e});if(!s(t))throw Ve.VPAID_AD_UNIT_WRAPPER_MISSING_EVENT_CALLBACK.extendsWithData({event:e})}(e,t),n=n||null,this.on(e,function(){var e=f(arguments);o&&(clearTimeout(o),o=null),e.unshift(null),t.apply(n,e)}),o=setTimeout(function(){t(Ve.VPAID_AD_UNIT_WRAPPER_EVENT_TIMEOUT.extendsWithData({event:e})),o=null,t=r},i||a)}},{key:"handshakeVersion",value:function(e,t){this.adUnitAsyncCall("handshakeVersion",e,t)}},{key:"initAd",value:function(e,t,n,r,i,a){var o=this.props.adUnit,s=!1,u=!1;this.waitForEvent("AdLoaded",function(){u||(s=!0,a.apply(null,arguments))}),this.on("AdError",function(e){s||(u=!0,a(e))}),o.initAd(e,t,n,r,i)}},{key:"resizeAd",value:function(e,t,n,r){this.adUnitAsyncCall("resizeAd",e,t,n,r)}},{key:"startAd",value:function(e){var t=this.props.adUnit;this.waitForEvent("AdStarted",e),t.startAd()}},{key:"stopAd",value:function(e){var t=this.props.adUnit;this.waitForEvent("AdStopped",e,null,300),t.stopAd()}},{key:"pauseAd",value:function(e){var t=this.props.adUnit;this.waitForEvent("AdPaused",e),t.pauseAd()}},{key:"resumeAd",value:function(e){var t=this.props.adUnit;this.waitForEvent("AdPlaying",e),t.resumeAd()}},{key:"expandAd",value:function(e){var t=this.props.adUnit;this.waitForEvent("AdExpandedChange",e),t.expandAd()}},{key:"collapseAd",value:function(e){var t=this.props.adUnit;this.waitForEvent("AdExpandedChange",e),t.collapseAd()}},{key:"skipAd",value:function(e){var t=this.props.adUnit;this.waitForEvent("AdSkipped",e,null,300),t.skipAd()}},{key:"setAdVolume",value:function(e,t){this.adUnitAsyncCall("setAdVolume",e,t)}}]),t}(),Rt.propTypes={adUnit:e.PropTypes.object.isRequired,player:e.PropTypes.object.isRequired,responseTimeout:e.PropTypes.number.isRequired,src:e.PropTypes.string.isRequired},Pt);["adLinear","adWidth","adHeight","adExpanded","adSkippableState","adRemainingTime","adDuration","adVolume","adCompanions","adIcons"].forEach(function(e){var t="get"+g(e);jt.prototype[t]=function(e){this.adUnitAsyncCall(t,e)}});var Ft,zt,Bt,Wt=e.playerconfig.DEFAULT,Ht=(Bt=zt=function(t){function n(e){fe(this,n);var t=ye(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));t.type="VPAID",t.VIEW_MODE={NORMAL:"normal",FULLSCREEN:"fullscreen",THUMBNAIL:"thumbnail"},t.state={ended:!1,duration:null};var r=t.props.player;return r.one("vpaid:AdEnd",t._handleAdEnd),r.one(Wt.EVENT.AD_END,t._handleAdEnd),t}return ge(n,Ae),he(n,[{key:"_handleAdEnd",value:function(){e.log.debug("<VPAIDIntegrator._handleAdEnd>");var t=this.state.tech;t&&t.unloadAdUnit(),this.containerEl&&(Ee.remove(this.containerEl),this.containerEl=null)}},{key:"playAd",value:function(e){var t=this,n=this,r=this.props.player;return this.setState({vastResponse:e}),this._start().then(function(){return n._createAdPlayer()}).then(function(){return n._findSupportedTech()}).then(function(){return n._initResourceTracking()}).then(function(){return n._initJsTracking()}).then(function(){return n._loadAdUnit()}).then(function(){return n._playAdUnit()}).then(function(){var e=t.state.playerAdUnit,i=r.vastAd.state.restorePlayer.state.snapshot,a=i.muted?0:i.volume;return e.muted(i.muted),n.setAdVolume(a),n._finishPlaying()}).catch(function(e){throw n._trackError(e),n._dispose(),e})}},{key:"_initResourceTracking",value:function(){var e=this.state.vastResponse,t=this.props.player;return new Promise(function(n){e.jstracking.length?e.jstracking.forEach(function(e){var r=void 0;(r=document.createElement("script")).src=""+e,r.onload=n,r.onerror=n,t.el_.appendChild(r)}):n()})}},{key:"_initJsTracking",value:function(){var e=this.props.player;return new Promise(function(t){window.vcTracking&&window.vcTracking(e),t()})}},{key:"_dispose",value:function(){var e=this.state,t=e.tech,n=e.playerAdUnit;t&&t.unloadAdUnit(),this.containerEl&&(Ee.remove(this.containerEl),this.containerEl=null),n._dispose()}},{key:"_createAdPlayer",value:function(){var e=this,t=this,n=this.props.player;return this.containerEl=this._createVPAIDContainerEl(n),new Promise(function(n){var r=new Ct(e.props);t.setState({playerAdUnit:r.getPlayerAdUnit()}),n()})}},{key:"requestFullscreen",value:function(){var e=this.state.playerAdUnit;e&&e.requestFullscreen()}},{key:"getSkipOffSet",value:function(){var e=this.props.skipoffset;if(e)return e}},{key:"skipAd",value:function(){var e=this.props.player,t=this.state,n=t.tracker,r=t.adUnit;e&&n&&(n.trackSkip(),r.skipAd(function(t){t&&e.trigger("vpaid-skip-ad-error",t)}))}},{key:"getAdVolume",value:function(){var e=this.state.adUnit;return new Promise(function(t,n){e.getAdVolume(function(e,r){if(e)return n(e);t(r)})})}},{key:"getAdExpanded",value:function(){var e=this.state.adUnit;return new Promise(function(t,n){e.getAdExpanded(function(e,r){e&&n(e),t(r)})})}},{key:"setAdVolume",value:function(e){this.state.adUnit.setAdVolume(e,this._logError)}},{key:"pauseAd",value:function(){var e=this.props.player;e.trigger("vpaid.pauseAd"),e.pause(!0),e.trigger(Wt.EVENT.AD_PAUSE_AD)}},{key:"resumeAd",value:function(){var e=this.props.player;e.trigger("vpaid.resumeAd"),e.trigger(Wt.EVENT.AD_RESUME_AD)}},{key:"isPaused",value:function(){return this.state.paused}},{key:"getSrc",value:function(){return this.state.tech.mediaFile}},{key:"techName",value:function(){return this.state.tech.name}},{key:"getAdRemainingTime",value:function(){var e=this.state.adUnit;return new Promise(function(t,n){e.getAdRemainingTime(function(e,r){if(e)return n(e);t(r)})})}},{key:"getAdDuration",value:function(){var e=this.state,t=e.adUnit,n=e.duration;return n?Promise.resolve(n):new Promise(function(e,n){t.getAdDuration(function(t,r){if(t)return n(t);e(r)})})}},{key:"_createVPAIDContainerEl",value:function(){var e=this.props.player,t=document.createElement("div");return t.style.display="none",Ee.addClass(t,"VPAID-container"),e.overlay.append(t),t}},{key:"_start",value:function(){return new Promise(function(e){e()})}},{key:"_findSupportedTech",value:function(){var t=this.state.vastResponse,n=t.mediaFiles.filter(Ke.isVPAID),r=[],i=void 0,a=void 0,o=[];t.ads[0].inLine&&t.ads[0].inLine.creatives[0]&&t.ads[0].inLine.creatives[0].linear&&t.ads[0].inLine.creatives[0].linear.interactiveCreativeFile&&(a=t.ads[0].inLine.creatives[0].linear.interactiveCreativeFile[0].src),t.adVerifications&&t.adVerifications.map(function(e){o.push(e.javaScriptResources[0].uri)});for(var s=0,u=n.length;s<u;s+=1){var l=n[s],c=Ke.findSupportedVPAIDTech(l.type);c&&r.push({mediaFile:l,tech:c})}if(r.length){var d=r[0],p={mediaFile:d.mediaFile,interactiveCreativeFile:a,verifications:o[0]};i=new d.tech(p,this.props)}if(i)return e.log.info("<VPAIDIntegrator.playAd> found tech: ",i),void this.setState({tech:i});throw Ve.VPAID_INTEGRATOR_NOT_SUPPORT_MEDIAFILE}},{key:"getPlayerAdUnit",value:function(){return this.state.playerAdUnit}},{key:"_loadAdUnit",value:function(){e.log.debug("<VPAIDIntegrator._loadAdUnit>");var t=this,n=this.props,r=n.player,i=n.responseTimeout,a=this.state,o=a.tech,s=a.playerAdUnit,u=void 0;return u=e.agent.isIOS?s.el().querySelector(".vjs-tech"):s.state.videoEl,new Promise(function(n,a){o.loadAdUnit(t.containerEl,u,function(s,u){if(s)return e.log.debug("<VPAIDIntegrator._loadAdUnit> error: ",s),void a(s);try{u=t._createVPAIDAdUnitWrapper(u,o.mediaFile.src,i),r.trigger(o.name+"-ad"),t.setState({adUnit:u}),e.log.debug("<VPAIDIntegrator._loadAdUnit> success"),n()}catch(t){e.log.debug("<VPAIDIntegrator._loadAdUnit> error: ",s),a(s)}})})}},{key:"_playAdUnit",value:function(){e.log.debug("<VPAIDIntegrator._playAdUnit>");var t=this;return this._start().then(function(){return t._handshake()}).then(function(){return t._setupEvents()}).then(function(){return t._initAd()}).then(function(){return t._addSkipButton()}).then(function(){return t._addMuteButton()}).then(function(){return t._linkPlayerControls()}).then(function(){return t._playVideoEl()}).then(function(){return t._startAd()})}},{key:"_playVideoEl",value:function(){var t=this.props,n=t.preLoaded,r=t.type,i=t.player,a=t.adsITVC,o=this.state.vastResponse,s=this;return new Promise(function(t){function u(){t()}function l(){var t={src:i.currentSrc(),duration:i.duration(),currentTime:i.currentTime()-1,type:i.currentType()};e.agent.isIOS&&(t=s.snapshot),i.vastAd._setUpRestorePlayer(),i.trigger("snapshotPlayer",t),i.vastAd._prepareForAd(),i.trigger(Wt.EVENT.AD_START,i.vastAd),i.vastAd.firstAd=!0,u()}i.trigger("ad:ready",o),n||i.vastAd.firstAd?i.vastAd.firstAd?u():a&&"preroll"===r?i.one("timeupdate",function(){l()}):"preroll"===r?i.one("timeupdate",function(){i.paused()?i.one("play",l):l()}):"midroll"===r?(i.one(Wt.EVENT.AD_ORDER_START_MIDROLL,l),i.trigger("prepareMidrollVastSuccess")):"postroll"===r&&(i.one(Wt.EVENT.AD_ORDER_START_POSTROLL,l),i.one(Wt.EVENT.PLAYER_ENDED_CONTEND,function(){i.trigger("preparePostrollSuccess")})):l()})}},{key:"_handshake",value:function(){function t(e){var t=n(e);return t>=1&&t<=2}function n(e){var t=e.split(".");return parseInt(t[0],10)}e.log.debug("<VPAIDIntegrator._handshake>");var r=this.state.adUnit,i=this.props.VPAID_VERSION;return new Promise(function(e,n){r.handshakeVersion(i,function(r,i){r?n(r):i&&t(i)?e():n(Ve.VPAID_INTEGRATOR_HANDSHAKE_NOT_SUPPORT_VERSION)})})}},{key:"_initAd",value:function(){e.log.debug("<VPAIDIntegrator._initAd>");var t=this,n=this.state,r=n.adUnit,i=n.vastResponse,a=this.props.player,o=a.el().querySelector(".vjs-tech"),s=void 0,u=Ee.getDimension(o);return this.snapshot={src:a.currentSrc(),duration:a.duration(),currentTime:a.currentTime()-1,type:a.currentType()},s=i.duration?{AdParameters:i.adParameters||"",playerID:a.id_,duration:i.duration}:{AdParameters:i.adParameters||"",playerID:a.id_},new Promise(function(e,n){r.initAd(u.width,u.height,t.VIEW_MODE.NORMAL,-1,s,function(r){if(r)return a.trigger("error_ads_gg"),void n(Ve.VPAID_INTEGRATOR_ERROR_WHILE_INIT.extendsWithData({error:r}));t.setState({inited:!0}),e()})})}},{key:"_setupEvents",value:function(){function t(){o.isPaused()&&o.setState({paused:!1})}function n(){o.setState({paused:!0})}function i(){c.pauseAd(r)}function a(){c.resumeAd(r)}e.log.debug("<VPAIDIntegrator._setupEvents>");var o=this,s=this._createVASTTracker(),u=this.props.player,l=this.state,c=l.adUnit,d=l.vastResponse,f=l.playerAdUnit;this.setState({tracker:s}),c.on("AdSkipped",function(){e.log.trace("<VPAIDIntegrator Event>","AdSkipped"),u.trigger(Wt.EVENT.VPAID_AD_SKIPPED),s.trackSkip()}),c.on("AdImpression",function(){e.log.trace("<VPAIDIntegrator Event>","AdImpression"),u.trigger(Wt.EVENT.VPAID_AD_IMPRESSION),s.trackImpressions()}),c.on("AdStarted",function(){e.log.trace("<VPAIDIntegrator Event>","AdStarted"),u.trigger(Wt.EVENT.VPAID_AD_STARTED),s.trackCreativeView(),t()}),c.on("AdVideoStart",function(){e.log.trace("<VPAIDIntegrator Event>","AdVideoStart"),u.trigger(Wt.EVENT.VPAID_AD_VIDEO_START),s.trackStart(),t()}),c.on("AdPlaying",function(){e.log.trace("<VPAIDIntegrator Event>","AdPlaying"),u.trigger(Wt.EVENT.VPAID_AD_PLAYING),u.trigger(Wt.EVENT.AD_RESUME_AD),s.trackResume(),t()}),c.on("AdPaused",function(){e.log.trace("<VPAIDIntegrator Event>","AdPaused"),u.trigger(Wt.EVENT.VPAID_AD_PAUSED),u.trigger(Wt.EVENT.AD_PAUSE_AD),s.trackPause(),n()}),c.on("AdVideoFirstQuartile",function(){e.log.trace("<VPAIDIntegrator Event>","AdVideoFirstQuartile"),u.trigger(Wt.EVENT.VPAID_AD_VIDEO_FIRST_QUARTILE),s.trackFirstQuartile()}),c.on("AdVideoMidpoint",function(){e.log.trace("<VPAIDIntegrator Event>","AdVideoMidpoint"),u.trigger(Wt.EVENT.VPAID_AD_VIDEO_MID_POINT),s.trackMidpoint()}),c.on("AdVideoThirdQuartile",function(){e.log.trace("<VPAIDIntegrator Event>","AdVideoThirdQuartile"),u.trigger(Wt.EVENT.VPAID_AD_VIDEO_THIRD_QUARTILE),s.trackThirdQuartile()}),c.on("AdVideoComplete",function(){e.log.trace("<VPAIDIntegrator Event>","AdVideoComplete"),u.trigger(Wt.EVENT.VPAID_AD_VIDEO_COMPLETE),s.trackComplete()}),c.on("AdClickThru",function(t){e.log.trace("<VPAIDIntegrator Event>","AdClickThru"),u.trigger(Wt.EVENT.VPAID_AD_CLICK_THRU),f.paused()&&setTimeout(function(){f.play()},500);var n=t.url,r=t.playerHandles,i=p(n)?n:function(e){var t={CONTENTPLAYHEAD:0};return e?Ke.parseURLMacro(e,t):null}(d.clickThrough);s.trackClick(),r&&i&&window.open(i,"_blank")}),c.on("AdUserAcceptInvitation",function(){e.log.trace("<VPAIDIntegrator Event>","AdUserAcceptInvitation"),u.trigger(Wt.EVENT.VPAID_AD_USER_ACCEPT_INVITATION),s.trackAcceptInvitation(),s.trackAcceptInvitationLinear()}),c.on("AdUserClose",function(){e.log.trace("<VPAIDIntegrator Event>","AdUserClose"),u.trigger(Wt.EVENT.VPAID_AD_USER_CLOSE),s.trackClose(),s.trackCloseLinear()}),c.on("AdUserMinimize",function(){e.log.trace("<VPAIDIntegrator Event>","AdUserMinimize"),u.trigger(Wt.EVENT.VPAID_AD_USER_MINIMIZE),s.trackCollapse()}),c.on("AdError",function(){e.log.trace("<VPAIDIntegrator Event>","AdError"),u.trigger(Wt.EVENT.VPAID_AD_ERROR),s.trackErrorWithCode(901)}),c.on("AdVolumeChange",function(){e.log.trace("<VPAIDIntegrator Event>","AdVolumeChange"),u.trigger(Wt.EVENT.VPAID_AD_VOLUME_CHANGE),c.getAdVolume(function(e,t){0===t&&s.trackMute(),t>0&&s.trackUnmute()})}),c.on("AdExpandedChange",function(){e.log.trace("< VPAIDIntegrator Event > ","AdExpandedChange"),c.getAdExpanded(function(e,t){t?s.trackExpand():s.trackCollapse()})});var h=m(this._resizeAd,100),v=this.props.autoResize;v&&(Ee.addEventListener(window,"resize",h),Ee.addEventListener(window,"orientationchange",h)),u.on("vast.resize",h),u.on("vpaid.pauseAd",i),u.on("vpaid.resumeAd",a),u.one(Wt.EVENT.VPAID_AD_STARTED,h),u.one(Wt.EVENT.VPAID_AD_IMPRESSION,h),u.one(Wt.EVENT.AD_END,function(){u.off("vast.resize",h),u.off("vpaid.pauseAd",i),u.off("vpaid.resumeAd",a),u.off(Wt.EVENT.VPAID_AD_STARTED,h),u.off(Wt.EVENT.VPAID_AD_IMPRESSION,h),v&&(Ee.removeEventListener(window,"resize",h),Ee.removeEventListener(window,"orientationchange",h))})}},{key:"_addSkipButton",value:function(){}},{key:"_addMuteButton",value:function(){}},{key:"_linkPlayerControls",value:function(){}},{key:"_startAd",value:function(){e.log.debug("<VPAIDIntegrator._startAd>");var t=this.props.player,n=this.state.adUnit;return this.containerEl.style.display="",new Promise(function(r,i){n.startAd(function(n){if(n)return t.trigger("error_ads_gg"),e.log.debug("<VPAIDIntegrator._startAd> error: ",n),void i(n);e.log.debug("<VPAIDIntegrator._startAd> success"),t.trigger(Wt.EVENT.VPAID_AD_START),r()})})}},{key:"_finishPlaying",value:function(){e.log.debug("<VPAIDIntegrator._finishPlaying>");var t=this,n=this.props.player,r=this.state.adUnit;return new Promise(function(e,i){function a(a){if(!t.state.ended){if(n.off("vpaid-skip-ad-error"),r.off("AdStopped"),r.off("AdVideoComplete"),r.off("AdError"),t.setState({ended:!0}),n.trigger("vpaid:AdEnd"),a)return i(a);e()}}r.on("AdSkipped",function(){a()}),r.on("AdStopped",function(){a()}),r.on("AdVideoComplete",function(){a()}),r.on("AdError",function(e){a(Ve.VPAID_INTEGRATOR_ERROR_WHILE_WAITING_FINISH.extendsWithData({error:e}))}),n.one("vpaid-skip-ad-error",function(e,t){a(t)})})}},{key:"_createVPAIDAdUnitWrapper",value:function(e,t,n){var r=this.props.player;return new jt({player:r,adUnit:e,src:t,responseTimeout:n})}},{key:"_createVASTTracker",value:function(){var e=this.props.player,t=this.state,n=t.tech,r=t.vastResponse;return new At(n.mediaFile.src,r,e)}},{key:"_resizeAd",value:function(){var t=this.props.player,n=this.state.adUnit,r=this.VIEW_MODE,i=t.el().querySelector(".vjs-tech"),a=Ee.getDimension(i),o=t.isFullscreen()?r.FULLSCREEN:r.NORMAL;n.resizeAd(a.width,a.height,o,this._logError),e.log.info("resizeAd","width:",a.width,"height:",a.height)}},{key:"_logError",value:function(t){t&&e.log.error("ERROR: "+t.message,t)}},{key:"expandAd",value:function(){var e=this.props.player,t=this.state.adUnit;e&&t.expandAd(function(){})}},{key:"collapseAd",value:function(){var e=this.props.player,t=this.state.adUnit;e&&t.collapseAd(function(){})}},{key:"_trackError",value:function(e){var t=this.state.vastResponse;Ke.track(t.errorURLMacros,{ERRORCODE:e.code||901})}}]),n}(),zt.defaultProps={responseTimeout:5e3,VPAID_VERSION:"2.0",autoResize:!0},Ft=Bt,K(Ft.prototype,"_handleAdEnd",[e.autobind],Object.getOwnPropertyDescriptor(Ft.prototype,"_handleAdEnd"),Ft.prototype),K(Ft.prototype,"_resizeAd",[e.autobind],Object.getOwnPropertyDescriptor(Ft.prototype,"_resizeAd"),Ft.prototype),K(Ft.prototype,"_logError",[e.autobind],Object.getOwnPropertyDescriptor(Ft.prototype,"_logError"),Ft.prototype),Ft),qt=function(e){this.controller=e,this.adDisplayContainer=null,this.adDisplayContainerInitialized=!1,this.adsLoader=null,this.adsManager=null,this.adsRenderingSettings=null,this.adTagUrl=null,this.adsResponse=null,this.currentAd=null,this.adTrackingTimer=null,this.allAdsCompleted=!1,this.adsActive=!1,this.adPlaying=!1,this.adMuted=!1,this.adBreakReadyListener=void 0,this.contentCompleteCalled=!1,this.adsManagerDimensions={width:0,height:0},this.autoPlayAdBreaks=!0,!1===this.controller.getSettings().autoPlayAdBreaks&&(this.autoPlayAdBreaks=!1),this.controller.getSettings().locale&&google.ima.settings.setLocale(this.controller.getSettings().locale),this.controller.getSettings().disableFlashAds&&google.ima.settings.setDisableFlashAds(this.controller.getSettings().disableFlashAds),this.controller.getSettings().disableCustomPlaybackForIOS10Plus&&google.ima.settings.setDisableCustomPlaybackForIOS10Plus(this.controller.getSettings().disableCustomPlaybackForIOS10Plus),this.controller.getSettings().ppid&&google.ima.settings.setPpid(this.controller.getSettings().ppid),this.controller.getSettings().featureFlags&&google.ima.settings.setFeatureFlags(this.controller.getSettings().featureFlags),this.initAdObjects(),(this.controller.getSettings().adTagUrl||this.controller.getSettings().adsResponse)&&this.requestAds()};qt.prototype.initAdObjects=function(){this.adDisplayContainer=new google.ima.AdDisplayContainer(this.controller.getAdContainerDiv(),this.controller.getContentPlayer()),this.adsLoader=new google.ima.AdsLoader(this.adDisplayContainer),this.adsLoader.getSettings().setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED),0==this.controller.getSettings().vpaidAllowed&&this.adsLoader.getSettings().setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.DISABLED),void 0!==this.controller.getSettings().vpaidMode&&this.adsLoader.getSettings().setVpaidMode(this.controller.getSettings().vpaidMode),this.controller.getSettings().locale&&this.adsLoader.getSettings().setLocale(this.controller.getSettings().locale),this.controller.getSettings().numRedirects&&this.adsLoader.getSettings().setNumRedirects(this.controller.getSettings().numRedirects),this.controller.getSettings().sessionId&&this.adsLoader.getSettings().setSessionId(this.controller.getSettings().sessionId),this.adsLoader.getSettings().setPlayerType("vcplayer"),this.adsLoader.getSettings().setPlayerVersion("2.0"),this.adsLoader.getSettings().setAutoPlayAdBreaks(this.autoPlayAdBreaks),this.adsLoader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.onAdsManagerLoaded.bind(this),!1),this.adsLoader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdsLoaderError.bind(this),!1)},qt.prototype.requestAds=function(){var e=new google.ima.AdsRequest;if(this.controller.getSettings().adTagUrl?e.adTagUrl=this.controller.getSettings().adTagUrl:e.adsResponse=this.controller.getSettings().adsResponse,this.controller.getSettings().forceNonLinearFullSlot&&(e.forceNonLinearFullSlot=!0),this.controller.getSettings().vastLoadTimeout&&(e.vastLoadTimeout=this.controller.getSettings().vastLoadTimeout),this.controller.getSettings().omidVendorAccess){e.omidAccessModeRules={};var t=this.controller.getSettings().omidVendorAccess;Object.keys(t).forEach(function(n){e.omidAccessModeRules[n]=t[n]})}e.linearAdSlotWidth=this.controller.getPlayerWidth(),e.linearAdSlotHeight=this.controller.getPlayerHeight(),e.nonLinearAdSlotWidth=this.controller.getSettings().nonLinearWidth||this.controller.getPlayerWidth(),e.nonLinearAdSlotHeight=this.controller.getSettings().nonLinearHeight||this.controller.getPlayerHeight(),e.setAdWillAutoPlay(this.controller.adsWillAutoplay()),e.setAdWillPlayMuted(this.controller.adsWillPlayMuted());var n=this.controller.getSettings().adsRequest;n&&"object"===(void 0===n?"undefined":de(n))&&Object.keys(n).forEach(function(t){e[t]=n[t]}),this.adsLoader.requestAds(e)},qt.prototype.onAdsManagerLoaded=function(e){this.createAdsRenderingSettings(),this.adsManager=e.getAdsManager(this.controller.getContentPlayheadTracker(),this.adsRenderingSettings),this.adsManager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdError.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.AD_BREAK_READY,this.onAdBreakReady.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.onContentPauseRequested.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.onContentResumeRequested.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED,this.onAllAdsCompleted.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.LOADED,this.onAdLoaded.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.STARTED,this.onAdStarted.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.COMPLETE,this.onAdComplete.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.SKIPPED,this.onAdComplete.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.PAUSED,this.onAdPaused.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.RESUMED,this.onAdResumed.bind(this)),this.autoPlayAdBreaks||this.initAdsManager();var t=this.controller.getSettings().preventLateAdStart;t?t&&!this.isAdTimedOut&&this.controller.onAdsReady():this.controller.onAdsReady(),this.controller.getSettings().adsManagerLoadedCallback&&this.controller.getSettings().adsManagerLoadedCallback()},qt.prototype.onAdsLoaderError=function(e){window.console.warn("AdsLoader error: "+e.getError()),this.controller.onErrorLoadingAds(e),this.adsManager&&this.adsManager.destroy()},qt.prototype.initAdsManager=function(){try{var e=this.controller.getPlayerWidth(),t=this.controller.getPlayerHeight();this.adsManagerDimensions.width=e,this.adsManagerDimensions.height=t,this.adsManager.init(e,t,google.ima.ViewMode.NORMAL),this.adsManager.setVolume(this.controller.getPlayerVolume()),this.initializeAdDisplayContainer()}catch(e){this.onAdError(e)}},qt.prototype.createAdsRenderingSettings=function(){if(this.adsRenderingSettings=new google.ima.AdsRenderingSettings,this.adsRenderingSettings.restoreCustomPlaybackStateOnAdBreakComplete=!0,this.controller.getSettings().removeCountdown&&(this.adsRenderingSettings.uiElements=[]),this.controller.getSettings().adsRenderingSettings)for(var e in this.controller.getSettings().adsRenderingSettings)""!==e&&(this.adsRenderingSettings[e]=this.controller.getSettings().adsRenderingSettings[e])},qt.prototype.onAdError=function(e){var t=void 0!==e.getError?e.getError():e.stack;window.console.warn("Ad error: "+t),this.adsManager.destroy(),this.controller.onAdError(e),this.adsActive=!1,this.adPlaying=!1},qt.prototype.onAdBreakReady=function(e){this.adBreakReadyListener(e)},qt.prototype.onContentPauseRequested=function(e){this.adsActive=!0,this.adPlaying=!0,this.controller.onAdBreakStart(e)},qt.prototype.onContentResumeRequested=function(){this.adsActive=!1,this.adPlaying=!1,this.controller.onAdBreakEnd()},qt.prototype.onAllAdsCompleted=function(){this.allAdsCompleted=!0,this.controller.onAllAdsCompleted()},qt.prototype.onAdLoaded=function(e){e.getAd().isLinear()||(this.controller.onNonLinearAdLoad(),this.controller.playContent())},qt.prototype.onAdStarted=function(e){this.currentAd=e.getAd(),this.currentAd.isLinear()?(this.adTrackingTimer=setInterval(this.onAdPlayheadTrackerInterval.bind(this),250),this.controller.onLinearAdStart()):this.controller.onNonLinearAdStart()},qt.prototype.onAdPaused=function(){this.controller.onAdsPaused(),this.adPlaying=!1},qt.prototype.onAdResumed=function(){this.controller.onAdsResumed()},qt.prototype.onAdComplete=function(){this.currentAd.isLinear()&&clearInterval(this.adTrackingTimer)},qt.prototype.onAdPlayheadTrackerInterval=function(){if(null!==this.adsManager){var e=this.adsManager.getRemainingTime(),t=this.currentAd.getDuration(),n=t-e;n=n>0?n:0;var r=0,i=void 0;this.currentAd.getAdPodInfo()&&(i=this.currentAd.getAdPodInfo().getAdPosition(),r=this.currentAd.getAdPodInfo().getTotalAds()),this.controller.onAdPlayheadUpdated(n,e,t,i,r)}},qt.prototype.onContentComplete=function(){this.adsLoader&&(this.adsLoader.contentComplete(),this.contentCompleteCalled=!0),(this.adsManager&&this.adsManager.getCuePoints()&&!this.adsManager.getCuePoints().includes(-1)||!this.adsManager)&&this.controller.onNoPostroll(),this.allAdsCompleted&&this.controller.onContentAndAdsCompleted()},qt.prototype.onPlayerDisposed=function(){this.adTrackingTimer&&clearInterval(this.adTrackingTimer),this.adsManager&&(this.adsManager.destroy(),this.adsManager=null)},qt.prototype.onPlayerReadyForPreroll=function(){if(this.autoPlayAdBreaks){this.initAdsManager();try{this.controller.showAdContainer(),this.adsManager.setVolume(this.controller.getPlayerVolume()),this.adsManager.start()}catch(e){this.onAdError(e)}}},qt.prototype.onAdTimeout=function(){this.isAdTimedOut=!0},qt.prototype.onPlayerEnterFullscreen=function(){this.adsManager&&this.adsManager.resize(window.screen.width,window.screen.height,google.ima.ViewMode.FULLSCREEN)},qt.prototype.onPlayerExitFullscreen=function(){this.adsManager&&this.adsManager.resize(this.controller.getPlayerWidth(),this.controller.getPlayerHeight(),google.ima.ViewMode.NORMAL)},qt.prototype.onPlayerVolumeChanged=function(e){this.adsManager&&this.adsManager.setVolume(e),this.adMuted=0==e},qt.prototype.onPlayerResize=function(e,t){this.adsManager&&(this.adsManagerDimensions.width=e,this.adsManagerDimensions.height=t,this.adsManager.resize(e,t,google.ima.ViewMode.NORMAL))},qt.prototype.getCurrentAd=function(){return this.currentAd},qt.prototype.setAdBreakReadyListener=function(e){this.adBreakReadyListener=e},qt.prototype.isAdPlaying=function(){return this.adPlaying},qt.prototype.isAdMuted=function(){return this.adMuted},qt.prototype.pauseAds=function(){this.adsManager.pause(),this.adPlaying=!1},qt.prototype.resumeAds=function(){this.adsManager.resume(),this.adPlaying=!0},qt.prototype.remainingTimeAds=function(){if(this.adsManager)return this.adsManager.getRemainingTime()},qt.prototype.currentTimeAds=function(){var e=this.adsManager.getRemainingTime();return this.currentAd?this.currentAd.getDuration()-e:0},qt.prototype.durationAds=function(){return this.currentAd?this.currentAd.getDuration():0},qt.prototype.unmute=function(){this.adsManager.setVolume(1),this.adMuted=!1},qt.prototype.mute=function(){this.adsManager.setVolume(0),this.adMuted=!0},qt.prototype.setVolume=function(e){this.adsManager.setVolume(e),this.adMuted=0==e},qt.prototype.initializeAdDisplayContainer=function(){this.adDisplayContainer&&(this.adDisplayContainerInitialized||(this.adDisplayContainer.initialize(),this.adDisplayContainerInitialized=!0))},qt.prototype.playAdBreak=function(){this.autoPlayAdBreaks||(this.controller.showAdContainer(),this.adsManager.setVolume(this.controller.getPlayerVolume()),this.adsManager.start())},qt.prototype.addEventListener=function(e,t){this.adsManager&&this.adsManager.addEventListener(e,t)},qt.prototype.removeEventListener=function(e,t){this.adsManager&&this.adsManager.removeEventListener(e,t)},qt.prototype.getAdsManager=function(){return this.adsManager},qt.prototype.reset=function(){this.adsActive=!1,this.adPlaying=!1,this.adTrackingTimer&&clearInterval(this.adTrackingTimer),this.adsManager&&(this.adsManager.destroy(),this.adsManager=null),this.adsLoader&&!this.contentCompleteCalled&&this.adsLoader.contentComplete(),this.contentCompleteCalled=!1,this.allAdsCompleted=!1},qt.prototype.getAdDuration=function(){if(this.currentAd)return this.currentAd.getDuration()};var Gt,Kt,Qt,$t,Xt,Yt=(Kt=Gt=function(t){function n(e){fe(this,n);var t=ye(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.settings={locale:null,disableFlashAds:!0,adTagUrl:null,adsResponse:null,vpaidAllowed:!0,vpaidMode:!0,numRedirects:5,forceNonLinearFullSlot:!1,nonLinearWidth:null,nonLinearHeight:null,adsManagerLoadedCallback:null,adsRenderingSettings:null,debug:!1,timeout:5e3,prerollTimeout:1e3,adLabel:"Advertisement",showControlsForJSAds:!0,AdContainer:null,videoEl:null},t.settings=ve({},t.settings,t.props),t.props.player.isAudio()&&(t.settings.removeCountdown=!0),t.sdkImpl=new qt(t),t}return ge(n,Ae),he(n,[{key:"requestAds",value:function(){this.sdkImpl.requestAds()}},{key:"onPlayerReadyForPreroll",value:function(){this.sdkImpl.onPlayerReadyForPreroll()}},{key:"initializeAdDisplayContainer",value:function(){this.sdkImpl.initializeAdDisplayContainer()}},{key:"playAdBreak",value:function(){this.sdkImpl.playAdBreak()}},{key:"addEventListener",value:function(e,t){this.sdkImpl.addEventListener(e,t)}},{key:"removeEventListener",value:function(e,t){this.sdkImpl.removeEventListener(e,t)}},{key:"getAdsManager",value:function(){return this.sdkImpl.getAdsManager()}},{key:"getSettings",value:function(){return this.settings}},{key:"getAdContainerDiv",value:function(){return this.settings.AdContainer}},{key:"getContentPlayer",value:function(){return this.settings.videoEl}},{key:"getPlayerWidth",value:function(){var t=this.props.player;if(t.isAudio())return e.agent.isMobile?110:40;var n=t.el().querySelector(".vjs-tech");return Ee.getDimension(n).width}},{key:"getPlayerHeight",value:function(){var e=this.props.player;if(e.isAudio())return 30;var t=e.el().querySelector(".vjs-tech");return Ee.getDimension(t).height}},{key:"adsWillAutoplay",value:function(){return this.props.player.options().params.autoplay}},{key:"adsWillPlayMuted",value:function(){var e=this.props.player;return void 0!==e.options().params.muted?e.options().params.muted:0==e.volume()}},{key:"getContentPlayheadTracker",value:function(){return{currentTime:0,previousTime:0,seeking:!1,duration:0}}},{key:"getIsMobile",value:function(){return e.agent.isMobile}},{key:"onAdsReady",value:function(){e.log.debug("<ImaController.onAdsReady>")}},{key:"onErrorLoadingAds",value:function(){e.log.debug("<ImaController.onErrorLoadingAds>")}},{key:"getPlayerVolume",value:function(){var e=this.props.player;return e.muted()?0:e.volume()}},{key:"onAdError",value:function(t){e.log.debug("<ImaController.onAdError>",t)}},{key:"onAdBreakStart",value:function(){e.log.debug("<ImaController.onAdBreakStart>")}},{key:"onAdBreakEnd",value:function(){e.log.debug("<ImaController.onAdBreakEnd>")}},{key:"onAllAdsCompleted",value:function(){e.log.debug("<ImaController.onAllAdsCompleted>")}},{key:"onNonLinearAdLoad",value:function(){e.log.debug("<ImaController.onNonLinearAdLoad>")}},{key:"onLinearAdStart",value:function(){e.log.debug("<ImaController.onLinearAdStart>")}},{key:"onNonLinearAdStart",value:function(){e.log.debug("<ImaController.onNonLinearAdStart>")}},{key:"onAdsPaused",value:function(){e.log.debug("<ImaController.onAdsPaused>")}},{key:"onAdsResumed",value:function(){e.log.debug("<ImaController.onAdsResumed>")}},{key:"onAdPlayheadUpdated",value:function(){}},{key:"onContentAndAdsCompleted",value:function(){e.log.debug("<ImaController.onContentAndAdsCompleted>")}},{key:"onNoPostroll",value:function(){e.log.debug("<ImaController.onNoPostroll>")}},{key:"showAdContainer",value:function(){e.log.debug("<ImaController.showAdContainer>")}},{key:"playContent",value:function(){e.log.debug("<ImaController.playContent>")}},{key:"pauseAd",value:function(){this.sdkImpl.pauseAds()}},{key:"resumeAd",value:function(){this.sdkImpl.resumeAds()}},{key:"currentTimeAd",value:function(){return this.sdkImpl.currentTimeAds()}},{key:"durationAd",value:function(){return this.sdkImpl.durationAds()}},{key:"remainingTimeAd",value:function(){return this.sdkImpl.remainingTimeAds()}},{key:"mutedAd",value:function(e){if(void 0===e)return this.sdkImpl.isAdMuted();e?this.sdkImpl.mute():this.sdkImpl.unmute()}},{key:"setVolumeAd",value:function(e){this.sdkImpl.setVolume(e)}},{key:"isAdPlaying",value:function(){return this.sdkImpl.isAdPlaying()}},{key:"getAdDuration",value:function(){return this.sdkImpl.getAdDuration()}}]),n}(),Gt.propTypes={player:e.PropTypes.object.isRequired},Kt),Jt=($t=Qt=function(t){function n(e){return fe(this,n),ye(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e))}return ge(n,Ae),he(n,[{key:"loadAdUnit",value:function(t,n,r){e.log.debug("<ImaAdUnit.loadAdUnit>");var i=this.controller=new Yt(ve({},this.props,{AdContainer:t,videoEl:n}));i.onAdsReady=function(){e.log.debug("<ImaAdUnit.loadAdUnit> success"),r()},i.onErrorLoadingAds=function(t){e.log.debug("<ImaAdUnit.loadAdUnit> error",t),r(t)}}},{key:"startAd",value:function(){e.log.debug("<ImaAdUnit.startAd>"),this.controller.onPlayerReadyForPreroll()}},{key:"pauseAd",value:function(){this.controller.pauseAd()}},{key:"resumeAd",value:function(){this.controller.resumeAd()}},{key:"currentTimeAd",value:function(){return this.controller.currentTimeAd()}},{key:"currentTime",value:function(){return this.controller.currentTimeAd()}},{key:"duration",value:function(){return this.controller.durationAd()}},{key:"remainingTime",value:function(){return this.controller.remainingTimeAd()}},{key:"muted",value:function(e){return void 0!==e&&this.props.player.trigger("changeVolumeIma",e),this.controller.mutedAd(e)}},{key:"setAdVolume",value:function(e){this.controller.setVolumeAd(e)}},{key:"onAdError",value:function(e){this.controller.onAdError=e}},{key:"on",value:function(e,t){this.controller.addEventListener(e,t)}},{key:"off",value:function(e,t){this.controller.removeEventListener(e,t)}},{key:"getAdManager",value:function(){return this.controller.getAdsManager()}},{key:"volume",value:function(){return this.controller.getPlayerVolume()}},{key:"isAdPlaying",value:function(){return this.controller.isAdPlaying()}},{key:"getAdDuration",value:function(){return this.controller.getAdDuration()}}]),n}(),Qt.propTypes={player:e.PropTypes.object.isRequired},$t),Zt=e.playerconfig.DEFAULT;if(!window.google&&!window.___firstLoadGoogle__){window.___firstLoadGoogle__=!0;var en=document.getElementsByTagName("head")[0],tn=document.createElement("script");tn.type="text/javascript",tn.src="//imasdk.googleapis.com/js/sdkloader/ima3.js",en.appendChild(tn)}var nn,rn,an,on,sn,un,ln,cn,dn,pn,fn,hn,vn,gn,yn,_n,An,mn,En,kn,Tn,Vn,Sn,Rn,Pn,In,bn,Dn,wn,Ln,Cn,On=(Xt=function(t){function n(e){fe(this,n);var t=ye(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));t.type="IMA";var r=t.props.player;return t.containerEl=t._createImaContainerEl(r),r.one(Zt.EVENT.AD_END,t._handleAdEnd),t}return ge(n,Ae),he(n,[{key:"_createImaContainerEl",value:function(){var e=this.props.player,t=document.createElement("div");return Ee.addClass(t,"ima-container"),e.overlay.append(t),t}},{key:"_handleAdEnd",value:function(){e.log.debug("<ImaIntegrator._handleAdEnd>"),this.containerEl&&(Ee.remove(this.containerEl),this.containerEl=null)}},{key:"playAd",value:function(e){var t=this;return this.setState({vastResponse:e}),Promise.resolve().then(function(){return t._loadAdUnit()}).then(function(){return t._setupEvents()}).then(function(){return t._playAdUnit()}).then(function(){return t._finishPlaying()}).catch(function(e){throw e})}},{key:"pauseAd",value:function(){var e=this.props.player,t=this.state.adUnit;e.pause(!0),t&&t.pauseAd()}},{key:"resumeAd",value:function(){var e=this.state.adUnit;e&&e.resumeAd()}},{key:"setAdVolume",value:function(e){var t=this.state.adUnit;t&&t.setAdVolume(e)}},{key:"_loadAdUnit",value:function(){var e=this,t=this.props.player,n=this.state.vastResponse,r=t.options().params,i=t.el().querySelector(".vjs-tech");return new Promise(function(a,o){var s=r.disableCustomPlaybackForIOS10Plus,u=new Jt(ve({player:t},n,{disableCustomPlaybackForIOS10Plus:s}));u.loadAdUnit(e.containerEl,i,function(n){if(n)return t.trigger("error_ads_gg"),o(n);e.setState({adUnit:u}),a()})})}},{key:"createTracker",value:function(){var e=this.props.player,t=this.state.vastResponse;return t instanceof _t?new At(t.adTagUrl,t,e):null}},{key:"_setupEvents",value:function(){e.log.debug("<ImaIntegrator._setupEvents>");var t=this.state.adUnit,n=this.props.player,r=this.tracker=this.createTracker();t.on(google.ima.AdEvent.Type.STARTED,function(){n.trigger(Zt.EVENT.VPAID_AD_STARTED),n.trigger(Zt.EVENT.IMA_AD_STARTED),r&&(r.trackStart(),r.trackCreativeView())}),t.on(google.ima.AdEvent.Type.CLICK,function(){n.trigger(Zt.EVENT.VPAID_AD_CLICK_THRU),r&&r.trackClick(),t.isAdPlaying()||t.resumeAd()}),t.on(google.ima.AdEvent.Type.IMPRESSION,function(){n.trigger(Zt.EVENT.VPAID_AD_IMPRESSION),r&&r.trackImpressions()}),t.on(google.ima.AdEvent.Type.PAUSED,function(){n.trigger(Zt.EVENT.VPAID_AD_PAUSED),n.trigger(Zt.EVENT.AD_PAUSE_AD),r&&r.trackPause()}),t.on(google.ima.AdEvent.Type.FIRST_QUARTILE,function(){n.trigger(Zt.EVENT.VPAID_AD_VIDEO_FIRST_QUARTILE),r&&r.trackFirstQuartile()}),t.on(google.ima.AdEvent.Type.MIDPOINT,function(){n.trigger(Zt.EVENT.VPAID_AD_VIDEO_MID_POINT),r&&r.trackMidpoint()}),t.on(google.ima.AdEvent.Type.THIRD_QUARTILE,function(){n.trigger(Zt.EVENT.VPAID_AD_VIDEO_THIRD_QUARTILE),r&&r.trackThirdQuartile()}),t.on(google.ima.AdEvent.Type.COMPLETE,function(){n.trigger(Zt.EVENT.VPAID_AD_VIDEO_COMPLETE),r&&r.trackComplete()}),t.on(google.ima.AdEvent.Type.SKIPPED,function(){e.log.trace("<VPAIDIntegrator Event>","AdSkipped"),n.trigger(Zt.EVENT.VPAID_AD_SKIPPED),r&&r.trackSkip()}),t.on(google.ima.AdEvent.Type.VOLUME_CHANGED,function(e,t){n.trigger(Zt.EVENT.VPAID_AD_VOLUME_CHANGE),t>0&&r&&r.trackUnmute()}),t.on(google.ima.AdEvent.Type.VOLUME_MUTED,function(){r&&r.trackMute(),n.trigger("vpaid:AdMuted")}),t.on(google.ima.AdEvent.Type.RESUMED,function(){n.trigger(Zt.EVENT.VPAID_RESUME_AD),r&&r.trackResume()}),t.on(google.ima.AdEvent.Type.USER_CLOSE,function(){r&&r.trackClose()}),n.on("changeVolumeIma",function(e,t){t?r&&r.trackMute():r&&r.trackUnmute()})}},{key:"_playAdUnit",value:function(){var e=this.state,t=e.adUnit,n=e.vastResponse,r=this.props,i=r.player;if(r.adsITVC)return i.trigger("ad:ready",n),void i.one("play",function(){t.startAd(),i.trigger(Zt.EVENT.AD_START,i.vastAd),i.trigger(Zt.EVENT.IMA_AD_START),i.trigger(Zt.EVENT.VPAID_AD_START)});t.startAd(),i.trigger(Zt.EVENT.AD_START,i.vastAd),i.trigger(Zt.EVENT.IMA_AD_START),i.trigger(Zt.EVENT.VPAID_AD_START),i.trigger("ad:ready",n)}},{key:"_finishPlaying",value:function(){e.log.debug("<ImaIntegrator._finishPlaying>");var t=this.state.adUnit,n=this.props.player,r={src:n.currentSrc(),duration:n.duration(),currentTime:n.currentTime(),type:n.currentType()},i=this;return new Promise(function(e,a){function o(r){n.off(Zt.EVENT.USER_SKIP_AD),t.off(google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(){n.trigger("ima:AdEnd"),o()}),t.off(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,function(){n.trigger("ima:AdEnd"),o()}),t.off(google.ima.AdErrorEvent.Type.AD_ERROR,function(e){o(e)});var s=i.state.tech;if(s&&s.unloadAdUnit(),i.containerEl&&(Ee.remove(i.containerEl),i.containerEl=null),r)return n.trigger("error_ads_gg"),a(r);e()}n.vastAd._setUpRestorePlayer(),n.trigger("snapshotPlayer",r),n.vastAd._prepareForAd(),t.on(google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(){n.trigger("ima:AdEnd"),o()}),t.on(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,function(){n.trigger("ima:AdEnd"),o()}),t.on(google.ima.AdErrorEvent.Type.AD_ERROR,function(e){o(e)}),t.onAdError(function(e){o(e)}),n.one(Zt.EVENT.USER_SKIP_AD,function(){o()})})}},{key:"getPlayerAdUnit",value:function(){return this.state.adUnit}},{key:"getCurrentTimeAd",value:function(){return this.state.adUnit.currentTimeAd()}},{key:"skipAd",value:function(){var e=this.state.adUnit,t=this.props.player,n=e.getAdManager();n.getAdSkippableState()||(t.trigger(Zt.EVENT.VPAID_AD_SKIPPED),this.tracker&&this.tracker.trackSkip()),n.getAdSkippableState()&&n.skip()}},{key:"getAdVolume",value:function(){var e=this.state.adUnit;return new Promise(function(t,n){try{t(e.volume())}catch(e){n(e)}})}},{key:"getAdRemainingTime",value:function(){var e=this.state.adUnit;return new Promise(function(t,n){try{t(e.remainingTime())}catch(e){n(e)}})}},{key:"getAdDuration",value:function(){var e=this.state.adUnit;return new Promise(function(t,n){try{t(e.getAdDuration())}catch(e){n(e)}})}},{key:"isAdPlaying",value:function(){var e=this.state.adUnit.isAdPlaying();return e}}]),n}(),function(e,t,n,r,i){var a={};Object.keys(r).forEach(function(e){a[e]=r[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null)}(Xt.prototype,"_handleAdEnd",[e.autobind],Object.getOwnPropertyDescriptor(Xt.prototype,"_handleAdEnd"),Xt.prototype),Xt),Nn=new(function(){function e(){fe(this,e),this.page_url=encodeURIComponent(document.location.href)}return he(e,[{key:"generate",value:function(e){return e.replace(/\[PAGEURL\]/g,this.page_url)}}]),e}()),Un=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return new Promise(function(i,a){le.xhr(ve({timeout:1e4},t),function(o,s,u){200===s.statusCode?i(u):n&&r<n?e(t,n,++r).then(function(e){i(e)}).catch(function(e){a(e)}):a(o)})})},Mn="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},xn=($(function(e){var t=function(e){function t(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}function n(e,t,n,r){var a=t&&t.prototype instanceof i?t:i,o=Object.create(a.prototype),s=new f(r||[]);return A(o,"_invoke",{value:l(e,n,s)}),o}function r(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function i(){}function a(){}function o(){}function s(e){["next","throw","return"].forEach(function(n){t(e,n,function(e){return this._invoke(n,e)})})}function u(e,t){function n(i,a,o,s){var u=r(e[i],e,a);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==typeof c&&_.call(c,"__await")?t.resolve(c.__await).then(function(e){n("next",e,o,s)},function(e){n("throw",e,o,s)}):t.resolve(c).then(function(e){l.value=e,o(l)},function(e){return n("throw",e,o,s)})}s(u.arg)}var i;A(this,"_invoke",{value:function(e,r){function a(){return new t(function(t,i){n(e,r,t,i)})}return i=i?i.then(a,a):a()}})}function l(e,t,n){var i=V;return function(a,o){if(i===R)throw new Error("Generator is already running");if(i===P){if("throw"===a)throw o;return v()}for(n.method=a,n.arg=o;;){var s=n.delegate;if(s){var u=c(s,n);if(u){if(u===I)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===V)throw i=P,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=R;var l=r(e,t,n);if("normal"===l.type){if(i=n.done?P:S,l.arg===I)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i=P,n.method="throw",n.arg=l.arg)}}}function c(e,t){var n=t.method,i=e.iterator[n];if(i===g)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=g,c(e,t),"throw"===t.method)?I:("return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),I);var a=r(i,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,I;var o=a.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=g),t.delegate=null,I):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,I)}function d(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function p(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function f(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(d,this),this.reset(!0)}function h(e){if(e){var t=e[E];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(_.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=g,t.done=!0,t};return r.next=r}}return{next:v}}function v(){return{value:g,done:!0}}var g,y=Object.prototype,_=y.hasOwnProperty,A=Object.defineProperty||function(e,t,n){e[t]=n.value},m="function"==typeof Symbol?Symbol:{},E=m.iterator||"@@iterator",k=m.asyncIterator||"@@asyncIterator",T=m.toStringTag||"@@toStringTag";try{t({},"")}catch(e){t=function(e,t,n){return e[t]=n}}e.wrap=n;var V="suspendedStart",S="suspendedYield",R="executing",P="completed",I={},b={};t(b,E,function(){return this});var D=Object.getPrototypeOf,w=D&&D(D(h([])));w&&w!==y&&_.call(w,E)&&(b=w);var L=o.prototype=i.prototype=Object.create(b);return a.prototype=o,A(L,"constructor",{value:o,configurable:!0}),A(o,"constructor",{value:a,configurable:!0}),a.displayName=t(o,T,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===a||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,o):(e.__proto__=o,t(e,T,"GeneratorFunction")),e.prototype=Object.create(L),e},e.awrap=function(e){return{__await:e}},s(u.prototype),t(u.prototype,k,function(){return this}),e.AsyncIterator=u,e.async=function(t,r,i,a,o){void 0===o&&(o=Promise);var s=new u(n(t,r,i,a),o);return e.isGeneratorFunction(r)?s:s.next().then(function(e){return e.done?e.value:s.next()})},s(L),t(L,T,"Generator"),t(L,E,function(){return this}),t(L,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=h,f.prototype={constructor:f,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=g,this.done=!1,this.delegate=null,this.method="next",this.arg=g,this.tryEntries.forEach(p),!e)for(var t in this)"t"===t.charAt(0)&&_.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=g)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,r){return a.type="throw",a.arg=e,n.next=t,r&&(n.method="next",n.arg=g),!!r}if(this.done)throw e;for(var n=this,r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],a=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var o=_.call(i,"catchLoc"),s=_.call(i,"finallyLoc");if(o&&s){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(o){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&_.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,I):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),I},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),p(n),I}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;p(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:h(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=g),I}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}}),{"lg1.logging.admicro.vn":"contineljs.com","sspapi.admicro.vn":"genmonet.com","media1.admicro.vn":"static.contineljs.com","adi.admicro.vn":"cdnstoremedia.com","viewplus.admicro.vn":"vp.cdnstoremedia.com","sspcallback.js":"sspcallbackcdn.js","ssppage.js":"ssppagecdn.js"}),jn=["https://tag.gammaplatform.com/adx/request/?wid=1447649687&zid=1490756287&content_page_url=__page-url__&cb=__random-number__&player_width=__player-width__&player_height=__player-height__&device_id=__device-id__","https://tag.gammaplatform.com/adx/request/?wid=1486702029&zid=1536050336&content_page_url=__page-url__&cb=__random-number__&player_width=__player-width__&player_height=__player-height__&device_id=__device-id__","https://tag.gammaplatform.com/adx/request/?wid=1447649687&zid=1543220535&content_page_url=__page-url__&cb=__random-number__&player_width=__player-width__&player_height=__player-height__&device_id=__device-id__","https://tag.gammaplatform.com/adx/request/?wid=1486702029&zid=1543221028&content_page_url=__page-url__&cb=__random-number__&player_width=__player-width__&player_height=__player-height__&device_id=__device-id__"],Fn=(rn=nn=function(t){function n(e){fe(this,n);var t=ye(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.isPassBack=!1,t.errorURLMacros=[],t}return ge(n,Ae),he(n,[{key:"_filterAdChain",value:function(){var e=pe(regeneratorRuntime.mark(function e(t){var n,r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(n=[],r=void 0;t.length;)try{i=this._buildVASTResponse(t.shift()),n.push(i)}catch(e){r=e}if(!n.length){e.next=5;break}return e.abrupt("return",n);case 5:throw r;case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"adgetVASTResponse",value:function(){var e=pe(regeneratorRuntime.mark(function e(t){var n,r=this,i=t.adTagUrl,a=t.adTagXML,o=t.isPackageAds;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this,e.abrupt("return",Promise.resolve().then(function(){return r._getVASTAd({adTagUrl:i,adTagXML:a,isPackageAds:o})}).then(function(e){return n._filterAdChain(e)}).catch(function(e){if(e.ima)return[e];throw e}));case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getVASTResponse",value:function(){var e=pe(regeneratorRuntime.mark(function e(t){var n,r=t.adTagUrl,i=t.adTagXML,a=t.isPackageAds,o=t.player;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r||i){e.next=2;break}throw Ve.VASTClIENT_MISS_AD_TAG_URL;case 2:return this.player=o,(n=[]).push(this.adgetVASTResponse({adTagUrl:r,adTagXML:i,isPackageAds:a})),e.abrupt("return",Promise.all(n.map(function(e){return e.catch(function(){return[]})})).then(function(e){var t=[],n=[].concat(_e(e[0]));for(var r in n)if(n[r].ads)t.push(n[r]);else if(n[r].ima)return n[r];if(t.length)return t;throw o.trigger("error_ads_gg"),n[0]}));case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"_getMarcoParam",value:function(e){if(e.indexOf("content_page_url")>0)return e;var t=void 0,n=void 0,r=void 0,i=void 0;t=document.location.href;var a=X(e)?"&":"?",o="";return window.ADMStorageFileCDN&&window.ADMStorageFileCDN.ssp&&(o=window.ADMStorageFileCDN.ssp),"sspapi.admicro.vn"!==Y(e)&&Y(e)!==o||(t=Q("u",e)),r=this.player?this.player.el_.getBoundingClientRect().height:"",i=this.player?this.player.el_.getBoundingClientRect().width:"",n=encodeURIComponent(t),e+a+"content_page_url="+n+"&player_height="+r+"&player_width="+i}},{key:"validateVASTTree",value:function(e){var t=$e.attr(e,"version");if(!e.ad)throw Ve.ERROR_303;if(t&&3!=t&&2!=t&&4!=t&&4.1!=t&&4.2!=t)throw Ve.ERROR_102}},{key:"_buildVASTResponse",value:function(e){var t=new _t;return function(e,t){t.forEach(function(t){e.addAd(t)})}(t,e),function(e){if(!e.nonLinear.height&&!e.hasIMA()){if(!e.hasLinear())throw Ve.VASTClIENT_AD_TYPE_NOT_SUPPORT;if(void 0===e.duration)throw Ve.VASTClIENT_MISSING_DURATIOn}}(t),t}},{key:"_getVastTree",value:function(){var t=pe(regeneratorRuntime.mark(function t(n){var r,i,a=n.adTagUrl,o=n.adTagXML;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=void 0,!a){t.next=9;break}if(-1===a.indexOf("googleads.g.doubleclick.net")&&-1===a.indexOf("pubads.g.doubleclick.net")){t.next=4;break}throw{adTagUrl:a,adsResponse:null,ima:!0};case 4:return t.next=6,this._requestVASTXml(a);case 6:r=t.sent,t.next=10;break;case 9:r=o;case 10:r=Nn.generate(r),i=void 0,e.agent.isFireFox&&Object.keys(xn).map(function(e){r=r.split(e).join(xn[e])}),window.ADMStorageFileCDN&&(window.ADMStorageFileCDN.ssp&&(r=r.split("sspapi.admicro.vn").join(window.ADMStorageFileCDN.ssp)),window.ADMStorageFileCDN.logging&&(r=r.split("lg1.logging.admicro.vn").join(window.ADMStorageFileCDN.logging))),t.prev=14,i=$e.toJXONTree(r),e.log.debug("built JXONTree from VAST response:",i),l(i.ad)?i.ads=i.ad:i.ad?i.ads=[i.ad]:i.ads=[],t.next=23;break;case 20:throw t.prev=20,t.t0=t.catch(14),Ve.ERROR_100;case 23:return this.validateVASTTree(i),t.abrupt("return",i);case 25:case"end":return t.stop()}},t,this,[[14,20]])}));return function(e){return t.apply(this,arguments)}}()},{key:"_getVASTAd",value:function(){var e=pe(regeneratorRuntime.mark(function e(t){var n,r,i,a,o=t.adTagUrl,s=t.adTagXML,u=t.isPackageAds,c=t.adChainWrapper;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=void 0,e.prev=2,this.player.adTagUrl=o,e.next=6,this._getVastTree({adTagUrl:o,adTagXML:s});case 6:n=e.sent,e.next=13;break;case 9:throw e.prev=9,e.t0=e.catch(2),e.t0;case 13:if(r=n&&l(n.ads)?n.ads:null,!u||c){e.next=17;break}return i=this._buildAd(r[0]),e.abrupt("return",this._getVASTAd({adTagUrl:i.wrapper.VASTAdTagURI,adChainWrapper:i}));case 17:return a=n&&l(n.ads)?n.ads:null,e.abrupt("return",this._waterfallHandler({waterfallAds:a,adChainWrapper:c}).catch(function(e){if(e.ima)throw{adTagUrl:o,ima:!0}}));case 19:case"end":return e.stop()}},e,this,[[2,9]])}));return function(t){return e.apply(this,arguments)}}()},{key:"_getAd",value:function(){var e=pe(regeneratorRuntime.mark(function e(t,n){var r,i,a,o,s,u,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this,!(n.length>=this.props.WRAPPER_LIMIT)){e.next=3;break}throw Ve.VASTClIENT_WRAPPER_LIMIT_REACHED;case 3:if(i=void 0,a=void 0,!c(t)){e.next=11;break}return e.next=7,this._getVastTree({adTagUrl:t});case 7:a=e.sent,i=a.ad,e.next=12;break;case 11:i=t;case 12:if(!(i instanceof Array)){e.next=15;break}return i.forEach(function(e){var t=r._buildAd(e);if(t.wrapper){var i=this.player.mediaInfo;if(("thanhnien.vn"==i.domain||"m.thanhnien.vn"==i.domain)&&-1==t.wrapper.VASTAdTagURI.indexOf("admicro.vn")&&-1!=t.wrapper.VASTAdTagURI.indexOf("&loc=[url]")){var a="&loc="+encodeURIComponent(i.domain+i.pathname),o=t.wrapper.VASTAdTagURI;t.wrapper.VASTAdTagURI=o.replace("&loc=[url]",a)}}if(n.push(t),t.wrapper&&-1===t.wrapper.VASTAdTagURI.indexOf("//"))throw Ve.ERROR_301;if(t.wrapper)return-1!==t.wrapper.VASTAdTagURI.indexOf("googleads.g.doubleclick.net")||-1!==t.wrapper.VASTAdTagURI.indexOf("pubads.g.doubleclick.net")?(n[0].adTagUrl=t.wrapper.VASTAdTagURI,n[0].ima=!0,n):r._getAd(t.wrapper.VASTAdTagURI,n)}),e.abrupt("return",n);case 15:if((o=this._buildAd(i)).wrapper&&("thanhnien.vn"!=(s=this.player.mediaInfo).domain&&"m.thanhnien.vn"!=s.domain||-1==o.wrapper.VASTAdTagURI.indexOf("admicro.vn")&&-1!=o.wrapper.VASTAdTagURI.indexOf("&loc=[url]")&&(u="&loc="+encodeURIComponent(s.domain+s.pathname),l=o.wrapper.VASTAdTagURI,o.wrapper.VASTAdTagURI=l.replace("&loc=[url]",u))),n.push(o),!o.wrapper){e.next=21;break}if(-1!==o.wrapper.VASTAdTagURI.indexOf("//")){e.next=21;break}throw Ve.ERROR_301;case 21:if(!o.wrapper){e.next=27;break}if(!o.wrapper.VASTAdTagURI.indexOf("googleads.g.doubleclick.net")&&!o.wrapper.VASTAdTagURI.indexOf("pubads.g.doubleclick.net")){e.next=26;break}return n[0].adTagUrl=o.wrapper.VASTAdTagURI,n[0].ima=!0,e.abrupt("return",n);case 26:return e.abrupt("return",this._getAd(o.wrapper.VASTAdTagURI,n));case 27:return e.abrupt("return",n);case 28:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"_buildAd",value:function(e){var t=new yt(e);return this._validateAd(t),t}},{key:"_validateAd",value:function(e){var t=e.wrapper,n=e.inLine;if(n&&t)throw Ve.VALID_AD_ERROR_1;if(!n&&!t)throw Ve.VALID_AD_ERROR_2;if(n&&!n.isSupported())throw Ve.VALID_AD_ERROR_3;if(t&&!t.VASTAdTagURI)throw Ve.VALID_AD_ERROR_4}},{key:"_waterfallHandler",value:function(){var e=pe(regeneratorRuntime.mark(function e(t){var n,r,i,a,o=t.waterfallAds,s=t.adChainWrapper;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(n=[];o.length;)r=this._getAd(o.shift(),[]).catch(function(e){return{error:e}}),n.push(r);return e.next=4,Promise.all(n);case 4:if(i=e.sent,!(a=i.filter(function(e){return!(e.error&&!e.error.ima)&&(s&&e.push(s),!0)})).length){e.next=8;break}return e.abrupt("return",a);case 8:throw i[0].error;case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"_requestVASTXml",value:function(e){var t=!1;return jn.indexOf(e)>=0&&(t=!0),new Promise(function(n,r){Un({uri:e,withCredentials:t,method:"GET"},0).then(function(e){e?n(e):r(Ve.ERROR_301)}).catch(function(){r(Ve.ERROR_301)})})}}]),n}(),nn.defaultProps={WRAPPER_LIMIT:5},rn),zn=[{name:"description_url",value:encodeURIComponent(document.location.href)},{name:"correlator",value:Date.now()}],Bn=e.playerconfig.DEFAULT,Wn=(an=function(t){function n(e){fe(this,n);var t=ye(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e)),r=t.props.player;return t._volumeChangeVpaid=t._volumeChangeVpaid.bind(t),t.player={},t._savePlayerSnapshot(),It.once(r,[Bn.EVENT.AD_END],t._handleRestorePlayer),t}return ge(n,Ae),he(n,[{key:"_savePlayerSnapshot",value:function(){var t=this.props.player,n=this;this.player.currentTime=t.currentTime.bind(t),this.player.muted=t.muted.bind(t),this.player.volume=t.volume.bind(t);var r=void 0;t.vastAd&&(t.on(Bn.EVENT.VPAID_AD_VOLUME_CHANGE,this._volumeChangeVpaid),t.one("snapshotPlayer",function(i,a){var o=!t.paused()||"postroll"!==t.vastAd.adPosition(),s=void 0;s="postroll"!==t.vastAd.adPosition()?t.currentTime()-1:t.currentTime(),r={playing:o,ended:t.ended(),duration:t.duration(),src:t.currentSrc(),currentTime:s,type:t.currentType(),volume:t.volume(),muted:t.muted()},r=e.mergeOptions(r,a),n.setState({snapshot:r}),o&&t.pause()}))}},{key:"_volumeChangeVpaid",value:function(){var e=this.state.snapshot;this.props.player.vastAd.getAdVolume().then(function(t){e.muted=0===t})}},{key:"snapshot",value:function(){return this.state.snapshot}},{key:"_handleRestorePlayer",value:function(){var t=this.state.snapshot,n=this.props.player;if(n.off(Bn.EVENT.VPAID_AD_VOLUME_CHANGE,this._volumeChangeVpaid),t){var r=this._needRestoreSrc(t),i=t.playing;if(n.vastAd=null,!r)return this.player.currentTime(t.currentTime),void this._resumePlayback(i);n.one("canplay",this._tryToResume.bind(this,t)),this._ensureCanplayEvtGetsFired(),e.agent.isMobile||n.resetCache_(),n.src({src:t.src,type:t.type}),this.player.currentTime(t.currentTime),n.trigger("waiting"),e.agent.isMobile||n.load(),this._resumePlayback(i)}else this._resumePlayback(i)}},{key:"_tryToResume",value:function(t){var n=this.props.player,r=this;try{n.currentTime()!==t.currentTime?(n.one("seeked",function(){r._resumePlayback(t.playing)}),n.currentTime(t.currentTime)):this._resumePlayback(t.playing)}catch(t){e.log.warn("Failed to resume the content after an advertisement",t)}}},{key:"_ensureCanplayEvtGetsFired",value:function(){var e=this.props.player,t=setTimeout(function(){e.trigger("canplay")},1e3);e.one("canplay",function(){clearTimeout(t)})}},{key:"_resumePlayback",value:function(e){var t=this.props.player,n=this.state.snapshot,r=n.currentTime,i=n.muted,a=n.volume;this.triggerRestorePlayback_||(t.trigger(Bn.EVENT.AD_RESTORED_PLAYBACK),this.triggerRestorePlayback_=!0),e&&(this.player.currentTime(r),this.player.muted(i),this.player.volume(a),t.options().params.adThumbnail&&!document.getElementById(""+t.id_).hasAttribute("loop")||setTimeout(function(){t.play(!0)},0))}},{key:"_needRestoreSrc",value:function(t){var n=this.props.player,r=n.src();if(!n.vastAd.adUnit())return!1;var i=n.vastAd.adUnit().type;return!r||(r!==t.src||(!!e.agent.isIOS||"VAST"!==i&&"VPAID"!==i&&"IMA"!==i&&(!/mediasource|blob/.test(r)&&(!!/m3u8/gi.test(r)||r!==t.src))))}}]),n}(),Z(an.prototype,"_handleRestorePlayer",[e.autobind],Object.getOwnPropertyDescriptor(an.prototype,"_handleRestorePlayer"),an.prototype),Z(an.prototype,"_tryToResume",[e.autobind],Object.getOwnPropertyDescriptor(an.prototype,"_tryToResume"),an.prototype),an),Hn=$(function(e,t){(function(){function n(e,t){return e.set(t[0],t[1]),e}function r(e,t){return e.add(t),e}function i(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function a(e,t,n,r){for(var i=-1,a=null==e?0:e.length;++i<a;){var o=e[i];t(r,o,n(o),e)}return r}function o(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function s(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function u(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function l(e,t){for(var n=-1,r=null==e?0:e.length,i=0,a=[];++n<r;){var o=e[n];t(o,n,e)&&(a[i++]=o)}return a}function c(e,t){return!!(null==e?0:e.length)&&E(e,t,0)>-1}function d(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}function p(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function f(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function h(e,t,n,r){var i=-1,a=null==e?0:e.length;for(r&&a&&(n=e[++i]);++i<a;)n=t(n,e[i],i,e);return n}function v(e,t,n,r){var i=null==e?0:e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function g(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function y(e){return e.split("")}function _(e){return e.match(Mt)||[]}function A(e,t,n){var r;return n(e,function(e,n,i){if(t(e,n,i))return r=n,!1}),r}function m(e,t,n,r){for(var i=e.length,a=n+(r?1:-1);r?a--:++a<i;)if(t(e[a],a,e))return a;return-1}function E(e,t,n){return t===t?Q(e,t,n):m(e,T,n)}function k(e,t,n,r){for(var i=n-1,a=e.length;++i<a;)if(r(e[i],t))return i;return-1}function T(e){return e!==e}function V(e,t){var n=null==e?0:e.length;return n?b(e,t)/n:Le}function S(e){return function(t){return null==t?te:t[e]}}function R(e){return function(t){return null==e?te:e[t]}}function P(e,t,n,r,i){return i(e,function(e,i,a){n=r?(r=!1,e):t(n,e,i,a)}),n}function I(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}function b(e,t){for(var n,r=-1,i=e.length;++r<i;){var a=t(e[r]);a!==te&&(n=n===te?a:n+a)}return n}function D(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function w(e,t){return p(t,function(t){return[t,e[t]]})}function L(e){return function(t){return e(t)}}function C(e,t){return p(t,function(t){return e[t]})}function O(e,t){return e.has(t)}function N(e,t){for(var n=-1,r=e.length;++n<r&&E(t,e[n],0)>-1;);return n}function U(e,t){for(var n=e.length;n--&&E(t,e[n],0)>-1;);return n}function M(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}function x(e){return"\\"+Vn[e]}function j(e,t){return null==e?te:e[t]}function F(e){return vn.test(e)}function z(e){return gn.test(e)}function B(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}function W(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}function H(e,t){return function(n){return e(t(n))}}function q(e,t){for(var n=-1,r=e.length,i=0,a=[];++n<r;){var o=e[n];o!==t&&o!==se||(e[n]=se,a[i++]=n)}return a}function G(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}function K(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=[e,e]}),n}function Q(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}function $(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}function X(e){return F(e)?J(e):Bn(e)}function Y(e){return F(e)?Z(e):y(e)}function J(e){for(var t=fn.lastIndex=0;fn.test(e);)++t;return t}function Z(e){return e.match(fn)||[]}function ee(e){return e.match(hn)||[]}var te,ne=200,re="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",ie="Expected a function",ae="__lodash_hash_undefined__",oe=500,se="__lodash_placeholder__",ue=1,le=2,ce=4,de=1,pe=2,fe=1,he=2,ve=4,ge=8,ye=16,_e=32,Ae=64,me=128,Ee=256,ke=512,Te=30,Ve="...",Se=800,Re=16,Pe=1,Ie=2,be=1/0,De=9007199254740991,we=1.7976931348623157e308,Le=NaN,Ce=4294967295,Oe=Ce-1,Ne=Ce>>>1,Ue=[["ary",me],["bind",fe],["bindKey",he],["curry",ge],["curryRight",ye],["flip",ke],["partial",_e],["partialRight",Ae],["rearg",Ee]],Me="[object Arguments]",xe="[object Array]",je="[object AsyncFunction]",Fe="[object Boolean]",ze="[object Date]",Be="[object DOMException]",We="[object Error]",He="[object Function]",qe="[object GeneratorFunction]",Ge="[object Map]",Ke="[object Number]",Qe="[object Null]",$e="[object Object]",Xe="[object Proxy]",Ye="[object RegExp]",Je="[object Set]",Ze="[object String]",et="[object Symbol]",tt="[object Undefined]",nt="[object WeakMap]",rt="[object WeakSet]",it="[object ArrayBuffer]",at="[object DataView]",ot="[object Float32Array]",st="[object Float64Array]",ut="[object Int8Array]",lt="[object Int16Array]",ct="[object Int32Array]",dt="[object Uint8Array]",pt="[object Uint8ClampedArray]",ft="[object Uint16Array]",ht="[object Uint32Array]",vt=/\b__p \+= '';/g,gt=/\b(__p \+=) '' \+/g,yt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,_t=/&(?:amp|lt|gt|quot|#39);/g,At=/[&<>"']/g,mt=RegExp(_t.source),Et=RegExp(At.source),kt=/<%-([\s\S]+?)%>/g,Tt=/<%([\s\S]+?)%>/g,Vt=/<%=([\s\S]+?)%>/g,St=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Rt=/^\w*$/,Pt=/^\./,It=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,bt=/[\\^$.*+?()[\]{}|]/g,Dt=RegExp(bt.source),wt=/^\s+|\s+$/g,Lt=/^\s+/,Ct=/\s+$/,Ot=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Nt=/\{\n\/\* \[wrapped with (.+)\] \*/,Ut=/,? & /,Mt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,xt=/\\(\\)?/g,jt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ft=/\w*$/,zt=/^[-+]0x[0-9a-f]+$/i,Bt=/^0b[01]+$/i,Wt=/^\[object .+?Constructor\]$/,Ht=/^0o[0-7]+$/i,qt=/^(?:0|[1-9]\d*)$/,Gt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Kt=/($^)/,Qt=/['\n\r\u2028\u2029\\]/g,$t="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Xt="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Yt="["+Xt+"]",Jt="["+$t+"]",Zt="[a-z\\xdf-\\xf6\\xf8-\\xff]",en="[^\\ud800-\\udfff"+Xt+"\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",tn="\\ud83c[\\udffb-\\udfff]",nn="(?:\\ud83c[\\udde6-\\uddff]){2}",rn="[\\ud800-\\udbff][\\udc00-\\udfff]",an="[A-Z\\xc0-\\xd6\\xd8-\\xde]",on="(?:"+Zt+"|"+en+")",sn="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",un="[\\ufe0e\\ufe0f]?"+sn+("(?:\\u200d(?:"+["[^\\ud800-\\udfff]",nn,rn].join("|")+")[\\ufe0e\\ufe0f]?"+sn+")*"),ln="(?:"+["[\\u2700-\\u27bf]",nn,rn].join("|")+")"+un,cn="(?:"+["[^\\ud800-\\udfff]"+Jt+"?",Jt,nn,rn,"[\\ud800-\\udfff]"].join("|")+")",dn=RegExp("[']","g"),pn=RegExp(Jt,"g"),fn=RegExp(tn+"(?="+tn+")|"+cn+un,"g"),hn=RegExp([an+"?"+Zt+"+(?:['](?:d|ll|m|re|s|t|ve))?(?="+[Yt,an,"$"].join("|")+")","(?:[A-Z\\xc0-\\xd6\\xd8-\\xde]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])+(?:['](?:D|LL|M|RE|S|T|VE))?(?="+[Yt,an+on,"$"].join("|")+")",an+"?"+on+"+(?:['](?:d|ll|m|re|s|t|ve))?",an+"+(?:['](?:D|LL|M|RE|S|T|VE))?","\\d*(?:(?:1ST|2ND|3RD|(?![123])\\dTH)\\b)","\\d*(?:(?:1st|2nd|3rd|(?![123])\\dth)\\b)","\\d+",ln].join("|"),"g"),vn=RegExp("[\\u200d\\ud800-\\udfff"+$t+"\\ufe0e\\ufe0f]"),gn=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,yn=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],_n=-1,An={};An[ot]=An[st]=An[ut]=An[lt]=An[ct]=An[dt]=An[pt]=An[ft]=An[ht]=!0,An[Me]=An[xe]=An[it]=An[Fe]=An[at]=An[ze]=An[We]=An[He]=An[Ge]=An[Ke]=An[$e]=An[Ye]=An[Je]=An[Ze]=An[nt]=!1;var mn={};mn[Me]=mn[xe]=mn[it]=mn[at]=mn[Fe]=mn[ze]=mn[ot]=mn[st]=mn[ut]=mn[lt]=mn[ct]=mn[Ge]=mn[Ke]=mn[$e]=mn[Ye]=mn[Je]=mn[Ze]=mn[et]=mn[dt]=mn[pt]=mn[ft]=mn[ht]=!0,mn[We]=mn[He]=mn[nt]=!1;var En={"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss","":"A","":"A","":"A","":"a","":"a","":"a","":"C","":"C","":"C","":"C","":"c","":"c","":"c","":"c","":"D","":"D","":"d","":"d","":"E","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"e","":"G","":"G","":"G","":"G","":"g","":"g","":"g","":"g","":"H","":"H","":"h","":"h","":"I","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"i","":"J","":"j","":"K","":"k","":"k","":"L","":"L","":"L","":"L","":"L","":"l","":"l","":"l","":"l","":"l","":"N","":"N","":"N","":"N","":"n","":"n","":"n","":"n","":"O","":"O","":"O","":"o","":"o","":"o","":"R","":"R","":"R","":"r","":"r","":"r","":"S","":"S","":"S","":"S","":"s","":"s","":"s","":"s","":"T","":"T","":"T","":"t","":"t","":"t","":"U","":"U","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"u","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"Z","":"Z","":"z","":"z","":"z","":"IJ","":"ij","":"Oe","":"oe","":"'n","":"s"},kn={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Tn={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Vn={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Sn=parseFloat,Rn=parseInt,Pn="object"==typeof Mn&&Mn&&Mn.Object===Object&&Mn,In="object"==typeof self&&self&&self.Object===Object&&self,bn=Pn||In||Function("return this")(),Dn=t&&!t.nodeType&&t,wn=Dn&&!0&&e&&!e.nodeType&&e,Ln=wn&&wn.exports===Dn,Cn=Ln&&Pn.process,On=function(){try{return Cn&&Cn.binding&&Cn.binding("util")}catch(e){}}(),Nn=On&&On.isArrayBuffer,Un=On&&On.isDate,xn=On&&On.isMap,jn=On&&On.isRegExp,Fn=On&&On.isSet,zn=On&&On.isTypedArray,Bn=S("length"),Wn=R(En),Hn=R(kn),qn=R(Tn),Gn=function e(t){function y(e){if(eo(e)&&!Hu(e)&&!(e instanceof J)){if(e instanceof Q)return e;if(Ho.call(e,"__wrapped__"))return Va(e)}return new Q(e)}function R(){}function Q(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=te}function J(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ce,this.__views__=[]}function Z(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Mt(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function $t(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Xt(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new $t;++t<n;)this.add(e[t])}function Yt(e){var t=this.__data__=new Mt(e);this.size=t.size}function Jt(e,t){var n=Hu(e),r=!n&&Wu(e),i=!n&&!r&&Gu(e),a=!n&&!r&&!i&&Yu(e),o=n||r||i||a,s=o?D(e.length,Mo):[],u=s.length;for(var l in e)!t&&!Ho.call(e,l)||o&&("length"==l||i&&("offset"==l||"parent"==l)||a&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||ra(l,u))||s.push(l);return s}function Zt(e){var t=e.length;return t?e[kr(0,t-1)]:te}function en(e,t){return ma(oi(e),fn(t,0,e.length))}function tn(e){return ma(oi(e))}function nn(e,t,n){(n===te||Ga(e[t],n))&&(n!==te||t in e)||ln(e,t,n)}function rn(e,t,n){var r=e[t];Ho.call(e,t)&&Ga(r,n)&&(n!==te||t in e)||ln(e,t,n)}function an(e,t){for(var n=e.length;n--;)if(Ga(e[n][0],t))return n;return-1}function on(e,t,n,r){return Bs(e,function(e,i,a){t(r,e,n(e),a)}),r}function sn(e,t){return e&&si(t,vo(t),e)}function un(e,t){return e&&si(t,go(t),e)}function ln(e,t,n){"__proto__"==t&&us?us(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function cn(e,t){for(var n=-1,r=t.length,i=Do(r),a=null==e;++n<r;)i[n]=a?te:fo(e,t[n]);return i}function fn(e,t,n){return e===e&&(n!==te&&(e=e<=n?e:n),t!==te&&(e=e>=t?e:t)),e}function hn(e,t,n,r,i,a){var s,u=t&ue,l=t&le,c=t&ce;if(n&&(s=i?n(e,r,i,a):n(e)),s!==te)return s;if(!Za(e))return e;var d=Hu(e);if(d){if(s=Ji(e),!u)return oi(e,s)}else{var p=eu(e),f=p==He||p==qe;if(Gu(e))return Qr(e,u);if(p==$e||p==Me||f&&!i){if(s=l||f?{}:Zi(e),!u)return l?li(e,un(s,e)):ui(e,sn(s,e))}else{if(!mn[p])return i?e:{};s=ea(e,p,hn,u)}}a||(a=new Yt);var h=a.get(e);if(h)return h;a.set(e,s);var v=c?l?zi:Fi:l?go:vo,g=d?te:v(e);return o(g||e,function(r,i){g&&(r=e[i=r]),rn(s,i,hn(r,t,n,i,e,a))}),s}function vn(e){var t=vo(e);return function(n){return gn(n,e,t)}}function gn(e,t,n){var r=n.length;if(null==e)return!r;for(e=No(e);r--;){var i=n[r],a=t[i],o=e[i];if(o===te&&!(i in e)||!a(o))return!1}return!0}function En(e,t,n){if("function"!=typeof e)throw new xo(ie);return ru(function(){e.apply(te,n)},t)}function kn(e,t,n,r){var i=-1,a=c,o=!0,s=e.length,u=[],l=t.length;if(!s)return u;n&&(t=p(t,L(n))),r?(a=d,o=!1):t.length>=ne&&(a=O,o=!1,t=new Xt(t));e:for(;++i<s;){var f=e[i],h=null==n?f:n(f);if(f=r||0!==f?f:0,o&&h===h){for(var v=l;v--;)if(t[v]===h)continue e;u.push(f)}else a(t,h,r)||u.push(f)}return u}function Tn(e,t){var n=!0;return Bs(e,function(e,r,i){return n=!!t(e,r,i)}),n}function Vn(e,t,n){for(var r=-1,i=e.length;++r<i;){var a=e[r],o=t(a);if(null!=o&&(s===te?o===o&&!io(o):n(o,s)))var s=o,u=a}return u}function Pn(e,t,n,r){var i=e.length;for((n=so(n))<0&&(n=-n>i?0:i+n),(r=r===te||r>i?i:so(r))<0&&(r+=i),r=n>r?0:uo(r);n<r;)e[n++]=t;return e}function In(e,t){var n=[];return Bs(e,function(e,r,i){t(e,r,i)&&n.push(e)}),n}function Dn(e,t,n,r,i){var a=-1,o=e.length;for(n||(n=na),i||(i=[]);++a<o;){var s=e[a];t>0&&n(s)?t>1?Dn(s,t-1,n,r,i):f(i,s):r||(i[i.length]=s)}return i}function wn(e,t){return e&&Hs(e,t,vo)}function Cn(e,t){return e&&qs(e,t,vo)}function On(e,t){return l(t,function(t){return Xa(e[t])})}function Mn(e,t){for(var n=0,r=(t=Gr(t,e)).length;null!=e&&n<r;)e=e[Ea(t[n++])];return n&&n==r?e:te}function Bn(e,t,n){var r=t(e);return Hu(e)?r:f(r,n(e))}function Kn(e){return null==e?e===te?tt:Qe:ss&&ss in No(e)?Qi(e):ha(e)}function Qn(e,t){return e>t}function $n(e,t){return null!=e&&Ho.call(e,t)}function Xn(e,t){return null!=e&&t in No(e)}function Yn(e,t,n){return e>=ms(t,n)&&e<As(t,n)}function Jn(e,t,n){for(var r=n?d:c,i=e[0].length,a=e.length,o=a,s=Do(a),u=1/0,l=[];o--;){var f=e[o];o&&t&&(f=p(f,L(t))),u=ms(f.length,u),s[o]=!n&&(t||i>=120&&f.length>=120)?new Xt(o&&f):te}f=e[0];var h=-1,v=s[0];e:for(;++h<i&&l.length<u;){var g=f[h],y=t?t(g):g;if(g=n||0!==g?g:0,!(v?O(v,y):r(l,y,n))){for(o=a;--o;){var _=s[o];if(!(_?O(_,y):r(e[o],y,n)))continue e}v&&v.push(y),l.push(g)}}return l}function Zn(e,t,n,r){return wn(e,function(e,i,a){t(r,n(e),i,a)}),r}function er(e,t,n){var r=null==(e=ga(e,t=Gr(t,e)))?e:e[Ea(ba(t))];return null==r?te:i(r,e,n)}function tr(e){return eo(e)&&Kn(e)==Me}function nr(e,t,n,r,i){return e===t||(null==e||null==t||!eo(e)&&!eo(t)?e!==e&&t!==t:rr(e,t,n,r,nr,i))}function rr(e,t,n,r,i,a){var o=Hu(e),s=Hu(t),u=o?xe:eu(e),l=s?xe:eu(t),c=(u=u==Me?$e:u)==$e,d=(l=l==Me?$e:l)==$e,p=u==l;if(p&&Gu(e)){if(!Gu(t))return!1;o=!0,c=!1}if(p&&!c)return a||(a=new Yt),o||Yu(e)?Ui(e,t,n,r,i,a):Mi(e,t,u,n,r,i,a);if(!(n&de)){var f=c&&Ho.call(e,"__wrapped__"),h=d&&Ho.call(t,"__wrapped__");if(f||h){var v=f?e.value():e,g=h?t.value():t;return a||(a=new Yt),i(v,g,n,r,a)}}return!!p&&(a||(a=new Yt),xi(e,t,n,r,i,a))}function ir(e,t,n,r){var i=n.length,a=i,o=!r;if(null==e)return!a;for(e=No(e);i--;){var s=n[i];if(o&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<a;){var u=(s=n[i])[0],l=e[u],c=s[1];if(o&&s[2]){if(l===te&&!(u in e))return!1}else{var d=new Yt;if(r)var p=r(l,c,u,e,t,d);if(!(p===te?nr(c,l,de|pe,r,d):p))return!1}}return!0}function ar(e){return!(!Za(e)||ua(e))&&(Xa(e)?Xo:Wt).test(ka(e))}function or(e){return"function"==typeof e?e:null==e?To:"object"==typeof e?Hu(e)?pr(e[0],e[1]):dr(e):Po(e)}function sr(e){if(!la(e))return _s(e);var t=[];for(var n in No(e))Ho.call(e,n)&&"constructor"!=n&&t.push(n);return t}function ur(e){if(!Za(e))return fa(e);var t=la(e),n=[];for(var r in e)("constructor"!=r||!t&&Ho.call(e,r))&&n.push(r);return n}function lr(e,t){return e<t}function cr(e,t){var n=-1,r=Ka(e)?Do(e.length):[];return Bs(e,function(e,i,a){r[++n]=t(e,i,a)}),r}function dr(e){var t=Gi(e);return 1==t.length&&t[0][2]?da(t[0][0],t[0][1]):function(n){return n===e||ir(n,e,t)}}function pr(e,t){return aa(e)&&ca(t)?da(Ea(e),t):function(n){var r=fo(n,e);return r===te&&r===t?ho(n,e):nr(t,r,de|pe)}}function fr(e,t,n,r,i){e!==t&&Hs(t,function(a,o){if(Za(a))i||(i=new Yt),hr(e,t,o,n,fr,r,i);else{var s=r?r(e[o],a,o+"",e,t,i):te;s===te&&(s=a),nn(e,o,s)}},go)}function hr(e,t,n,r,i,a,o){var s=e[n],u=t[n],l=o.get(u);if(l)nn(e,n,l);else{var c=a?a(s,u,n+"",e,t,o):te,d=c===te;if(d){var p=Hu(u),f=!p&&Gu(u),h=!p&&!f&&Yu(u);c=u,p||f||h?Hu(s)?c=s:Qa(s)?c=oi(s):f?(d=!1,c=Qr(u,!0)):h?(d=!1,c=ti(u,!0)):c=[]:no(u)||Wu(u)?(c=s,Wu(s)?c=co(s):(!Za(s)||r&&Xa(s))&&(c=Zi(u))):d=!1}d&&(o.set(u,c),i(c,u,r,a,o),o.delete(u)),nn(e,n,c)}}function vr(e,t){var n=e.length;if(n)return t+=t<0?n:0,ra(t,n)?e[t]:te}function gr(e,t,n){var r=-1;return t=p(t.length?t:[To],L(Hi())),I(cr(e,function(e,n,i){return{criteria:p(t,function(t){return t(e)}),index:++r,value:e}}),function(e,t){return ri(e,t,n)})}function yr(e,t){return _r(e,t,function(t,n){return ho(e,n)})}function _r(e,t,n){for(var r=-1,i=t.length,a={};++r<i;){var o=t[r],s=Mn(e,o);n(s,o)&&Ir(a,Gr(o,e),s)}return a}function Ar(e){return function(t){return Mn(t,e)}}function mr(e,t,n,r){var i=r?k:E,a=-1,o=t.length,s=e;for(e===t&&(t=oi(t)),n&&(s=p(e,L(n)));++a<o;)for(var u=0,l=t[a],c=n?n(l):l;(u=i(s,c,u,r))>-1;)s!==e&&is.call(s,u,1),is.call(e,u,1);return e}function Er(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==a){var a=i;ra(i)?is.call(e,i,1):xr(e,i)}}return e}function kr(e,t){return e+fs(Ts()*(t-e+1))}function Tr(e,t,n,r){for(var i=-1,a=As(ps((t-e)/(n||1)),0),o=Do(a);a--;)o[r?a:++i]=e,e+=n;return o}function Vr(e,t){var n="";if(!e||t<1||t>De)return n;do{t%2&&(n+=e),(t=fs(t/2))&&(e+=e)}while(t);return n}function Sr(e,t){return iu(va(e,t,To),e+"")}function Rr(e){return Zt(_o(e))}function Pr(e,t){var n=_o(e);return ma(n,fn(t,0,n.length))}function Ir(e,t,n,r){if(!Za(e))return e;for(var i=-1,a=(t=Gr(t,e)).length,o=a-1,s=e;null!=s&&++i<a;){var u=Ea(t[i]),l=n;if(i!=o){var c=s[u];(l=r?r(c,u,s):te)===te&&(l=Za(c)?c:ra(t[i+1])?[]:{})}rn(s,u,l),s=s[u]}return e}function br(e){return ma(_o(e))}function Dr(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var a=Do(i);++r<i;)a[r]=e[r+t];return a}function wr(e,t){var n;return Bs(e,function(e,r,i){return!(n=t(e,r,i))}),!!n}function Lr(e,t,n){var r=0,i=null==e?r:e.length;if("number"==typeof t&&t===t&&i<=Ne){for(;r<i;){var a=r+i>>>1,o=e[a];null!==o&&!io(o)&&(n?o<=t:o<t)?r=a+1:i=a}return i}return Cr(e,t,To,n)}function Cr(e,t,n,r){t=n(t);for(var i=0,a=null==e?0:e.length,o=t!==t,s=null===t,u=io(t),l=t===te;i<a;){var c=fs((i+a)/2),d=n(e[c]),p=d!==te,f=null===d,h=d===d,v=io(d);if(o)var g=r||h;else g=l?h&&(r||p):s?h&&p&&(r||!f):u?h&&p&&!f&&(r||!v):!f&&!v&&(r?d<=t:d<t);g?i=c+1:a=c}return ms(a,Oe)}function Or(e,t){for(var n=-1,r=e.length,i=0,a=[];++n<r;){var o=e[n],s=t?t(o):o;if(!n||!Ga(s,u)){var u=s;a[i++]=0===o?0:o}}return a}function Nr(e){return"number"==typeof e?e:io(e)?Le:+e}function Ur(e){if("string"==typeof e)return e;if(Hu(e))return p(e,Ur)+"";if(io(e))return Fs?Fs.call(e):"";var t=e+"";return"0"==t&&1/e==-be?"-0":t}function Mr(e,t,n){var r=-1,i=c,a=e.length,o=!0,s=[],u=s;if(n)o=!1,i=d;else if(a>=ne){var l=t?null:Xs(e);if(l)return G(l);o=!1,i=O,u=new Xt}else u=t?[]:s;e:for(;++r<a;){var p=e[r],f=t?t(p):p;if(p=n||0!==p?p:0,o&&f===f){for(var h=u.length;h--;)if(u[h]===f)continue e;t&&u.push(f),s.push(p)}else i(u,f,n)||(u!==s&&u.push(f),s.push(p))}return s}function xr(e,t){return t=Gr(t,e),null==(e=ga(e,t))||delete e[Ea(ba(t))]}function jr(e,t,n,r){return Ir(e,t,n(Mn(e,t)),r)}function Fr(e,t,n,r){for(var i=e.length,a=r?i:-1;(r?a--:++a<i)&&t(e[a],a,e););return n?Dr(e,r?0:a,r?a+1:i):Dr(e,r?a+1:0,r?i:a)}function zr(e,t){var n=e;return n instanceof J&&(n=n.value()),h(t,function(e,t){return t.func.apply(t.thisArg,f([e],t.args))},n)}function Br(e,t,n){var r=e.length;if(r<2)return r?Mr(e[0]):[];for(var i=-1,a=Do(r);++i<r;)for(var o=e[i],s=-1;++s<r;)s!=i&&(a[i]=kn(a[i]||o,e[s],t,n));return Mr(Dn(a,1),t,n)}function Wr(e,t,n){for(var r=-1,i=e.length,a=t.length,o={};++r<i;){var s=r<a?t[r]:te;n(o,e[r],s)}return o}function Hr(e){return Qa(e)?e:[]}function qr(e){return"function"==typeof e?e:To}function Gr(e,t){return Hu(e)?e:aa(e,t)?[e]:au(po(e))}function Kr(e,t,n){var r=e.length;return n=n===te?r:n,!t&&n>=r?e:Dr(e,t,n)}function Qr(e,t){if(t)return e.slice();var n=e.length,r=es?es(n):new e.constructor(n);return e.copy(r),r}function $r(e){var t=new e.constructor(e.byteLength);return new Zo(t).set(new Zo(e)),t}function Xr(e,t){var n=t?$r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}function Yr(e,t,r){return h(t?r(W(e),ue):W(e),n,new e.constructor)}function Jr(e){var t=new e.constructor(e.source,Ft.exec(e));return t.lastIndex=e.lastIndex,t}function Zr(e,t,n){return h(t?n(G(e),ue):G(e),r,new e.constructor)}function ei(e){return js?No(js.call(e)):{}}function ti(e,t){var n=t?$r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function ni(e,t){if(e!==t){var n=e!==te,r=null===e,i=e===e,a=io(e),o=t!==te,s=null===t,u=t===t,l=io(t);if(!s&&!l&&!a&&e>t||a&&o&&u&&!s&&!l||r&&o&&u||!n&&u||!i)return 1;if(!r&&!a&&!l&&e<t||l&&n&&i&&!r&&!a||s&&n&&i||!o&&i||!u)return-1}return 0}function ri(e,t,n){for(var r=-1,i=e.criteria,a=t.criteria,o=i.length,s=n.length;++r<o;){var u=ni(i[r],a[r]);if(u)return r>=s?u:u*("desc"==n[r]?-1:1)}return e.index-t.index}function ii(e,t,n,r){for(var i=-1,a=e.length,o=n.length,s=-1,u=t.length,l=As(a-o,0),c=Do(u+l),d=!r;++s<u;)c[s]=t[s];for(;++i<o;)(d||i<a)&&(c[n[i]]=e[i]);for(;l--;)c[s++]=e[i++];return c}function ai(e,t,n,r){for(var i=-1,a=e.length,o=-1,s=n.length,u=-1,l=t.length,c=As(a-s,0),d=Do(c+l),p=!r;++i<c;)d[i]=e[i];for(var f=i;++u<l;)d[f+u]=t[u];for(;++o<s;)(p||i<a)&&(d[f+n[o]]=e[i++]);return d}function oi(e,t){var n=-1,r=e.length;for(t||(t=Do(r));++n<r;)t[n]=e[n];return t}function si(e,t,n,r){var i=!n;n||(n={});for(var a=-1,o=t.length;++a<o;){var s=t[a],u=r?r(n[s],e[s],s,n,e):te;u===te&&(u=e[s]),i?ln(n,s,u):rn(n,s,u)}return n}function ui(e,t){return si(e,Js(e),t)}function li(e,t){return si(e,Zs(e),t)}function ci(e,t){return function(n,r){var i=Hu(n)?a:on,o=t?t():{};return i(n,e,Hi(r,2),o)}}function di(e){return Sr(function(t,n){var r=-1,i=n.length,a=i>1?n[i-1]:te,o=i>2?n[2]:te;for(a=e.length>3&&"function"==typeof a?(i--,a):te,o&&ia(n[0],n[1],o)&&(a=i<3?te:a,i=1),t=No(t);++r<i;){var s=n[r];s&&e(t,s,r,a)}return t})}function pi(e,t){return function(n,r){if(null==n)return n;if(!Ka(n))return e(n,r);for(var i=n.length,a=t?i:-1,o=No(n);(t?a--:++a<i)&&!1!==r(o[a],a,o););return n}}function fi(e){return function(t,n,r){for(var i=-1,a=No(t),o=r(t),s=o.length;s--;){var u=o[e?s:++i];if(!1===n(a[u],u,a))break}return t}}function hi(e,t,n){function r(){return(this&&this!==bn&&this instanceof r?a:e).apply(i?n:this,arguments)}var i=t&fe,a=yi(e);return r}function vi(e){return function(t){var n=F(t=po(t))?Y(t):te,r=n?n[0]:t.charAt(0),i=n?Kr(n,1).join(""):t.slice(1);return r[e]()+i}}function gi(e){return function(t){return h(Eo(mo(t).replace(dn,"")),e,"")}}function yi(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=zs(e.prototype),r=e.apply(n,t);return Za(r)?r:n}}function _i(e,t,n){function r(){for(var o=arguments.length,s=Do(o),u=o,l=Wi(r);u--;)s[u]=arguments[u];var c=o<3&&s[0]!==l&&s[o-1]!==l?[]:q(s,l);return(o-=c.length)<n?bi(e,t,Ei,r.placeholder,te,s,c,te,te,n-o):i(this&&this!==bn&&this instanceof r?a:e,this,s)}var a=yi(e);return r}function Ai(e){return function(t,n,r){var i=No(t);if(!Ka(t)){var a=Hi(n,3);t=vo(t),n=function(e){return a(i[e],e,i)}}var o=e(t,n,r);return o>-1?i[a?t[o]:o]:te}}function mi(e){return ji(function(t){var n=t.length,r=n,i=Q.prototype.thru;for(e&&t.reverse();r--;){var a=t[r];if("function"!=typeof a)throw new xo(ie);if(i&&!o&&"wrapper"==Bi(a))var o=new Q([],!0)}for(r=o?r:n;++r<n;){var s=Bi(a=t[r]),u="wrapper"==s?Ys(a):te;o=u&&sa(u[0])&&u[1]==(me|ge|_e|Ee)&&!u[4].length&&1==u[9]?o[Bi(u[0])].apply(o,u[3]):1==a.length&&sa(a)?o[s]():o.thru(a)}return function(){var e=arguments,r=e[0];if(o&&1==e.length&&Hu(r))return o.plant(r).value();for(var i=0,a=n?t[i].apply(this,e):r;++i<n;)a=t[i].call(this,a);return a}})}function Ei(e,t,n,r,i,a,o,s,u,l){function c(){for(var y=arguments.length,_=Do(y),A=y;A--;)_[A]=arguments[A];if(h)var m=Wi(c),E=M(_,m);if(r&&(_=ii(_,r,i,h)),a&&(_=ai(_,a,o,h)),y-=E,h&&y<l){var k=q(_,m);return bi(e,t,Ei,c.placeholder,n,_,k,s,u,l-y)}var T=p?n:this,V=f?T[e]:e;return y=_.length,s?_=ya(_,s):v&&y>1&&_.reverse(),d&&u<y&&(_.length=u),this&&this!==bn&&this instanceof c&&(V=g||yi(V)),V.apply(T,_)}var d=t&me,p=t&fe,f=t&he,h=t&(ge|ye),v=t&ke,g=f?te:yi(e);return c}function ki(e,t){return function(n,r){return Zn(n,e,t(r),{})}}function Ti(e,t){return function(n,r){var i;if(n===te&&r===te)return t;if(n!==te&&(i=n),r!==te){if(i===te)return r;"string"==typeof n||"string"==typeof r?(n=Ur(n),r=Ur(r)):(n=Nr(n),r=Nr(r)),i=e(n,r)}return i}}function Vi(e){return ji(function(t){return t=p(t,L(Hi())),Sr(function(n){var r=this;return e(t,function(e){return i(e,r,n)})})})}function Si(e,t){var n=(t=t===te?" ":Ur(t)).length;if(n<2)return n?Vr(t,e):t;var r=Vr(t,ps(e/X(t)));return F(t)?Kr(Y(r),0,e).join(""):r.slice(0,e)}function Ri(e,t,n,r){function a(){for(var t=-1,u=arguments.length,l=-1,c=r.length,d=Do(c+u),p=this&&this!==bn&&this instanceof a?s:e;++l<c;)d[l]=r[l];for(;u--;)d[l++]=arguments[++t];return i(p,o?n:this,d)}var o=t&fe,s=yi(e);return a}function Pi(e){return function(t,n,r){return r&&"number"!=typeof r&&ia(t,n,r)&&(n=r=te),t=oo(t),n===te?(n=t,t=0):n=oo(n),r=r===te?t<n?1:-1:oo(r),Tr(t,n,r,e)}}function Ii(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=lo(t),n=lo(n)),e(t,n)}}function bi(e,t,n,r,i,a,o,s,u,l){var c=t&ge,d=c?o:te,p=c?te:o,f=c?a:te,h=c?te:a;t|=c?_e:Ae,(t&=~(c?Ae:_e))&ve||(t&=~(fe|he));var v=[e,t,i,f,d,h,p,s,u,l],g=n.apply(te,v);return sa(e)&&nu(g,v),g.placeholder=r,_a(g,e,t)}function Di(e){var t=Oo[e];return function(e,n){if(e=lo(e),n=null==n?0:ms(so(n),292)){var r=(po(e)+"e").split("e");return+((r=(po(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}function wi(e){return function(t){var n=eu(t);return n==Ge?W(t):n==Je?K(t):w(t,e(t))}}function Li(e,t,n,r,i,a,o,s){var u=t&he;if(!u&&"function"!=typeof e)throw new xo(ie);var l=r?r.length:0;if(l||(t&=~(_e|Ae),r=i=te),o=o===te?o:As(so(o),0),s=s===te?s:so(s),l-=i?i.length:0,t&Ae){var c=r,d=i;r=i=te}var p=u?te:Ys(e),f=[e,t,n,r,i,c,d,a,o,s];if(p&&pa(f,p),e=f[0],t=f[1],n=f[2],r=f[3],i=f[4],!(s=f[9]=f[9]===te?u?0:e.length:As(f[9]-l,0))&&t&(ge|ye)&&(t&=~(ge|ye)),t&&t!=fe)h=t==ge||t==ye?_i(e,t,s):t!=_e&&t!=(fe|_e)||i.length?Ei.apply(te,f):Ri(e,t,n,r);else var h=hi(e,t,n);return _a((p?Gs:nu)(h,f),e,t)}function Ci(e,t,n,r){return e===te||Ga(e,zo[n])&&!Ho.call(r,n)?t:e}function Oi(e,t,n,r,i,a){return Za(e)&&Za(t)&&(a.set(t,e),fr(e,t,te,Oi,a),a.delete(t)),e}function Ni(e){return no(e)?te:e}function Ui(e,t,n,r,i,a){var o=n&de,s=e.length,u=t.length;if(s!=u&&!(o&&u>s))return!1;var l=a.get(e);if(l&&a.get(t))return l==t;var c=-1,d=!0,p=n&pe?new Xt:te;for(a.set(e,t),a.set(t,e);++c<s;){var f=e[c],h=t[c];if(r)var v=o?r(h,f,c,t,e,a):r(f,h,c,e,t,a);if(v!==te){if(v)continue;d=!1;break}if(p){if(!g(t,function(e,t){if(!O(p,t)&&(f===e||i(f,e,n,r,a)))return p.push(t)})){d=!1;break}}else if(f!==h&&!i(f,h,n,r,a)){d=!1;break}}return a.delete(e),a.delete(t),d}function Mi(e,t,n,r,i,a,o){switch(n){case at:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case it:return!(e.byteLength!=t.byteLength||!a(new Zo(e),new Zo(t)));case Fe:case ze:case Ke:return Ga(+e,+t);case We:return e.name==t.name&&e.message==t.message;case Ye:case Ze:return e==t+"";case Ge:var s=W;case Je:var u=r&de;if(s||(s=G),e.size!=t.size&&!u)return!1;var l=o.get(e);if(l)return l==t;r|=pe,o.set(e,t);var c=Ui(s(e),s(t),r,i,a,o);return o.delete(e),c;case et:if(js)return js.call(e)==js.call(t)}return!1}function xi(e,t,n,r,i,a){var o=n&de,s=Fi(e),u=s.length;if(u!=Fi(t).length&&!o)return!1;for(var l=u;l--;){var c=s[l];if(!(o?c in t:Ho.call(t,c)))return!1}var d=a.get(e);if(d&&a.get(t))return d==t;var p=!0;a.set(e,t),a.set(t,e);for(var f=o;++l<u;){var h=e[c=s[l]],v=t[c];if(r)var g=o?r(v,h,c,t,e,a):r(h,v,c,e,t,a);if(!(g===te?h===v||i(h,v,n,r,a):g)){p=!1;break}f||(f="constructor"==c)}if(p&&!f){var y=e.constructor,_=t.constructor;y!=_&&"constructor"in e&&"constructor"in t&&!("function"==typeof y&&y instanceof y&&"function"==typeof _&&_ instanceof _)&&(p=!1)}return a.delete(e),a.delete(t),p}function ji(e){return iu(va(e,te,Pa),e+"")}function Fi(e){return Bn(e,vo,Js)}function zi(e){return Bn(e,go,Zs)}function Bi(e){for(var t=e.name+"",n=Ls[t],r=Ho.call(Ls,t)?n.length:0;r--;){var i=n[r],a=i.func;if(null==a||a==e)return i.name}return t}function Wi(e){return(Ho.call(y,"placeholder")?y:e).placeholder}function Hi(){var e=y.iteratee||Vo;return e=e===Vo?or:e,arguments.length?e(arguments[0],arguments[1]):e}function qi(e,t){var n=e.__data__;return oa(t)?n["string"==typeof t?"string":"hash"]:n.map}function Gi(e){for(var t=vo(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,ca(i)]}return t}function Ki(e,t){var n=j(e,t);return ar(n)?n:te}function Qi(e){var t=Ho.call(e,ss),n=e[ss];try{e[ss]=te;var r=!0}catch(e){}var i=Ko.call(e);return r&&(t?e[ss]=n:delete e[ss]),i}function $i(e,t,n){for(var r=-1,i=n.length;++r<i;){var a=n[r],o=a.size;switch(a.type){case"drop":e+=o;break;case"dropRight":t-=o;break;case"take":t=ms(t,e+o);break;case"takeRight":e=As(e,t-o)}}return{start:e,end:t}}function Xi(e){var t=e.match(Nt);return t?t[1].split(Ut):[]}function Yi(e,t,n){for(var r=-1,i=(t=Gr(t,e)).length,a=!1;++r<i;){var o=Ea(t[r]);if(!(a=null!=e&&n(e,o)))break;e=e[o]}return a||++r!=i?a:!!(i=null==e?0:e.length)&&Ja(i)&&ra(o,i)&&(Hu(e)||Wu(e))}function Ji(e){var t=e.length,n=e.constructor(t);return t&&"string"==typeof e[0]&&Ho.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function Zi(e){return"function"!=typeof e.constructor||la(e)?{}:zs(ts(e))}function ea(e,t,n,r){var i=e.constructor;switch(t){case it:return $r(e);case Fe:case ze:return new i(+e);case at:return Xr(e,r);case ot:case st:case ut:case lt:case ct:case dt:case pt:case ft:case ht:return ti(e,r);case Ge:return Yr(e,r,n);case Ke:case Ze:return new i(e);case Ye:return Jr(e);case Je:return Zr(e,r,n);case et:return ei(e)}}function ta(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(Ot,"{\n/* [wrapped with "+t+"] */\n")}function na(e){return Hu(e)||Wu(e)||!!(as&&e&&e[as])}function ra(e,t){return!!(t=null==t?De:t)&&("number"==typeof e||qt.test(e))&&e>-1&&e%1==0&&e<t}function ia(e,t,n){if(!Za(n))return!1;var r=typeof t;return!!("number"==r?Ka(n)&&ra(t,n.length):"string"==r&&t in n)&&Ga(n[t],e)}function aa(e,t){if(Hu(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!io(e))||Rt.test(e)||!St.test(e)||null!=t&&e in No(t)}function oa(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function sa(e){var t=Bi(e),n=y[t];if("function"!=typeof n||!(t in J.prototype))return!1;if(e===n)return!0;var r=Ys(n);return!!r&&e===r[0]}function ua(e){return!!Go&&Go in e}function la(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||zo)}function ca(e){return e===e&&!Za(e)}function da(e,t){return function(n){return null!=n&&n[e]===t&&(t!==te||e in No(n))}}function pa(e,t){var n=e[1],r=t[1],i=n|r,a=i<(fe|he|me),o=r==me&&n==ge||r==me&&n==Ee&&e[7].length<=t[8]||r==(me|Ee)&&t[7].length<=t[8]&&n==ge;if(!a&&!o)return e;r&fe&&(e[2]=t[2],i|=n&fe?0:ve);var s=t[3];if(s){var u=e[3];e[3]=u?ii(u,s,t[4]):s,e[4]=u?q(e[3],se):t[4]}return(s=t[5])&&(u=e[5],e[5]=u?ai(u,s,t[6]):s,e[6]=u?q(e[5],se):t[6]),(s=t[7])&&(e[7]=s),r&me&&(e[8]=null==e[8]?t[8]:ms(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=i,e}function fa(e){var t=[];if(null!=e)for(var n in No(e))t.push(n);return t}function ha(e){return Ko.call(e)}function va(e,t,n){return t=As(t===te?e.length-1:t,0),function(){for(var r=arguments,a=-1,o=As(r.length-t,0),s=Do(o);++a<o;)s[a]=r[t+a];a=-1;for(var u=Do(t+1);++a<t;)u[a]=r[a];return u[t]=n(s),i(e,this,u)}}function ga(e,t){return t.length<2?e:Mn(e,Dr(t,0,-1))}function ya(e,t){for(var n=e.length,r=ms(t.length,n),i=oi(e);r--;){var a=t[r];e[r]=ra(a,n)?i[a]:te}return e}function _a(e,t,n){var r=t+"";return iu(e,ta(r,Ta(Xi(r),n)))}function Aa(e){var t=0,n=0;return function(){var r=Es(),i=Re-(r-n);if(n=r,i>0){if(++t>=Se)return arguments[0]}else t=0;return e.apply(te,arguments)}}function ma(e,t){var n=-1,r=e.length,i=r-1;for(t=t===te?r:t;++n<t;){var a=kr(n,i),o=e[a];e[a]=e[n],e[n]=o}return e.length=t,e}function Ea(e){if("string"==typeof e||io(e))return e;var t=e+"";return"0"==t&&1/e==-be?"-0":t}function ka(e){if(null!=e){try{return Wo.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Ta(e,t){return o(Ue,function(n){var r="_."+n[0];t&n[1]&&!c(e,r)&&e.push(r)}),e.sort()}function Va(e){if(e instanceof J)return e.clone();var t=new Q(e.__wrapped__,e.__chain__);return t.__actions__=oi(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function Sa(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:so(n);return i<0&&(i=As(r+i,0)),m(e,Hi(t,3),i)}function Ra(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r-1;return n!==te&&(i=so(n),i=n<0?As(r+i,0):ms(i,r-1)),m(e,Hi(t,3),i,!0)}function Pa(e){return(null==e?0:e.length)?Dn(e,1):[]}function Ia(e){return e&&e.length?e[0]:te}function ba(e){var t=null==e?0:e.length;return t?e[t-1]:te}function Da(e,t){return e&&e.length&&t&&t.length?mr(e,t):e}function wa(e){return null==e?e:Vs.call(e)}function La(e){if(!e||!e.length)return[];var t=0;return e=l(e,function(e){if(Qa(e))return t=As(e.length,t),!0}),D(t,function(t){return p(e,S(t))})}function Ca(e,t){if(!e||!e.length)return[];var n=La(e);return null==t?n:p(n,function(e){return i(t,te,e)})}function Oa(e){var t=y(e);return t.__chain__=!0,t}function Na(e,t){return t(e)}function Ua(e,t){return(Hu(e)?o:Bs)(e,Hi(t,3))}function Ma(e,t){return(Hu(e)?s:Ws)(e,Hi(t,3))}function xa(e,t){return(Hu(e)?p:cr)(e,Hi(t,3))}function ja(e,t,n){return t=n?te:t,t=e&&null==t?e.length:t,Li(e,me,te,te,te,te,t)}function Fa(e,t){var n;if("function"!=typeof t)throw new xo(ie);return e=so(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=te),n}}function za(e,t,n){var r=Li(e,ge,te,te,te,te,te,t=n?te:t);return r.placeholder=za.placeholder,r}function Ba(e,t,n){var r=Li(e,ye,te,te,te,te,te,t=n?te:t);return r.placeholder=Ba.placeholder,r}function Wa(e,t,n){function r(t){var n=c,r=d;return c=d=te,g=t,f=e.apply(r,n)}function i(e){return g=e,h=ru(s,t),y?r(e):f}function a(e){var n=e-g,r=t-(e-v);return _?ms(r,p-n):r}function o(e){var n=e-v,r=e-g;return v===te||n>=t||n<0||_&&r>=p}function s(){var e=Lu();if(o(e))return u(e);h=ru(s,a(e))}function u(e){return h=te,A&&c?r(e):(c=d=te,f)}function l(){var e=Lu(),n=o(e);if(c=arguments,d=this,v=e,n){if(h===te)return i(v);if(_)return h=ru(s,t),r(v)}return h===te&&(h=ru(s,t)),f}var c,d,p,f,h,v,g=0,y=!1,_=!1,A=!0;if("function"!=typeof e)throw new xo(ie);return t=lo(t)||0,Za(n)&&(y=!!n.leading,p=(_="maxWait"in n)?As(lo(n.maxWait)||0,t):p,A="trailing"in n?!!n.trailing:A),l.cancel=function(){h!==te&&$s(h),g=0,c=v=d=h=te},l.flush=function(){return h===te?f:u(Lu())},l}function Ha(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new xo(ie);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var o=e.apply(this,r);return n.cache=a.set(i,o)||a,o};return n.cache=new(Ha.Cache||$t),n}function qa(e){if("function"!=typeof e)throw new xo(ie);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function Ga(e,t){return e===t||e!==e&&t!==t}function Ka(e){return null!=e&&Ja(e.length)&&!Xa(e)}function Qa(e){return eo(e)&&Ka(e)}function $a(e){if(!eo(e))return!1;var t=Kn(e);return t==We||t==Be||"string"==typeof e.message&&"string"==typeof e.name&&!no(e)}function Xa(e){if(!Za(e))return!1;var t=Kn(e);return t==He||t==qe||t==je||t==Xe}function Ya(e){return"number"==typeof e&&e==so(e)}function Ja(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=De}function Za(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function eo(e){return null!=e&&"object"==typeof e}function to(e){return"number"==typeof e||eo(e)&&Kn(e)==Ke}function no(e){if(!eo(e)||Kn(e)!=$e)return!1;var t=ts(e);if(null===t)return!0;var n=Ho.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Wo.call(n)==Qo}function ro(e){return"string"==typeof e||!Hu(e)&&eo(e)&&Kn(e)==Ze}function io(e){return"symbol"==typeof e||eo(e)&&Kn(e)==et}function ao(e){if(!e)return[];if(Ka(e))return ro(e)?Y(e):oi(e);if(os&&e[os])return B(e[os]());var t=eu(e);return(t==Ge?W:t==Je?G:_o)(e)}function oo(e){return e?(e=lo(e))===be||e===-be?(e<0?-1:1)*we:e===e?e:0:0===e?e:0}function so(e){var t=oo(e),n=t%1;return t===t?n?t-n:t:0}function uo(e){return e?fn(so(e),0,Ce):0}function lo(e){if("number"==typeof e)return e;if(io(e))return Le;if(Za(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Za(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(wt,"");var n=Bt.test(e);return n||Ht.test(e)?Rn(e.slice(2),n?2:8):zt.test(e)?Le:+e}function co(e){return si(e,go(e))}function po(e){return null==e?"":Ur(e)}function fo(e,t,n){var r=null==e?te:Mn(e,t);return r===te?n:r}function ho(e,t){return null!=e&&Yi(e,t,Xn)}function vo(e){return Ka(e)?Jt(e):sr(e)}function go(e){return Ka(e)?Jt(e,!0):ur(e)}function yo(e,t){if(null==e)return{};var n=p(zi(e),function(e){return[e]});return t=Hi(t),_r(e,n,function(e,n){return t(e,n[0])})}function _o(e){return null==e?[]:C(e,vo(e))}function Ao(e){return Tl(po(e).toLowerCase())}function mo(e){return(e=po(e))&&e.replace(Gt,Wn).replace(pn,"")}function Eo(e,t,n){return e=po(e),(t=n?te:t)===te?z(e)?ee(e):_(e):e.match(t)||[]}function ko(e){return function(){return e}}function To(e){return e}function Vo(e){return or("function"==typeof e?e:hn(e,ue))}function So(e,t,n){var r=vo(t),i=On(t,r);null!=n||Za(t)&&(i.length||!r.length)||(n=t,t=e,e=this,i=On(t,vo(t)));var a=!(Za(n)&&"chain"in n&&!n.chain),s=Xa(e);return o(i,function(n){var r=t[n];e[n]=r,s&&(e.prototype[n]=function(){var t=this.__chain__;if(a||t){var n=e(this.__wrapped__);return(n.__actions__=oi(this.__actions__)).push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,f([this.value()],arguments))})}),e}function Ro(){}function Po(e){return aa(e)?S(Ea(e)):Ar(e)}function Io(){return[]}function bo(){return!1}var Do=(t=null==t?bn:Gn.defaults(bn.Object(),t,Gn.pick(bn,yn))).Array,wo=t.Date,Lo=t.Error,Co=t.Function,Oo=t.Math,No=t.Object,Uo=t.RegExp,Mo=t.String,xo=t.TypeError,jo=Do.prototype,Fo=Co.prototype,zo=No.prototype,Bo=t["__core-js_shared__"],Wo=Fo.toString,Ho=zo.hasOwnProperty,qo=0,Go=function(){var e=/[^.]+$/.exec(Bo&&Bo.keys&&Bo.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Ko=zo.toString,Qo=Wo.call(No),$o=bn._,Xo=Uo("^"+Wo.call(Ho).replace(bt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Yo=Ln?t.Buffer:te,Jo=t.Symbol,Zo=t.Uint8Array,es=Yo?Yo.allocUnsafe:te,ts=H(No.getPrototypeOf,No),ns=No.create,rs=zo.propertyIsEnumerable,is=jo.splice,as=Jo?Jo.isConcatSpreadable:te,os=Jo?Jo.iterator:te,ss=Jo?Jo.toStringTag:te,us=function(){try{var e=Ki(No,"defineProperty");return e({},"",{}),e}catch(e){}}(),ls=t.clearTimeout!==bn.clearTimeout&&t.clearTimeout,cs=wo&&wo.now!==bn.Date.now&&wo.now,ds=t.setTimeout!==bn.setTimeout&&t.setTimeout,ps=Oo.ceil,fs=Oo.floor,hs=No.getOwnPropertySymbols,vs=Yo?Yo.isBuffer:te,gs=t.isFinite,ys=jo.join,_s=H(No.keys,No),As=Oo.max,ms=Oo.min,Es=wo.now,ks=t.parseInt,Ts=Oo.random,Vs=jo.reverse,Ss=Ki(t,"DataView"),Rs=Ki(t,"Map"),Ps=Ki(t,"Promise"),Is=Ki(t,"Set"),bs=Ki(t,"WeakMap"),Ds=Ki(No,"create"),ws=bs&&new bs,Ls={},Cs=ka(Ss),Os=ka(Rs),Ns=ka(Ps),Us=ka(Is),Ms=ka(bs),xs=Jo?Jo.prototype:te,js=xs?xs.valueOf:te,Fs=xs?xs.toString:te,zs=function(){function e(){}return function(t){if(!Za(t))return{};if(ns)return ns(t);e.prototype=t;var n=new e;return e.prototype=te,n}}();y.templateSettings={escape:kt,evaluate:Tt,interpolate:Vt,variable:"",imports:{_:y}},y.prototype=R.prototype,y.prototype.constructor=y,Q.prototype=zs(R.prototype),Q.prototype.constructor=Q,J.prototype=zs(R.prototype),J.prototype.constructor=J,Z.prototype.clear=function(){this.__data__=Ds?Ds(null):{},this.size=0},Z.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Z.prototype.get=function(e){var t=this.__data__;if(Ds){var n=t[e];return n===ae?te:n}return Ho.call(t,e)?t[e]:te},Z.prototype.has=function(e){var t=this.__data__;return Ds?t[e]!==te:Ho.call(t,e)},Z.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Ds&&t===te?ae:t,this},Mt.prototype.clear=function(){this.__data__=[],this.size=0},Mt.prototype.delete=function(e){var t=this.__data__,n=an(t,e);return!(n<0||(n==t.length-1?t.pop():is.call(t,n,1),--this.size,0))},Mt.prototype.get=function(e){var t=this.__data__,n=an(t,e);return n<0?te:t[n][1]},Mt.prototype.has=function(e){return an(this.__data__,e)>-1},Mt.prototype.set=function(e,t){var n=this.__data__,r=an(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},$t.prototype.clear=function(){this.size=0,this.__data__={hash:new Z,map:new(Rs||Mt),string:new Z}},$t.prototype.delete=function(e){var t=qi(this,e).delete(e);return this.size-=t?1:0,t},$t.prototype.get=function(e){return qi(this,e).get(e)},$t.prototype.has=function(e){return qi(this,e).has(e)},$t.prototype.set=function(e,t){var n=qi(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},Xt.prototype.add=Xt.prototype.push=function(e){return this.__data__.set(e,ae),this},Xt.prototype.has=function(e){return this.__data__.has(e)},Yt.prototype.clear=function(){this.__data__=new Mt,this.size=0},Yt.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Yt.prototype.get=function(e){return this.__data__.get(e)},Yt.prototype.has=function(e){return this.__data__.has(e)},Yt.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Mt){var r=n.__data__;if(!Rs||r.length<ne-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new $t(r)}return n.set(e,t),this.size=n.size,this};var Bs=pi(wn),Ws=pi(Cn,!0),Hs=fi(),qs=fi(!0),Gs=ws?function(e,t){return ws.set(e,t),e}:To,Ks=us?function(e,t){return us(e,"toString",{configurable:!0,enumerable:!1,value:ko(t),writable:!0})}:To,Qs=Sr,$s=ls||function(e){return bn.clearTimeout(e)},Xs=Is&&1/G(new Is([,-0]))[1]==be?function(e){return new Is(e)}:Ro,Ys=ws?function(e){return ws.get(e)}:Ro,Js=hs?function(e){return null==e?[]:(e=No(e),l(hs(e),function(t){return rs.call(e,t)}))}:Io,Zs=hs?function(e){for(var t=[];e;)f(t,Js(e)),e=ts(e);return t}:Io,eu=Kn;(Ss&&eu(new Ss(new ArrayBuffer(1)))!=at||Rs&&eu(new Rs)!=Ge||Ps&&"[object Promise]"!=eu(Ps.resolve())||Is&&eu(new Is)!=Je||bs&&eu(new bs)!=nt)&&(eu=function(e){var t=Kn(e),n=t==$e?e.constructor:te,r=n?ka(n):"";if(r)switch(r){case Cs:return at;case Os:return Ge;case Ns:return"[object Promise]";case Us:return Je;case Ms:return nt}return t});var tu=Bo?Xa:bo,nu=Aa(Gs),ru=ds||function(e,t){return bn.setTimeout(e,t)},iu=Aa(Ks),au=function(e){var t=Ha(e,function(e){return n.size===oe&&n.clear(),e}),n=t.cache;return t}(function(e){var t=[];return Pt.test(e)&&t.push(""),e.replace(It,function(e,n,r,i){t.push(r?i.replace(xt,"$1"):n||e)}),t}),ou=Sr(function(e,t){return Qa(e)?kn(e,Dn(t,1,Qa,!0)):[]}),su=Sr(function(e,t){var n=ba(t);return Qa(n)&&(n=te),Qa(e)?kn(e,Dn(t,1,Qa,!0),Hi(n,2)):[]}),uu=Sr(function(e,t){var n=ba(t);return Qa(n)&&(n=te),Qa(e)?kn(e,Dn(t,1,Qa,!0),te,n):[]}),lu=Sr(function(e){var t=p(e,Hr);return t.length&&t[0]===e[0]?Jn(t):[]}),cu=Sr(function(e){var t=ba(e),n=p(e,Hr);return t===ba(n)?t=te:n.pop(),n.length&&n[0]===e[0]?Jn(n,Hi(t,2)):[]}),du=Sr(function(e){var t=ba(e),n=p(e,Hr);return(t="function"==typeof t?t:te)&&n.pop(),n.length&&n[0]===e[0]?Jn(n,te,t):[]}),pu=Sr(Da),fu=ji(function(e,t){var n=null==e?0:e.length,r=cn(e,t);return Er(e,p(t,function(e){return ra(e,n)?+e:e}).sort(ni)),r}),hu=Sr(function(e){return Mr(Dn(e,1,Qa,!0))}),vu=Sr(function(e){var t=ba(e);return Qa(t)&&(t=te),Mr(Dn(e,1,Qa,!0),Hi(t,2))}),gu=Sr(function(e){var t=ba(e);return t="function"==typeof t?t:te,Mr(Dn(e,1,Qa,!0),te,t)}),yu=Sr(function(e,t){return Qa(e)?kn(e,t):[]}),_u=Sr(function(e){return Br(l(e,Qa))}),Au=Sr(function(e){var t=ba(e);return Qa(t)&&(t=te),Br(l(e,Qa),Hi(t,2))}),mu=Sr(function(e){var t=ba(e);return t="function"==typeof t?t:te,Br(l(e,Qa),te,t)}),Eu=Sr(La),ku=Sr(function(e){var t=e.length,n=t>1?e[t-1]:te;return n="function"==typeof n?(e.pop(),n):te,Ca(e,n)}),Tu=ji(function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,i=function(t){return cn(t,e)};return!(t>1||this.__actions__.length)&&r instanceof J&&ra(n)?((r=r.slice(n,+n+(t?1:0))).__actions__.push({func:Na,args:[i],thisArg:te}),new Q(r,this.__chain__).thru(function(e){return t&&!e.length&&e.push(te),e})):this.thru(i)}),Vu=ci(function(e,t,n){Ho.call(e,n)?++e[n]:ln(e,n,1)}),Su=Ai(Sa),Ru=Ai(Ra),Pu=ci(function(e,t,n){Ho.call(e,n)?e[n].push(t):ln(e,n,[t])}),Iu=Sr(function(e,t,n){var r=-1,a="function"==typeof t,o=Ka(e)?Do(e.length):[];return Bs(e,function(e){o[++r]=a?i(t,e,n):er(e,t,n)}),o}),bu=ci(function(e,t,n){ln(e,n,t)}),Du=ci(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]}),wu=Sr(function(e,t){if(null==e)return[];var n=t.length;return n>1&&ia(e,t[0],t[1])?t=[]:n>2&&ia(t[0],t[1],t[2])&&(t=[t[0]]),gr(e,Dn(t,1),[])}),Lu=cs||function(){return bn.Date.now()},Cu=Sr(function(e,t,n){var r=fe;if(n.length){var i=q(n,Wi(Cu));r|=_e}return Li(e,r,t,n,i)}),Ou=Sr(function(e,t,n){var r=fe|he;if(n.length){var i=q(n,Wi(Ou));r|=_e}return Li(t,r,e,n,i)}),Nu=Sr(function(e,t){return En(e,1,t)}),Uu=Sr(function(e,t,n){return En(e,lo(t)||0,n)});Ha.Cache=$t;var Mu=Qs(function(e,t){var n=(t=1==t.length&&Hu(t[0])?p(t[0],L(Hi())):p(Dn(t,1),L(Hi()))).length;return Sr(function(r){for(var a=-1,o=ms(r.length,n);++a<o;)r[a]=t[a].call(this,r[a]);return i(e,this,r)})}),xu=Sr(function(e,t){var n=q(t,Wi(xu));return Li(e,_e,te,t,n)}),ju=Sr(function(e,t){var n=q(t,Wi(ju));return Li(e,Ae,te,t,n)}),Fu=ji(function(e,t){return Li(e,Ee,te,te,te,t)}),zu=Ii(Qn),Bu=Ii(function(e,t){return e>=t}),Wu=tr(function(){return arguments}())?tr:function(e){return eo(e)&&Ho.call(e,"callee")&&!rs.call(e,"callee")},Hu=Do.isArray,qu=Nn?L(Nn):function(e){return eo(e)&&Kn(e)==it},Gu=vs||bo,Ku=Un?L(Un):function(e){return eo(e)&&Kn(e)==ze},Qu=xn?L(xn):function(e){return eo(e)&&eu(e)==Ge},$u=jn?L(jn):function(e){return eo(e)&&Kn(e)==Ye},Xu=Fn?L(Fn):function(e){return eo(e)&&eu(e)==Je},Yu=zn?L(zn):function(e){return eo(e)&&Ja(e.length)&&!!An[Kn(e)]},Ju=Ii(lr),Zu=Ii(function(e,t){return e<=t}),el=di(function(e,t){if(la(t)||Ka(t))si(t,vo(t),e);else for(var n in t)Ho.call(t,n)&&rn(e,n,t[n])}),tl=di(function(e,t){si(t,go(t),e)}),nl=di(function(e,t,n,r){si(t,go(t),e,r)}),rl=di(function(e,t,n,r){si(t,vo(t),e,r)}),il=ji(cn),al=Sr(function(e){return e.push(te,Ci),i(nl,te,e)}),ol=Sr(function(e){return e.push(te,Oi),i(dl,te,e)}),sl=ki(function(e,t,n){e[t]=n},ko(To)),ul=ki(function(e,t,n){Ho.call(e,t)?e[t].push(n):e[t]=[n]},Hi),ll=Sr(er),cl=di(function(e,t,n){fr(e,t,n)}),dl=di(function(e,t,n,r){fr(e,t,n,r)}),pl=ji(function(e,t){var n={};if(null==e)return n;var r=!1;t=p(t,function(t){return t=Gr(t,e),r||(r=t.length>1),t}),si(e,zi(e),n),r&&(n=hn(n,ue|le|ce,Ni));for(var i=t.length;i--;)xr(n,t[i]);return n}),fl=ji(function(e,t){return null==e?{}:yr(e,t)}),hl=wi(vo),vl=wi(go),gl=gi(function(e,t,n){return t=t.toLowerCase(),e+(n?Ao(t):t)}),yl=gi(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),_l=gi(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()}),Al=vi("toLowerCase"),ml=gi(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}),El=gi(function(e,t,n){return e+(n?" ":"")+Tl(t)}),kl=gi(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()}),Tl=vi("toUpperCase"),Vl=Sr(function(e,t){try{return i(e,te,t)}catch(e){return $a(e)?e:new Lo(e)}}),Sl=ji(function(e,t){return o(t,function(t){t=Ea(t),ln(e,t,Cu(e[t],e))}),e}),Rl=mi(),Pl=mi(!0),Il=Sr(function(e,t){return function(n){return er(n,e,t)}}),bl=Sr(function(e,t){return function(n){return er(e,n,t)}}),Dl=Vi(p),wl=Vi(u),Ll=Vi(g),Cl=Pi(),Ol=Pi(!0),Nl=Ti(function(e,t){return e+t},0),Ul=Di("ceil"),Ml=Ti(function(e,t){return e/t},1),xl=Di("floor"),jl=Ti(function(e,t){return e*t},1),Fl=Di("round"),zl=Ti(function(e,t){return e-t},0);return y.after=function(e,t){if("function"!=typeof t)throw new xo(ie);return e=so(e),function(){if(--e<1)return t.apply(this,arguments)}},y.ary=ja,y.assign=el,y.assignIn=tl,y.assignInWith=nl,y.assignWith=rl,y.at=il,y.before=Fa,y.bind=Cu,y.bindAll=Sl,y.bindKey=Ou,y.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Hu(e)?e:[e]},y.chain=Oa,y.chunk=function(e,t,n){t=(n?ia(e,t,n):t===te)?1:As(so(t),0);var r=null==e?0:e.length;if(!r||t<1)return[];for(var i=0,a=0,o=Do(ps(r/t));i<r;)o[a++]=Dr(e,i,i+=t);return o},y.compact=function(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var a=e[t];a&&(i[r++]=a)}return i},y.concat=function(){var e=arguments.length;if(!e)return[];for(var t=Do(e-1),n=arguments[0],r=e;r--;)t[r-1]=arguments[r];return f(Hu(n)?oi(n):[n],Dn(t,1))},y.cond=function(e){var t=null==e?0:e.length,n=Hi();return e=t?p(e,function(e){if("function"!=typeof e[1])throw new xo(ie);return[n(e[0]),e[1]]}):[],Sr(function(n){for(var r=-1;++r<t;){var a=e[r];if(i(a[0],this,n))return i(a[1],this,n)}})},y.conforms=function(e){return vn(hn(e,ue))},y.constant=ko,y.countBy=Vu,y.create=function(e,t){var n=zs(e);return null==t?n:sn(n,t)},y.curry=za,y.curryRight=Ba,y.debounce=Wa,y.defaults=al,y.defaultsDeep=ol,y.defer=Nu,y.delay=Uu,y.difference=ou,y.differenceBy=su,y.differenceWith=uu,y.drop=function(e,t,n){var r=null==e?0:e.length;return r?(t=n||t===te?1:so(t),Dr(e,t<0?0:t,r)):[]},y.dropRight=function(e,t,n){var r=null==e?0:e.length;return r?(t=n||t===te?1:so(t),t=r-t,Dr(e,0,t<0?0:t)):[]},y.dropRightWhile=function(e,t){return e&&e.length?Fr(e,Hi(t,3),!0,!0):[]},y.dropWhile=function(e,t){return e&&e.length?Fr(e,Hi(t,3),!0):[]},y.fill=function(e,t,n,r){var i=null==e?0:e.length;return i?(n&&"number"!=typeof n&&ia(e,t,n)&&(n=0,r=i),Pn(e,t,n,r)):[]},y.filter=function(e,t){return(Hu(e)?l:In)(e,Hi(t,3))},y.flatMap=function(e,t){return Dn(xa(e,t),1)},y.flatMapDeep=function(e,t){return Dn(xa(e,t),be)},y.flatMapDepth=function(e,t,n){return n=n===te?1:so(n),Dn(xa(e,t),n)},y.flatten=Pa,y.flattenDeep=function(e){return(null==e?0:e.length)?Dn(e,be):[]},y.flattenDepth=function(e,t){return(null==e?0:e.length)?(t=t===te?1:so(t),Dn(e,t)):[]},y.flip=function(e){return Li(e,ke)},y.flow=Rl,y.flowRight=Pl,y.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r},y.functions=function(e){return null==e?[]:On(e,vo(e))},y.functionsIn=function(e){return null==e?[]:On(e,go(e))},y.groupBy=Pu,y.initial=function(e){return(null==e?0:e.length)?Dr(e,0,-1):[]},y.intersection=lu,y.intersectionBy=cu,y.intersectionWith=du,y.invert=sl,y.invertBy=ul,y.invokeMap=Iu,y.iteratee=Vo,y.keyBy=bu,y.keys=vo,y.keysIn=go,y.map=xa,y.mapKeys=function(e,t){var n={};return t=Hi(t,3),wn(e,function(e,r,i){ln(n,t(e,r,i),e)}),n},y.mapValues=function(e,t){var n={};return t=Hi(t,3),wn(e,function(e,r,i){ln(n,r,t(e,r,i))}),n},y.matches=function(e){return dr(hn(e,ue))},y.matchesProperty=function(e,t){return pr(e,hn(t,ue))},y.memoize=Ha,y.merge=cl,y.mergeWith=dl,y.method=Il,y.methodOf=bl,y.mixin=So,y.negate=qa,y.nthArg=function(e){return e=so(e),Sr(function(t){return vr(t,e)})},y.omit=pl,y.omitBy=function(e,t){return yo(e,qa(Hi(t)))},y.once=function(e){return Fa(2,e)},y.orderBy=function(e,t,n,r){return null==e?[]:(Hu(t)||(t=null==t?[]:[t]),n=r?te:n,Hu(n)||(n=null==n?[]:[n]),gr(e,t,n))},y.over=Dl,y.overArgs=Mu,y.overEvery=wl,y.overSome=Ll,y.partial=xu,y.partialRight=ju,y.partition=Du,y.pick=fl,y.pickBy=yo,y.property=Po,y.propertyOf=function(e){return function(t){return null==e?te:Mn(e,t)}},y.pull=pu,y.pullAll=Da,y.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?mr(e,t,Hi(n,2)):e},y.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?mr(e,t,te,n):e},y.pullAt=fu,y.range=Cl,y.rangeRight=Ol,y.rearg=Fu,y.reject=function(e,t){return(Hu(e)?l:In)(e,qa(Hi(t,3)))},y.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],a=e.length;for(t=Hi(t,3);++r<a;){var o=e[r];t(o,r,e)&&(n.push(o),i.push(r))}return Er(e,i),n},y.rest=function(e,t){if("function"!=typeof e)throw new xo(ie);return t=t===te?t:so(t),Sr(e,t)},y.reverse=wa,y.sampleSize=function(e,t,n){return t=(n?ia(e,t,n):t===te)?1:so(t),(Hu(e)?en:Pr)(e,t)},y.set=function(e,t,n){return null==e?e:Ir(e,t,n)},y.setWith=function(e,t,n,r){return r="function"==typeof r?r:te,null==e?e:Ir(e,t,n,r)},y.shuffle=function(e){return(Hu(e)?tn:br)(e)},y.slice=function(e,t,n){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&ia(e,t,n)?(t=0,n=r):(t=null==t?0:so(t),n=n===te?r:so(n)),Dr(e,t,n)):[]},y.sortBy=wu,y.sortedUniq=function(e){return e&&e.length?Or(e):[]},y.sortedUniqBy=function(e,t){return e&&e.length?Or(e,Hi(t,2)):[]},y.split=function(e,t,n){return n&&"number"!=typeof n&&ia(e,t,n)&&(t=n=te),(n=n===te?Ce:n>>>0)?(e=po(e))&&("string"==typeof t||null!=t&&!$u(t))&&!(t=Ur(t))&&F(e)?Kr(Y(e),0,n):e.split(t,n):[]},y.spread=function(e,t){if("function"!=typeof e)throw new xo(ie);return t=null==t?0:As(so(t),0),Sr(function(n){var r=n[t],a=Kr(n,0,t);return r&&f(a,r),i(e,this,a)})},y.tail=function(e){var t=null==e?0:e.length;return t?Dr(e,1,t):[]},y.take=function(e,t,n){return e&&e.length?(t=n||t===te?1:so(t),Dr(e,0,t<0?0:t)):[]},y.takeRight=function(e,t,n){var r=null==e?0:e.length;return r?(t=n||t===te?1:so(t),t=r-t,Dr(e,t<0?0:t,r)):[]},y.takeRightWhile=function(e,t){return e&&e.length?Fr(e,Hi(t,3),!1,!0):[]},y.takeWhile=function(e,t){return e&&e.length?Fr(e,Hi(t,3)):[]},y.tap=function(e,t){return t(e),e},y.throttle=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new xo(ie);return Za(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Wa(e,t,{leading:r,maxWait:t,trailing:i})},y.thru=Na,y.toArray=ao,y.toPairs=hl,y.toPairsIn=vl,y.toPath=function(e){return Hu(e)?p(e,Ea):io(e)?[e]:oi(au(po(e)))},y.toPlainObject=co,y.transform=function(e,t,n){var r=Hu(e),i=r||Gu(e)||Yu(e);if(t=Hi(t,4),null==n){var a=e&&e.constructor;n=i?r?new a:[]:Za(e)&&Xa(a)?zs(ts(e)):{}}return(i?o:wn)(e,function(e,r,i){return t(n,e,r,i)}),n},y.unary=function(e){return ja(e,1)},y.union=hu,y.unionBy=vu,y.unionWith=gu,y.uniq=function(e){return e&&e.length?Mr(e):[]},y.uniqBy=function(e,t){return e&&e.length?Mr(e,Hi(t,2)):[]},y.uniqWith=function(e,t){return t="function"==typeof t?t:te,e&&e.length?Mr(e,te,t):[]},y.unset=function(e,t){return null==e||xr(e,t)},y.unzip=La,y.unzipWith=Ca,y.update=function(e,t,n){return null==e?e:jr(e,t,qr(n))},y.updateWith=function(e,t,n,r){return r="function"==typeof r?r:te,null==e?e:jr(e,t,qr(n),r)},y.values=_o,y.valuesIn=function(e){return null==e?[]:C(e,go(e))},y.without=yu,y.words=Eo,y.wrap=function(e,t){return xu(qr(t),e)},y.xor=_u,y.xorBy=Au,y.xorWith=mu,y.zip=Eu,y.zipObject=function(e,t){return Wr(e||[],t||[],rn)},y.zipObjectDeep=function(e,t){return Wr(e||[],t||[],Ir)},y.zipWith=ku,y.entries=hl,y.entriesIn=vl,y.extend=tl,y.extendWith=nl,So(y,y),y.add=Nl,y.attempt=Vl,y.camelCase=gl,y.capitalize=Ao,y.ceil=Ul,y.clamp=function(e,t,n){return n===te&&(n=t,t=te),n!==te&&(n=(n=lo(n))===n?n:0),t!==te&&(t=(t=lo(t))===t?t:0),fn(lo(e),t,n)},y.clone=function(e){return hn(e,ce)},y.cloneDeep=function(e){return hn(e,ue|ce)},y.cloneDeepWith=function(e,t){return t="function"==typeof t?t:te,hn(e,ue|ce,t)},y.cloneWith=function(e,t){return t="function"==typeof t?t:te,hn(e,ce,t)},y.conformsTo=function(e,t){return null==t||gn(e,t,vo(t))},y.deburr=mo,y.defaultTo=function(e,t){return null==e||e!==e?t:e},y.divide=Ml,y.endsWith=function(e,t,n){e=po(e),t=Ur(t);var r=e.length,i=n=n===te?r:fn(so(n),0,r);return(n-=t.length)>=0&&e.slice(n,i)==t},y.eq=Ga,y.escape=function(e){return(e=po(e))&&Et.test(e)?e.replace(At,Hn):e},y.escapeRegExp=function(e){return(e=po(e))&&Dt.test(e)?e.replace(bt,"\\$&"):e},y.every=function(e,t,n){var r=Hu(e)?u:Tn;return n&&ia(e,t,n)&&(t=te),r(e,Hi(t,3))},y.find=Su,y.findIndex=Sa,y.findKey=function(e,t){return A(e,Hi(t,3),wn)},y.findLast=Ru,y.findLastIndex=Ra,y.findLastKey=function(e,t){return A(e,Hi(t,3),Cn)},y.floor=xl,y.forEach=Ua,y.forEachRight=Ma,y.forIn=function(e,t){return null==e?e:Hs(e,Hi(t,3),go)},y.forInRight=function(e,t){return null==e?e:qs(e,Hi(t,3),go)},y.forOwn=function(e,t){return e&&wn(e,Hi(t,3))},y.forOwnRight=function(e,t){return e&&Cn(e,Hi(t,3))},y.get=fo,y.gt=zu,y.gte=Bu,y.has=function(e,t){return null!=e&&Yi(e,t,$n)},y.hasIn=ho,y.head=Ia,y.identity=To,y.includes=function(e,t,n,r){e=Ka(e)?e:_o(e),n=n&&!r?so(n):0;var i=e.length;return n<0&&(n=As(i+n,0)),ro(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&E(e,t,n)>-1},y.indexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:so(n);return i<0&&(i=As(r+i,0)),E(e,t,i)},y.inRange=function(e,t,n){return t=oo(t),n===te?(n=t,t=0):n=oo(n),e=lo(e),Yn(e,t,n)},y.invoke=ll,y.isArguments=Wu,y.isArray=Hu,y.isArrayBuffer=qu,y.isArrayLike=Ka,y.isArrayLikeObject=Qa,y.isBoolean=function(e){return!0===e||!1===e||eo(e)&&Kn(e)==Fe},y.isBuffer=Gu,y.isDate=Ku,y.isElement=function(e){return eo(e)&&1===e.nodeType&&!no(e)},y.isEmpty=function(e){if(null==e)return!0;if(Ka(e)&&(Hu(e)||"string"==typeof e||"function"==typeof e.splice||Gu(e)||Yu(e)||Wu(e)))return!e.length;var t=eu(e);if(t==Ge||t==Je)return!e.size;if(la(e))return!sr(e).length;for(var n in e)if(Ho.call(e,n))return!1;return!0},y.isEqual=function(e,t){return nr(e,t)},y.isEqualWith=function(e,t,n){var r=(n="function"==typeof n?n:te)?n(e,t):te;return r===te?nr(e,t,te,n):!!r},y.isError=$a,y.isFinite=function(e){return"number"==typeof e&&gs(e)},y.isFunction=Xa,y.isInteger=Ya,y.isLength=Ja,y.isMap=Qu,y.isMatch=function(e,t){return e===t||ir(e,t,Gi(t))},y.isMatchWith=function(e,t,n){return n="function"==typeof n?n:te,ir(e,t,Gi(t),n)},y.isNaN=function(e){return to(e)&&e!=+e},y.isNative=function(e){if(tu(e))throw new Lo(re);return ar(e)},y.isNil=function(e){return null==e},y.isNull=function(e){return null===e},y.isNumber=to,y.isObject=Za,y.isObjectLike=eo,y.isPlainObject=no,y.isRegExp=$u,y.isSafeInteger=function(e){return Ya(e)&&e>=-De&&e<=De},y.isSet=Xu,y.isString=ro,y.isSymbol=io,y.isTypedArray=Yu,y.isUndefined=function(e){return e===te},y.isWeakMap=function(e){return eo(e)&&eu(e)==nt},y.isWeakSet=function(e){return eo(e)&&Kn(e)==rt},y.join=function(e,t){return null==e?"":ys.call(e,t)},y.kebabCase=yl,y.last=ba,y.lastIndexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r;return n!==te&&(i=(i=so(n))<0?As(r+i,0):ms(i,r-1)),t===t?$(e,t,i):m(e,T,i,!0)},y.lowerCase=_l,y.lowerFirst=Al,y.lt=Ju,y.lte=Zu,y.max=function(e){return e&&e.length?Vn(e,To,Qn):te},y.maxBy=function(e,t){return e&&e.length?Vn(e,Hi(t,2),Qn):te},y.mean=function(e){return V(e,To)},y.meanBy=function(e,t){return V(e,Hi(t,2))},y.min=function(e){return e&&e.length?Vn(e,To,lr):te},y.minBy=function(e,t){return e&&e.length?Vn(e,Hi(t,2),lr):te},y.stubArray=Io,y.stubFalse=bo,y.stubObject=function(){return{}},y.stubString=function(){return""},y.stubTrue=function(){return!0},y.multiply=jl,y.nth=function(e,t){return e&&e.length?vr(e,so(t)):te},y.noConflict=function(){return bn._===this&&(bn._=$o),this},y.noop=Ro,y.now=Lu,y.pad=function(e,t,n){e=po(e);var r=(t=so(t))?X(e):0;if(!t||r>=t)return e;var i=(t-r)/2;return Si(fs(i),n)+e+Si(ps(i),n)},y.padEnd=function(e,t,n){e=po(e);var r=(t=so(t))?X(e):0;return t&&r<t?e+Si(t-r,n):e},y.padStart=function(e,t,n){e=po(e);var r=(t=so(t))?X(e):0;return t&&r<t?Si(t-r,n)+e:e},y.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),ks(po(e).replace(Lt,""),t||0)},y.random=function(e,t,n){if(n&&"boolean"!=typeof n&&ia(e,t,n)&&(t=n=te),n===te&&("boolean"==typeof t?(n=t,t=te):"boolean"==typeof e&&(n=e,e=te)),e===te&&t===te?(e=0,t=1):(e=oo(e),t===te?(t=e,e=0):t=oo(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var i=Ts();return ms(e+i*(t-e+Sn("1e-"+((i+"").length-1))),t)}return kr(e,t)},y.reduce=function(e,t,n){var r=Hu(e)?h:P,i=arguments.length<3;return r(e,Hi(t,4),n,i,Bs)},y.reduceRight=function(e,t,n){var r=Hu(e)?v:P,i=arguments.length<3;return r(e,Hi(t,4),n,i,Ws)},y.repeat=function(e,t,n){return t=(n?ia(e,t,n):t===te)?1:so(t),Vr(po(e),t)},y.replace=function(){var e=arguments,t=po(e[0]);return e.length<3?t:t.replace(e[1],e[2])},y.result=function(e,t,n){var r=-1,i=(t=Gr(t,e)).length;for(i||(i=1,e=te);++r<i;){var a=null==e?te:e[Ea(t[r])];a===te&&(r=i,a=n),e=Xa(a)?a.call(e):a}return e},y.round=Fl,y.runInContext=e,y.sample=function(e){return(Hu(e)?Zt:Rr)(e)},y.size=function(e){if(null==e)return 0;if(Ka(e))return ro(e)?X(e):e.length;var t=eu(e);return t==Ge||t==Je?e.size:sr(e).length},y.snakeCase=ml,y.some=function(e,t,n){var r=Hu(e)?g:wr;return n&&ia(e,t,n)&&(t=te),r(e,Hi(t,3))},y.sortedIndex=function(e,t){return Lr(e,t)},y.sortedIndexBy=function(e,t,n){return Cr(e,t,Hi(n,2))},y.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var r=Lr(e,t);if(r<n&&Ga(e[r],t))return r}return-1},y.sortedLastIndex=function(e,t){return Lr(e,t,!0)},y.sortedLastIndexBy=function(e,t,n){return Cr(e,t,Hi(n,2),!0)},y.sortedLastIndexOf=function(e,t){if(null==e?0:e.length){var n=Lr(e,t,!0)-1;if(Ga(e[n],t))return n}return-1},y.startCase=El,y.startsWith=function(e,t,n){return e=po(e),n=null==n?0:fn(so(n),0,e.length),t=Ur(t),e.slice(n,n+t.length)==t},y.subtract=zl,y.sum=function(e){return e&&e.length?b(e,To):0},y.sumBy=function(e,t){return e&&e.length?b(e,Hi(t,2)):0},y.template=function(e,t,n){var r=y.templateSettings;n&&ia(e,t,n)&&(t=te),e=po(e),t=nl({},t,r,Ci);var i,a,o=nl({},t.imports,r.imports,Ci),s=vo(o),u=C(o,s),l=0,c=t.interpolate||Kt,d="__p += '",p=Uo((t.escape||Kt).source+"|"+c.source+"|"+(c===Vt?jt:Kt).source+"|"+(t.evaluate||Kt).source+"|$","g"),f="//# sourceURL="+("sourceURL"in t?t.sourceURL:"lodash.templateSources["+ ++_n+"]")+"\n";e.replace(p,function(t,n,r,o,s,u){return r||(r=o),d+=e.slice(l,u).replace(Qt,x),n&&(i=!0,d+="' +\n__e("+n+") +\n'"),s&&(a=!0,d+="';\n"+s+";\n__p += '"),r&&(d+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),l=u+t.length,t}),d+="';\n";var h=t.variable;h||(d="with (obj) {\n"+d+"\n}\n"),d=(a?d.replace(vt,""):d).replace(gt,"$1").replace(yt,"$1;"),d="function("+(h||"obj")+") {\n"+(h?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var v=Vl(function(){return Co(s,f+"return "+d).apply(te,u)});if(v.source=d,$a(v))throw v;return v},y.times=function(e,t){if((e=so(e))<1||e>De)return[];var n=Ce,r=ms(e,Ce);t=Hi(t),e-=Ce;for(var i=D(r,t);++n<e;)t(n);return i},y.toFinite=oo,y.toInteger=so,y.toLength=uo,y.toLower=function(e){return po(e).toLowerCase()},y.toNumber=lo,y.toSafeInteger=function(e){return e?fn(so(e),-De,De):0===e?e:0},y.toString=po,y.toUpper=function(e){return po(e).toUpperCase()},y.trim=function(e,t,n){if((e=po(e))&&(n||t===te))return e.replace(wt,"");if(!e||!(t=Ur(t)))return e;var r=Y(e),i=Y(t);return Kr(r,N(r,i),U(r,i)+1).join("")},y.trimEnd=function(e,t,n){if((e=po(e))&&(n||t===te))return e.replace(Ct,"");if(!e||!(t=Ur(t)))return e;var r=Y(e);return Kr(r,0,U(r,Y(t))+1).join("")},y.trimStart=function(e,t,n){if((e=po(e))&&(n||t===te))return e.replace(Lt,"");if(!e||!(t=Ur(t)))return e;var r=Y(e);return Kr(r,N(r,Y(t))).join("")},y.truncate=function(e,t){var n=Te,r=Ve;if(Za(t)){var i="separator"in t?t.separator:i;n="length"in t?so(t.length):n,r="omission"in t?Ur(t.omission):r}var a=(e=po(e)).length;if(F(e)){var o=Y(e);a=o.length}if(n>=a)return e;var s=n-X(r);if(s<1)return r;var u=o?Kr(o,0,s).join(""):e.slice(0,s);if(i===te)return u+r;if(o&&(s+=u.length-s),$u(i)){if(e.slice(s).search(i)){var l,c=u;for(i.global||(i=Uo(i.source,po(Ft.exec(i))+"g")),i.lastIndex=0;l=i.exec(c);)var d=l.index;u=u.slice(0,d===te?s:d)}}else if(e.indexOf(Ur(i),s)!=s){var p=u.lastIndexOf(i);p>-1&&(u=u.slice(0,p))}return u+r},y.unescape=function(e){return(e=po(e))&&mt.test(e)?e.replace(_t,qn):e},y.uniqueId=function(e){var t=++qo;return po(e)+t},y.upperCase=kl,y.upperFirst=Tl,y.each=Ua,y.eachRight=Ma,y.first=Ia,So(y,function(){var e={};return wn(y,function(t,n){Ho.call(y.prototype,n)||(e[n]=t)}),e}(),{chain:!1}),y.VERSION="4.17.4",o(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){y[e].placeholder=y}),o(["drop","take"],function(e,t){J.prototype[e]=function(n){n=n===te?1:As(so(n),0);var r=this.__filtered__&&!t?new J(this):this.clone();return r.__filtered__?r.__takeCount__=ms(n,r.__takeCount__):r.__views__.push({size:ms(n,Ce),type:e+(r.__dir__<0?"Right":"")}),r},J.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),o(["filter","map","takeWhile"],function(e,t){var n=t+1,r=n==Pe||3==n;J.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:Hi(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}}),o(["head","last"],function(e,t){var n="take"+(t?"Right":"");J.prototype[e]=function(){return this[n](1).value()[0]}}),o(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");J.prototype[e]=function(){return this.__filtered__?new J(this):this[n](1)}}),J.prototype.compact=function(){return this.filter(To)},J.prototype.find=function(e){return this.filter(e).head()},J.prototype.findLast=function(e){return this.reverse().find(e)},J.prototype.invokeMap=Sr(function(e,t){return"function"==typeof e?new J(this):this.map(function(n){return er(n,e,t)})}),J.prototype.reject=function(e){return this.filter(qa(Hi(e)))},J.prototype.slice=function(e,t){e=so(e);var n=this;return n.__filtered__&&(e>0||t<0)?new J(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==te&&(n=(t=so(t))<0?n.dropRight(-t):n.take(t-e)),n)},J.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},J.prototype.toArray=function(){return this.take(Ce)},wn(J.prototype,function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),i=y[r?"take"+("last"==t?"Right":""):t],a=r||/^find/.test(t);i&&(y.prototype[t]=function(){var t=this.__wrapped__,o=r?[1]:arguments,s=t instanceof J,u=o[0],l=s||Hu(t),c=function(e){var t=i.apply(y,f([e],o));return r&&d?t[0]:t};l&&n&&"function"==typeof u&&1!=u.length&&(s=l=!1);var d=this.__chain__,p=!!this.__actions__.length,h=a&&!d,v=s&&!p;if(!a&&l){t=v?t:new J(this);var g=e.apply(t,o);return g.__actions__.push({func:Na,args:[c],thisArg:te}),new Q(g,d)}return h&&v?e.apply(this,o):(g=this.thru(c),h?r?g.value()[0]:g.value():g)})}),o(["pop","push","shift","sort","splice","unshift"],function(e){var t=jo[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);y.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var i=this.value();return t.apply(Hu(i)?i:[],e)}return this[n](function(n){return t.apply(Hu(n)?n:[],e)})}}),wn(J.prototype,function(e,t){var n=y[t];if(n){var r=n.name+"";(Ls[r]||(Ls[r]=[])).push({name:t,func:n})}}),Ls[Ei(te,he).name]=[{name:"wrapper",func:te}],J.prototype.clone=function(){var e=new J(this.__wrapped__);return e.__actions__=oi(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=oi(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=oi(this.__views__),e},J.prototype.reverse=function(){if(this.__filtered__){var e=new J(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},J.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=Hu(e),r=t<0,i=n?e.length:0,a=$i(0,i,this.__views__),o=a.start,s=a.end,u=s-o,l=r?s:o-1,c=this.__iteratees__,d=c.length,p=0,f=ms(u,this.__takeCount__);if(!n||!r&&i==u&&f==u)return zr(e,this.__actions__);var h=[];e:for(;u--&&p<f;){for(var v=-1,g=e[l+=t];++v<d;){var y=c[v],_=y.iteratee,A=y.type,m=_(g);if(A==Ie)g=m;else if(!m){if(A==Pe)continue e;break e}}h[p++]=g}return h},y.prototype.at=Tu,y.prototype.chain=function(){return Oa(this)},y.prototype.commit=function(){return new Q(this.value(),this.__chain__)},y.prototype.next=function(){this.__values__===te&&(this.__values__=ao(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?te:this.__values__[this.__index__++]}},y.prototype.plant=function(e){for(var t,n=this;n instanceof R;){var r=Va(n);r.__index__=0,r.__values__=te,t?i.__wrapped__=r:t=r;var i=r;n=n.__wrapped__}return i.__wrapped__=e,t},y.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof J){var t=e;return this.__actions__.length&&(t=new J(this)),(t=t.reverse()).__actions__.push({func:Na,args:[wa],thisArg:te}),new Q(t,this.__chain__)}return this.thru(wa)},y.prototype.toJSON=y.prototype.valueOf=y.prototype.value=function(){return zr(this.__wrapped__,this.__actions__)},y.prototype.first=y.prototype.head,os&&(y.prototype[os]=function(){return this}),y}();"function"==typeof te&&"object"==typeof te.amd&&te.amd?bn._=Gn:wn?((wn.exports=Gn)._=Gn,Dn._=Gn):bn._=Gn}).call(Mn)}),qn=e.playerconfig.DEFAULT,Gn=new Fn({WRAPPER_LIMIT:10}),Kn={INIT:"INIT",PENDING:"PENDING",WATING:"WATING",DISPOSE:"DISPOSE"},Qn=(un=sn=function(t){function n(e){fe(this,n);var t=ye(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));t.state={adState:Kn.INIT,adIntegrator:null,paused:!1,restorePlayer:null};var r=t,i=t.props.player;return i.vastAd=t,t.firstAd=!1,t._initAd(),i.one(qn.EVENT.AD_END,function(){r.state.restorePlayer||(i.vastAd=null)}),t}return ge(n,Ae),he(n,[{key:"adPosition",value:function(){return this.props.type}},{key:"skipAd",value:function(){var e=this.state.adIntegrator;e&&e.skipAd()}},{key:"clickThrough",value:function(){var e=this.state.adIntegrator;e&&e.clickThrough()}},{key:"getAdVolume",value:function(){var e=this.state.adIntegrator;if(e)return e.getAdVolume()}},{key:"getAdExpanded",value:function(){var e=this.state.adIntegrator;if(e)return e.getAdExpanded()}},{key:"setAdVolume",value:function(e){var t=this.state.adIntegrator;t&&t.setAdVolume(e)}},{key:"adUnit",value:function(){var e=this.state.adIntegrator;if(e)return e}},{key:"paused",value:function(){return this.state.paused}},{key:"getPlayerAdUnit",value:function(){return this.state.adIntegrator.getPlayerAdUnit()}},{key:"isPaused",value:function(){return this.state.adIntegrator.isPaused()}},{key:"vastResponse",value:function(){var e=this.state.vastResponse;return e}},{key:"_initAd",value:function(){var t=this,n=this.props.player;n.on(qn.EVENT.USER_SKIP_AD,this.skipAd),Promise.resolve().then(function(){return t._setAdCancelTimeout()}).then(function(){return t._getVastResponse()}).then(function(e){return t.playAd(e)}).then(function(){var r=t.state,i=r.restorePlayer,a=r.adIntegrator,o=r.vastResponse;!!o.nonLinear&&o.nonLinear.height||(e.log.trace("VastPlugin > ad end"),n.trigger(qn.EVENT.AD_END),i.snapshot().muted=a.getPlayerAdUnit().muted(),i.snapshot().volume=a.getPlayerAdUnit().volume())}).catch(function(t){e.log.trace("VastPlugin > end with error:",t),n.trigger(qn.EVENT.AD_END)})}},{key:"prepareForPlayAd",value:function(){this._prepareForAd(),this._setUpRestorePlayer()}},{key:"_prepareForAd",value:function(){var t=this,n=this.props,r=n.player,i=n.preLoaded,a=this.origPlay=r.play,o=this.origPlay=r.pause;r.play=function(n){var r=t.state,i=r.adIntegrator,o=r.paused;n?a.apply(this,arguments):i&&(o||e.agent.isIOS)&&(t.setState({paused:!1}),i.resumeAd())},r.pause=function(n){var r=t.state,i=r.adIntegrator,a=r.paused;n?o.apply(this,arguments):!i||a&&!e.agent.isIOS||(t.setState({paused:!0}),i.pauseAd())};var s=this.oriCurrentTime=r.currentTime,u=this.oriDuration=r.duration,l=this.oriMuted=r.muted;!e.agent.isIOS&&i&&(r.currentTime=function(e){var n=t.state.adIntegrator;if(e)s.apply(this.arguments);else if(n)return"IMA"==n.type?n.getPlayerAdUnit().currentTimeAd():n.getPlayerAdUnit().currentTime()},r.duration=function(e){var n=t.state.adIntegrator;if(e)u.apply(this,arguments);else if(n)return"IMA"==n.type?n.getPlayerAdUnit().getAdDuration():n.getPlayerAdUnit().duration()},r.muted=function(e){var n=t.state.adIntegrator;return"boolean"==typeof e?(n.getPlayerAdUnit().muted(e),e?t.setAdVolume(0):t.setAdVolume(.5)):n.getPlayerAdUnit().muted()}),r.one(qn.EVENT.AD_END,function(){r.off(qn.EVENT.USER_SKIP_AD,t.skipAd),r.play=a,r.pause=o,r.currentTime=s,r.duration=u,r.muted=l})}},{key:"playAd",value:function(){var e=pe(regeneratorRuntime.mark(function e(t){var n,r,i,a,o,s,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.props.player,r=this.state.adState,i=n.options().params.adPod,r===Kn.INIT){e.next=5;break}return e.abrupt("return");case 5:if(!t||!t.length){e.next=33;break}a=void 0,o=void 0,s=0;case 9:if(!(s<t.length)){e.next=32;break}if(u=t[s],e.prev=11,!0!==i){e.next=19;break}return n.trigger(qn.EVENT.AD_VASTRESPONSE,u),e.next=16,this._playMutilAd(u);case 16:o=e.sent,e.next=24;break;case 19:return n.trigger(qn.EVENT.AD_VASTRESPONSE,u),e.next=22,this._playOneAd(u);case 22:return o=e.sent,e.abrupt("return",o);case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(11),a=e.t0;case 29:s++,e.next=9;break;case 32:return e.abrupt("return",a);case 33:return e.abrupt("return",this._playOneAd(t));case 34:case"end":return e.stop()}},e,this,[[11,26]])}));return function(t){return e.apply(this,arguments)}}()},{key:"_playMutilAd",value:function(e){var t=this.props.player;this.setState({adIntegrator:null,vastResponse:e});var n=Hn.cloneDeep(e),r=void 0,i=!1;e.ads&&e.ads[0].wrapper&&(i=-1!=e.ads[0].wrapper.VASTAdTagURI.search("google")||-1!=e.ads[0].wrapper.VASTAdTagURI.search("urekamedia")),r=On&&this._isIMA(n)||i?new On(this.props):"audio"==n.ads[0].adType?new Mt(this.props):this._isVPAID(n)?new Ht(this.props):new Nt(this.props),this.setState({adIntegrator:r});var a=!1;return t.one(qn.EVENT.VPAID_AD_START,function(){a=!0}),r.playAd(n).catch(function(e){if(!a)throw e})}},{key:"_checkPrerollVpaid",value:function(){var e=this.props,t=e.player,n=e.preLoaded,r=e.type,i=e.adsITVC,a=this.state.adIntegrator;return new Promise(function(e){i?e():n&&"preroll"===r&&"VPAID"===a.type?t.one("timeupdate",function(){e()}):n&&"preroll"===r&&"IMA"===a.type?t.one("timeupdate",function(){e()}):e()})}},{key:"_playOneAd",value:function(e){var t=this.props.player;this.setState({vastResponse:e});var n=void 0,r=Hn.cloneDeep(e);On&&this._isIMA(r)?(r.adTagUrl=J(r.adTagUrl),n=new On(this.props)):n="audio"==r.ads[0].adType?new Mt(this.props):this._isVPAID(r)?new Ht(this.props):new Nt(this.props),this.setState({adIntegrator:n}),t.trigger(qn.EVENT.AD_PLAY,r);var i=!1;return t.one(qn.EVENT.VPAID_AD_START,function(){i=!0}),this._checkPrerollVpaid(r).then(function(){return n.playAd(r).catch(function(e){if(!i)throw e})})}},{key:"snapshot",value:function(){return this.state.restorePlayer.snapshot()}},{key:"_setUpRestorePlayer",value:function(){var e=this.restorePlayer=new Wn(this.props);this.setState({restorePlayer:e})}},{key:"_setAdCancelTimeout",value:function(){}},{key:"_getVastResponse",value:function(){var e=this.props,t=e.adTagUrl,r=e.adTagXML,i=e.vastResponse,a=e.ima,o=e.player;return a?Promise.resolve({ima:!0,adTagUrl:a}):i?Promise.resolve(i):n.getVASTResponse({adTagUrl:t,adTagXML:r,player:o})}},{key:"_isVPAID",value:function(e){var t,n,r=e.mediaFiles;for(t=0,n=r.length;t<n;t++)if(Ke.isVPAID(r[t])&&r[t].isSupported())return!0;return!1}},{key:"_isIMA",value:function(e){return!!e.ima}}],[{key:"getVASTResponse",value:function(e){var t=e.adTagUrl,n=e.adTagXML,r=e.isPackageAds,i=e.player;return Gn.getVASTResponse({adTagUrl:t,adTagXML:n,isPackageAds:r,player:i})}}]),n}(),sn.propTypes={player:e.PropTypes.object.isRequired,type:e.PropTypes.string.isRequired,adTagUrl:e.PropTypes.string,adTagXML:e.PropTypes.object,adsITVC:e.PropTypes.bool,ima:e.PropTypes.string,preLoaded:e.PropTypes.bool,skipoffset:e.PropTypes.number,vastResponse:e.PropTypes.array},sn.defaultProps={timeout:500,autostart:!0},on=un,ee(on.prototype,"skipAd",[e.autobind],Object.getOwnPropertyDescriptor(on.prototype,"skipAd"),on.prototype),ee(on.prototype,"clickThrough",[e.autobind],Object.getOwnPropertyDescriptor(on.prototype,"clickThrough"),on.prototype),on),$n=(cn=ln=function(e){function t(e){return fe(this,t),ye(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return ge(t,e),he(t,[{key:"getDefaultProps",value:function(){var e=this.constructor.defaultProps;return ve({},e,{})}}]),he(t,[{key:"initAd",value:function(e){var t=e.adTagUrl,n=e.adTagXML,r=e.vastResponse,i=e.ima,a=e.type,o=e.skipoffset,s=e.preLoaded,u=e.adsITVC,l=this,c=this.props.player,d=c.play,p=!1;c.play=function(){p||(p=!0,c.play=d,l._initAd({adTagUrl:t,adTagXML:n,vastResponse:r,ima:i,type:a,skipoffset:o,preLoaded:s,adsITVC:u}))},c.play()}},{key:"_initAd",value:function(e){var t=e.adTagUrl,n=e.adTagXML,r=e.vastResponse,i=e.ima,a=e.type,o=e.preLoaded,s=e.skipoffset,u=e.adsITVC,l=this.props.player;l.vastAd||new Qn({player:l,adTagUrl:t,adTagXML:n,vastResponse:r,ima:i,type:a,skipoffset:s,preLoaded:o,adsITVC:u})}},{key:"getVastRespone",value:function(e){var t=e.adTagUrl,n=e.adTagXML,r=e.player;return Qn.getVASTResponse({adTagUrl:t,adTagXML:n,player:r})}}]),t}(e.Plugin),ln.defaultProps={adsCancelTimeout:5e3},cn),Xn={PREROLL:"preroll",MIDROLL:"midroll",POSTROLL:"postroll"},Yn=le.getComponent("Player"),Jn=e.playerconfig.DEFAULT,Zn=(fn=pn=function(t){function n(t){fe(this,n);var r=ye(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t)),i=r,a=r.props,o=a.player,s=a.enableAd,u=o.options().params;return s?(u.noAdsLoad||o.one("updateMediaInfo",function(){if(u.midroll){var t=i._getVastInAdmicro({type:Xn.MIDROLL});i.getVastRespone({adTagUrl:t,player:o}).then(function(e){"object"===(void 0===e?"undefined":de(e))&&i.setState({midroll:e})}).catch(function(e){})}if(u.postroll){var n=i._getVastInAdmicro({type:Xn.POSTROLL});i.getVastRespone({adTagUrl:n,player:o}).then(function(e){"object"===(void 0===e?"undefined":de(e))&&i.setState({postroll:e})}).catch(function(e){})}if(!u.nopre&&e.agent.isIOS){var r=i._getVastInAdmicro({type:Xn.PREROLL});i.getVastRespone({adTagUrl:r,player:o}).then(function(e){"object"===(void 0===e?"undefined":de(e))&&i.setState({preroll:e})}).catch(function(e){})}}),o.on("prepareMidrollVast",r.handlePrepareMidroll),u.noAdsLoad||e.agent.isIOS?(o.on(Jn.EVENT.AD_ORDER_START_POSTROLL,r.startPostroll),o.one("play",r.preparePreroll)):(o.on("preparePostrollVast",r.preparePostroll),u.vid?o.one("updateMediaInfo",r.handleLoadAdPreroll):o.one(Jn.EVENT.PLAYER_READY,r.handleLoadAdPreroll)),r):ye(r)}return ge(n,$n),he(n,[{key:"getDefaultProps",value:function(e){var t=e.player.options(),n=t.params,r=t.plugins,i=n.ads,a=n.vast,o=n.ima,s=this.constructor.defaultProps,u={};return!r.kinghubAdmicroADSPlugin&&Yn.prototype.kinghubAdmicroADSPlugin&&(u.enableAd=!1),(a||o)&&(u.enableAd=!0),Yn.prototype.adsVastPlugin&&(u.enableAd=!1),!1===i&&(u.enableAd=!1),ve({},s,u)}}]),he(n,[{key:"preparePreroll",value:function(){var e=this,t=this.props.player,n=this.state.preroll,r=t.options().params;if(!r.nopre){var i=r.ima;if(n)t.one("timeupdate",function(){e.initAd({adTagUrl:a,vastResponse:n,ima:i,type:Xn.PREROLL})});else{var a=e._getVastInAdmicro({type:Xn.PREROLL,position:0});a&&t.one("timeupdate",function(){e.initAd({adTagUrl:a,vastResponse:void 0,ima:i,type:Xn.PREROLL})})}}}},{key:"preparePostroll",value:function(){var e=this,t=this.state.postroll,n=this.props.player,r=e._getVastInAdmicro({type:Xn.POSTROLL,position:0});if(r)return t?(this.initAd({adTagUrl:r,vastResponse:t,type:Xn.POSTROLL,preLoaded:!0}),void this.setState({postroll:!1})):void this.getVastRespone({adTagUrl:r,player:n}).then(function(t){var n="object"===(void 0===t?"undefined":de(t))?t:void 0,i="string"==typeof t?t:r;(i||n)&&e.initAd({adTagUrl:i,vastResponse:n,type:Xn.POSTROLL,preLoaded:!0})}).catch(function(e){})}},{key:"handleLoadAdPreroll",value:function(){var e=this,t=this.props.player,n=this.state.preroll,r=t.options().params;if(!r.nopre){var i=r.ima;if(n)t.one("timeupdate",function(){e.initAd({adTagUrl:a,vastResponse:n,ima:i,type:Xn.PREROLL})});else{var a=e._getVastInAdmicro({type:Xn.PREROLL,position:0});a&&this.getVastRespone({adTagUrl:a,player:t}).then(function(t){var n="object"===(void 0===t?"undefined":de(t))?t:void 0,r="string"==typeof t?t:a;(r||n)&&e.initAd({adTagUrl:r,vastResponse:n,ima:i,type:Xn.PREROLL,preLoaded:!0})}).catch(function(e){})}}}},{key:"startMidroll",value:function(e,t){var n=void 0,r=void 0;if("string"==typeof t)n=t;else{if("object"!==(void 0===t?"undefined":de(t)))return;r=t}this.initAd({adTagUrl:n,vastResponse:r,type:Xn.MIDROLL})}},{key:"handlePrepareMidroll",value:function(t,n){var r=this.props.player,i=this,a=this.state.midroll,o=r.options().params,s=this._getVastInAdmicro({type:Xn.MIDROLL,position:n});if(s)return a?(r.trigger(Jn.EVENT.AD_MIDROLL_VASTRESPONSE,a),o.noAdsLoad||e.agent.isIOS?void r.one(Jn.EVENT.AD_ORDER_START_MIDROLL,i.startMidroll):(this.initAd({adTagUrl:s,vastResponse:a,type:Xn.MIDROLL,preLoaded:!0}),void this.setState({midroll:!1}))):void this.getVastRespone({adTagUrl:s,player:r}).then(function(t){r.trigger(Jn.EVENT.AD_MIDROLL_VASTRESPONSE,t);var n="object"===(void 0===t?"undefined":de(t))?t:void 0,a="string"==typeof t?t:s;(a||n)&&(o.noAdsLoad||e.agent.isIOS?r.one(Jn.EVENT.AD_ORDER_START_MIDROLL,i.startMidroll):i.initAd({adTagUrl:a,vastResponse:n,type:Xn.MIDROLL,preLoaded:!0}))}).catch(function(){r.trigger(Jn.EVENT.AD_MIDROLL_VASTRESPONSE)});r.trigger(Jn.EVENT.AD_MIDROLL_VASTRESPONSE)}},{key:"startPostroll",value:function(){var e=this._getVastInAdmicro({type:Xn.POSTROLL,position:10});e&&this._initAd({adTagUrl:e,type:"postroll"})}},{key:"_getVastInAdmicro",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.props.player,n=t.options().params;return Yn.prototype.kinghubAdmicroADSPlugin?Yn.prototype.kinghubAdmicroADSPlugin.call(t,e):n.vast?n.vast:void 0}}]),n}(),pn.defaultProps={adsCancelTimeout:5e3,enableAd:!0},dn=fn,te(dn.prototype,"preparePreroll",[e.autobind],Object.getOwnPropertyDescriptor(dn.prototype,"preparePreroll"),dn.prototype),te(dn.prototype,"preparePostroll",[e.autobind],Object.getOwnPropertyDescriptor(dn.prototype,"preparePostroll"),dn.prototype),te(dn.prototype,"handleLoadAdPreroll",[e.autobind],Object.getOwnPropertyDescriptor(dn.prototype,"handleLoadAdPreroll"),dn.prototype),te(dn.prototype,"startMidroll",[e.autobind],Object.getOwnPropertyDescriptor(dn.prototype,"startMidroll"),dn.prototype),te(dn.prototype,"handlePrepareMidroll",[e.autobind],Object.getOwnPropertyDescriptor(dn.prototype,"handlePrepareMidroll"),dn.prototype),te(dn.prototype,"startPostroll",[e.autobind],Object.getOwnPropertyDescriptor(dn.prototype,"startPostroll"),dn.prototype),dn),er=e.playerconfig.DEFAULT,tr=(gn=vn=function(t){function n(){var e,t,r,i;fe(this,n);for(var a=arguments.length,o=Array(a),s=0;s<a;s++)o[s]=arguments[s];return t=r=ye(this,(e=n.__proto__||Object.getPrototypeOf(n)).call.apply(e,[this].concat(o))),r.state={timeLeft:6,started:!1,skipped:!1,currentTimeAdsWhenStart:0},i=t,ye(r,i)}return ge(n,t),he(n,[{key:"componentDidMount",value:function(){this.intervalRemainingTime_=setInterval(this.update,200)}},{key:"componentWillUnmount",value:function(){clearInterval(this.intervalRemainingTime_)}},{key:"_getAdDuration",value:function(){var e=this.props.player,t=this;e.vastAd.adUnit().getAdDuration().then(function(e){t.adDuration=e}),543706===e.vastAd.vastResponse().ads[0].id&&(this.skipOffset=8)}},{key:"update",value:function(){var t=this.props,n=t.player,r=t.skipOffset,i=this.state.currentTimeAdsWhenStart;if(n.vastAd){var a=n.vastAd.adUnit(),o=this;if("IMA"!=a.type)this.adDuration&&-1!==this.adDuration?(this.skipOffset=a.getSkipOffSet(),r=this.skipOffset||r,this.adSkipText||a.state.adUnit&&a.state.adUnit.props.adUnit&&a.state.adUnit.props.adUnit._creative&&(this.adSkipText=a.state.adUnit.props.adUnit._creative.adSkipText),a.getAdRemainingTime().then(function(t){e.agent.isIOS&&t>o.adDuration&&(o.adDuration=t);var n=Math.ceil(r+t-o.adDuration);o.setState({timeLeft:n,started:!0})})):this._getAdDuration();else{i||this.setState({currentTimeAdsWhenStart:a.getCurrentTimeAd()});var s=Math.ceil(r-a.getCurrentTimeAd());if(s<0){var u=a.getCurrentTimeAd()-i;s=Math.ceil(r-u)}s>=0&&this.setState({timeLeft:s,started:!0})}}}},{key:"_skipAd",value:function(t){t.preventDefault();var n=this.state,r=n.timeLeft,i=n.skipped;r>0||i||(this.setState({skipped:!0}),e.log.trace("<SkipToggle._skipAd>"),this.props.player.trigger(er.EVENT.USER_SKIP_AD))}},{key:"render",value:function(){var e=void 0,t=this.props.player,n=this.state,r=n.timeLeft,i=n.skipped,a=n.started,o=r>0?r+" giy":"B Qua",s=!1;if("B Qua"===o&&(e="ad-canskip",s=!0),t.options().params.noAdSkip)return null;if(i||!a)return null;var u="Bn c th b qua sau:";return this.adSkipText&&(u=this.adSkipText),ce.createElement("div",{className:"ad-overlay"},s?null:ce.createElement("span",{className:"ad-span-text"},ce.createElement("div",{className:"ad-p-text"}," ",u," ")),ce.createElement("button",{className:"ad-skip2 "+e+" audioSwitchVoicePlayer-button",onClick:this._skipAd},o))}}]),n}(t.Component),vn.propTypes={player:e.PropTypes.object.isRequired,skipOffset:e.PropTypes.number},vn.defaultProps={skipOffset:6},hn=gn,ne(hn.prototype,"update",[e.autobind],Object.getOwnPropertyDescriptor(hn.prototype,"update"),hn.prototype),ne(hn.prototype,"_skipAd",[e.autobind],Object.getOwnPropertyDescriptor(hn.prototype,"_skipAd"),hn.prototype),e.playerconfig.DEFAULT),nr=(An=_n=function(e){function t(){var e,n,r,i;fe(this,t);for(var a=arguments.length,o=Array(a),s=0;s<a;s++)o[s]=arguments[s];return n=r=ye(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.state={url:null},i=n,ye(r,i)}return ge(t,e),he(t,[{key:"componentDidMount",value:function(){var e=this.props.player;"VPAID"!==e.vastAd.adUnit().type&&e.trigger(tr.EVENT.VAST_AD_VIDEO_SHOW)}},{key:"updateBlocker",value:function(e){this.setState({url:e})}},{key:"_clickthrough",value:function(e){var t=this.props.player,n=t.vastAd.adUnit();if(n.isPaused())return t.play(),e.stopPropagation(),!1;n.clickThrough()}},{key:"render",value:function(){var e=this.state.url;return e?ce.createElement("a",{className:"ad-clickthrough-blocker",onClick:this._clickthrough,href:e,target:"_blank",rel:"noopener noreferrer"}):null}}]),t}(t.Component),_n.propTypes={player:e.PropTypes.object.isRequired},yn=An,re(yn.prototype,"updateBlocker",[e.autobind],Object.getOwnPropertyDescriptor(yn.prototype,"updateBlocker"),yn.prototype),re(yn.prototype,"_clickthrough",[e.autobind],Object.getOwnPropertyDescriptor(yn.prototype,"_clickthrough"),yn.prototype),"audioSwitchVoicePlayer"),rr=e.playerconfig.DEFAULT,ir=(kn=En=function(e){function t(){var e,n,r,i;fe(this,t);for(var a=arguments.length,o=Array(a),s=0;s<a;s++)o[s]=arguments[s];return n=r=ye(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.state={muted:!0},i=n,ye(r,i)}return ge(t,e),he(t,[{key:"componentDidMount",value:function(){var e=this.props.player,t=this;this.type=e.vastAd.adUnit().type,this.update=this.update.bind(this),this._handleAdEnd=this._handleAdEnd.bind(this),this.intervalRemainingTime_=setInterval(this.update,200);var n=e.vastAd.getPlayerAdUnit();e.on(rr.EVENT.AD_END,this._handleAdEnd);var r=e.vastAd,i=r.restorePlayer?r.snapshot():{muted:!0},a=i.muted?0:i.volume;try{r.setAdVolume(a).then(function(){r.getAdVolume().then(function(e){t.setState({firstVolume:e})})})}catch(e){}var o=i.muted;this.setState({muted:o}),e.setTimeout(function(){t.setState({firstVolume:a})},1e3),n.on("volumechange",this.update),this.update()}},{key:"componentWillUnmount",value:function(){clearInterval(this.intervalRemainingTime_)}},{key:"_handleAdEnd",value:function(){}},{key:"update",value:function(){var e=this,t=this.props.player.vastAd,n=t.getPlayerAdUnit();t.getAdVolume().then(function(t){var r=n.muted();0===t||r?e.setState({muted:!0}):e.setState({muted:!1})})}},{key:"handleClick",value:function(e){e.preventDefault();var t=this.props.player,n=this.state,r=n.firstVolume,i=n.muted,a=t.vastAd,o=a.getPlayerAdUnit();if("IMA"===a.adUnit().type){var s=o.muted();return o.muted(!s),void this.setState({muted:!s})}a.getAdVolume().then(function(e){var t=0===r?.5:r;o.muted(!i),0===e||i?a.setAdVolume(t):a.setAdVolume(0)})}},{key:"render",value:function(){var e=this,t=this.props.player,n=this.state.muted,r=t.el_.clientWidth;return t.options().params.noAdMute&&"VAST"===t.vastAd.adUnit().type?null:(t.options().params.adMuteToggle||"VPAID"!==t.vastAd.adUnit().type)&&(t.options().params.adMuteToggle||"IMA"!==t.vastAd.adUnit().type)?r<=170?null:ce.createElement("div",{className:nr+"-ad-btn-mute",onClick:function(t){return e.handleClick(t)}},ce.createElement("button",null,ce.createElement("span",{className:nr+"-ad-qmtwbs-base"}),ce.createElement("span",{className:nr+"-ad-qmtwbs-level"})),n?ce.createElement("span",{className:nr+"-ad-line-mute"}):null):null}}]),t}(t.Component),En.propTypes={player:e.PropTypes.object.isRequired},mn=kn,function(e,t,n,r,i){var a={};Object.keys(r).forEach(function(e){a[e]=r[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null)}(mn.prototype,"handleClick",[e.autobind],Object.getOwnPropertyDescriptor(mn.prototype,"handleClick"),mn.prototype),mn),ar=e.playerconfig.DEFAULT,or=(Vn=Tn=function(e){function t(){var e,n,r,i;fe(this,t);for(var a=arguments.length,o=Array(a),s=0;s<a;s++)o[s]=arguments[s];return n=r=ye(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.state={url:null},i=n,ye(r,i)}return ge(t,e),he(t,[{key:"componentDidMount",value:function(){var e=this.props.player;"VPAID"!==e.vastAd.adUnit().type&&e.trigger(ar.EVENT.VAST_AD_VIDEO_SHOW)}},{key:"render",value:function(){var e=this.props.player;return ce.createElement("div",null,ce.createElement(ir,{player:e}))}}]),t}(t.Component),Tn.propTypes={player:e.PropTypes.object.isRequired},e.playerconfig.DEFAULT),sr=(Pn=Rn=function(e){function t(){var e,n,r,i;fe(this,t);for(var a=arguments.length,o=Array(a),s=0;s<a;s++)o[s]=arguments[s];return n=r=ye(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.state={is_show:!1,thumb_query:r.props.player.options().params.poster,uriLanding:r.props.player.options().params.uriLanding},i=n,ye(r,i)}return ge(t,e),he(t,[{key:"componentDidMount",value:function(){var e=this.props.player;e.on(or.EVENT.AD_END,this._handleAdEnd),e.on(or.EVENT.AD_START,this._handleAdStart)}},{key:"componentWillUnmount",value:function(){var e=this.props.player;e.off(or.EVENT.AD_END,this._handleAdEnd),e.off(or.EVENT.AD_START,this._handleAdStart)}},{key:"_handleAdEnd",value:function(){this.setState({is_show:!0})}},{key:"_handleAdStart",value:function(){this.setState({is_show:!1})}},{key:"render",value:function(){var e=this.state,t=e.is_show,n=e.thumb_query,r=e.uriLanding;if(!t)return null;var i=n,a={backgroundImage:"url('"+(i=(i=decodeURIComponent(i)).replace(/([^:])(\/\/)/g,"$1/"))+"')"};return ce.createElement("div",{style:a,className:"ad-thumbnail"},ce.createElement("a",{className:"ad-clickthrough-blocker",href:r,target:"_blank",rel:"noopener noreferrer"}))}}]),t}(t.Component),Rn.propTypes={player:e.PropTypes.object.isRequired},Sn=Pn,ie(Sn.prototype,"_handleAdEnd",[e.autobind],Object.getOwnPropertyDescriptor(Sn.prototype,"_handleAdEnd"),Sn.prototype),ie(Sn.prototype,"_handleAdStart",[e.autobind],Object.getOwnPropertyDescriptor(Sn.prototype,"_handleAdStart"),Sn.prototype),Sn),ur=e.playerconfig.DEFAULT,lr="audioSwitchVoicePlayer",cr=(Dn=bn=function(t){function n(){var e,t,r,i;fe(this,n);for(var a=arguments.length,o=Array(a),s=0;s<a;s++)o[s]=arguments[s];return t=r=ye(this,(e=n.__proto__||Object.getPrototypeOf(n)).call.apply(e,[this].concat(o))),r.state={timeLeft:6,started:!1,skipped:!1,url:null,companionAds:!1,logo:"",audioPlaying:!0,ads_remainingTime:0},i=t,ye(r,i)}return ge(n,t),he(n,[{key:"componentDidMount",value:function(){var e=this.props.player;this.intervalRemainingTime_=setInterval(this.update,200);var t=e.vastAd.adUnit();if(t.state.vastResponse&&t.state.vastResponse.companions&&t.state.vastResponse.companions[0]){var n=t.state.vastResponse.companions[0].staticResource;this.setState({companionAds:!0,logo:n})}if("audioTransPlayer,audioSwitchVoicePlayer,audioPodcastPlayer".indexOf(lr)>=0&&"IMA"==t.type){var r=e.el_.getElementsByClassName("ima-container");if(r.length){for(var i=r[0].getElementsByTagName("video"),a=0;a<i.length;a++)i[a].style.backgroundColor="transparent";r[0].style.zIndex=9999,r[0].style.left="5px",r[0].style.top="3px"}e.on(ur.EVENT.VPAID_AD_CLICK_THRU,this.handleClickThrough)}}},{key:"componentWillUnmount",value:function(){var e=this.props.player;clearInterval(this.intervalRemainingTime_),e.off(ur.EVENT.VPAID_AD_CLICK_THRU,this.handleClickThrough)}},{key:"handleClickThrough",value:function(){this.props.player.vastAd.adUnit().isAdPlaying()?this.setState({audioPlaying:!1}):this.setState({audioPlaying:!0})}},{key:"updateBlocker",value:function(e){this.setState({url:e})}},{key:"_clickthrough",value:function(e){var t=this.props.player,n=t.vastAd.adUnit();if(n.isPaused())return t.play(),e.stopPropagation(),!1;n.clickThrough()}},{key:"_getAdDuration",value:function(){var e=this;this.props.player.vastAd.adUnit().getAdDuration().then(function(t){e.adDuration=t})}},{key:"update",value:function(){var e=this.props.player;if(e.vastAd){var t=e.vastAd.adUnit(),n=this;if(this.adDuration&&-1!==this.adDuration){var r=this.skipOffset=t.getSkipOffSet?t.getSkipOffSet():0;this.adSkipText||t.state.adUnit&&t.state.adUnit.props.adUnit&&t.state.adUnit.props.adUnit._creative&&(this.adSkipText=t.state.adUnit.props.adUnit._creative.adSkipText),t.getAdRemainingTime().then(function(e){e>n.adDuration&&(n.adDuration=e);var t=Math.ceil(r+e-n.adDuration);n.setState({timeLeft:t,started:!0,ads_remainingTime:e})})}else this._getAdDuration()}}},{key:"_skipAd",value:function(t){t.preventDefault();var n=this.state,r=n.timeLeft,i=n.skipped;r>0||i||(this.setState({skipped:!0}),e.log.trace("<AdAudio._skipAd>"),this.props.player.trigger(ur.EVENT.USER_SKIP_AD))}},{key:"clickBtnPlay",value:function(e){var t=this.props.player;this.state.audioPlaying?(t.pause(),this.setState({audioPlaying:!1}),e.stopPropagation()):(t.play(),this.setState({audioPlaying:!0}),e.stopPropagation())}},{key:"_clickthroughSwitchVoice",value:function(){this.props.player.vastAd.adUnit().clickThrough()}},{key:"render",value:function(){var t=this.props.player,n=this.state,r=n.timeLeft,i=n.skipped,a=n.started,o=n.url,s=(n.companionAds,n.logo),u=n.audioPlaying,l=n.ads_remainingTime,c=r>0?r+" giy":"B Qua";if("B Qua"===c&&"ad-canskip",t.options().params.noAdSkip)return null;if(i||!a)return null;t.muted(!1),o&&"#"!=o||(o=null);this.skipOffset,this.skipOffset;var d="00:00";if(this.adDuration){var p=Math.ceil(l);d="00:"+p,p<10&&(d="00:0"+p)}var f="B QUA "+r,h=(this.adDuration-l)/this.adDuration*100,v={},g="";r<1&&(f="B QUA",g="ads_audioSwitchVoice_skipIcon",v={backgroundColor:"#666",cursor:"pointer"});var y="ads_audioSwitchVoice_btn_play";y+=u?" btn-playing-control":" btn-play-control";var _=40,A="calc(100% - 50px)";return e.agent.isMobile&&(_=110,A="calc(100% - 120px)"),ce.createElement("div",{className:"overlay_ads_audioSwitchVoice"},ce.createElement("div",{className:"ads_audioSwitchVoice_logo",style:{backgroundImage:"url("+s+")",width:_}},o?ce.createElement("a",{className:"ads_audioSwitchVoice_logoClick",href:o,onClick:this._clickthroughSwitchVoice,target:"_blank",rel:"noopener noreferrer"}):null),ce.createElement("div",{className:"ads_audioSwitchVoice_control",style:{width:A}},ce.createElement("div",{className:y,onClick:this.clickBtnPlay}),ce.createElement("div",{className:"ads_audioSwitchVoice_progress"},ce.createElement("div",{className:"ads_audioSwitchVoice_slider"},ce.createElement("div",{className:"ads_audioSwitchVoice_play",style:{width:h+"%"}}),ce.createElement("div",{className:"ads_audioSwitchVoice_sliderDot",style:{left:h+"%"}}))),ce.createElement("div",{className:"ads_audioSwitchVoice_time"}," ",d," "),ce.createElement("div",{className:"ads_audioSwitchVoice_skip",style:v,onClick:this._skipAd},f," ",ce.createElement("div",{className:g}))))}}]),n}(t.Component),bn.propTypes={player:e.PropTypes.object.isRequired},In=Dn,ae(In.prototype,"handleClickThrough",[e.autobind],Object.getOwnPropertyDescriptor(In.prototype,"handleClickThrough"),In.prototype),ae(In.prototype,"updateBlocker",[e.autobind],Object.getOwnPropertyDescriptor(In.prototype,"updateBlocker"),In.prototype),ae(In.prototype,"_clickthrough",[e.autobind],Object.getOwnPropertyDescriptor(In.prototype,"_clickthrough"),In.prototype),ae(In.prototype,"update",[e.autobind],Object.getOwnPropertyDescriptor(In.prototype,"update"),In.prototype),ae(In.prototype,"_skipAd",[e.autobind],Object.getOwnPropertyDescriptor(In.prototype,"_skipAd"),In.prototype),ae(In.prototype,"clickBtnPlay",[e.autobind],Object.getOwnPropertyDescriptor(In.prototype,"clickBtnPlay"),In.prototype),ae(In.prototype,"_clickthroughSwitchVoice",[e.autobind],Object.getOwnPropertyDescriptor(In.prototype,"_clickthroughSwitchVoice"),In.prototype),In),dr=e.playerconfig.DEFAULT,pr="audioSwitchVoicePlayer",fr=(Cn=Ln=function(t){function n(){var e,t,r,i;fe(this,n);for(var a=arguments.length,o=Array(a),s=0;s<a;s++)o[s]=arguments[s];return t=r=ye(this,(e=n.__proto__||Object.getPrototypeOf(n)).call.apply(e,[this].concat(o))),r.state={isShow:!1,is_Loop:!1,ImaStarted:!1},i=t,ye(r,i)}return ge(n,t),he(n,[{key:"componentDidMount",value:function(){var e=this.props.player;e.on(dr.EVENT.AD_START,this._handleAdStart),e.on(dr.EVENT.AD_END,this._handleAdEnd),e.on(dr.EVENT.USER_SKIP_AD,this._handleAdSkip),e.on(dr.EVENT.VAST_AD_VIDEO_COMPLETE,this._handleAdMediaEnd),e.on(dr.EVENT.VPAID_AD_VIDEO_COMPLETE,this._handleAdMediaEnd),e.on(dr.EVENT.VAST_AD_VIDEO_START,this._handleVastStart),e.on(dr.EVENT.VPAID_AD_START,this._handleVpaidStart),this.hasAttributeLoop();var t=this;e.one(dr.EVENT.IMA_AD_STARTED,function(){t.setState({ImaStarted:!0})}),"audioSwitchVoicePlayer,audioPodcastPlayer,audioTransPlayer".indexOf(pr)>=0&&(e.el_.getElementsByClassName("overlay-shadow")[0].style.background="transparent")}},{key:"hasAttributeLoop",value:function(){var e=this.props.player;document.getElementById(""+e.id_).hasAttribute("loop")&&this.setState({is_Loop:!0})}},{key:"componentWillUnmount",value:function(){var e=this.props.player;e.off(dr.EVENT.AD_START,this._handleAdStart),e.off(dr.EVENT.AD_END,this._handleAdEnd),e.off(dr.EVENT.USER_SKIP_AD,this._handleAdSkip),e.off(dr.EVENT.VAST_AD_VIDEO_COMPLETE,this._handleAdMediaEnd),e.off(dr.EVENT.VPAID_AD_VIDEO_COMPLETE,this._handleAdMediaEnd),e.off(dr.EVENT.VAST_AD_VIDEO_START,this._handleVastStart),e.off(dr.EVENT.VPAID_AD_START,this._handleVpaidStart)}},{key:"_handleAdStart",value:function(){}},{key:"_handleAdMediaEnd",value:function(){this.setState({isShow:!1})}},{key:"_handleAdSkip",value:function(){this.setState({isShow:!1})}},{key:"_handleAdEnd",value:function(){this.setState({isShow:!1})}},{key:"_handleVastStart",value:function(){this.setState({isShow:!0})}},{key:"_handleVpaidStart",value:function(){this.setState({isShow:!0})}},{key:"render",value:function(){var t=this,n=this.state,r=n.isShow,i=n.is_Loop,a=(n.ImaStarted,this.props.player),o=a.options().params.adThumbnail;if(a.vastAd&&a.vastAd.adUnit()&&a.vastAd.adUnit().type,!r)return o&&!i?ce.createElement("div",{id:a.id_+"-ad-container",className:"ad-container",style:{width:"100%",height:"100%"}},ce.createElement(sr,{key:"adThumbail",player:this.props.player,ref:function(e){t.adThumbnail=e}})):null;a.el_.getElementsByClassName("overlay-ad")[0].style.background="transparent";var s={};return e.agent.isMobile,ce.createElement("div",{style:s,id:a.id_+"-ad-container",className:"ad-container-SwitchVoice"},ce.createElement(cr,{key:"Audio",player:this.props.player,ref:function(e){t.Audio=e}}))}}]),n}(t.Component),Ln.propTypes={player:e.PropTypes.object.isRequired},wn=Cn,oe(wn.prototype,"_handleAdStart",[e.autobind],Object.getOwnPropertyDescriptor(wn.prototype,"_handleAdStart"),wn.prototype),oe(wn.prototype,"_handleAdMediaEnd",[e.autobind],Object.getOwnPropertyDescriptor(wn.prototype,"_handleAdMediaEnd"),wn.prototype),oe(wn.prototype,"_handleAdSkip",[e.autobind],Object.getOwnPropertyDescriptor(wn.prototype,"_handleAdSkip"),wn.prototype),oe(wn.prototype,"_handleAdEnd",[e.autobind],Object.getOwnPropertyDescriptor(wn.prototype,"_handleAdEnd"),wn.prototype),oe(wn.prototype,"_handleVastStart",[e.autobind],Object.getOwnPropertyDescriptor(wn.prototype,"_handleVastStart"),wn.prototype),oe(wn.prototype,"_handleVpaidStart",[e.autobind],Object.getOwnPropertyDescriptor(wn.prototype,"_handleVpaidStart"),wn.prototype),wn);le.Vast=Qn;le.registerPlugin("AdsPlayerPlugin",function(){var e=this;e.AdsPlugin=new Zn({player:e});var t="rgba(0,0,0,0.7)";"AudioPlayer,audioTransPlayer,audioSwitchVoicePlayer,audioPodcastPlayer".indexOf("audioSwitchVoicePlayer")>=0&&(t="transparent");var n=document.createElement("div");n.style.background=t,n.style.transition="all 2s ease 0s",n.style.opacity=0,Ee.addClass(n,"overlay-ad"),e.one("player:ready",function(){e.overlay.append(n)}),e.one("ready",function(){var t=this,n=ce.createElement(fr,{key:"ad",player:e,ref:function(e){t.container.ad=e}});e.container.addChild(n);var r=document.createElement("div");r.style.transition="all 2s ease 0s",r.style.position="absolute",r.style.width="100%",r.style.display="none",r.setAttribute("id",e.id_+"-non-linear-ad"),Ee.addClass(r,"non-linear-ad"),e.overlay.append(r),e.trigger("pluginAdsReady")})})})}();